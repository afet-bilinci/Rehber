<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#0f766e" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">

    <title>Hava Afetleri - Kasırga, Fırtına, Dolu | Afet Hazırlık Rehberi</title>
    <meta name="description" content="Kasırga, yıldırım fırtınası, şiddetli dolu gibi hava afetleri için hazırlık rehberi, testler ve ilk yardım bilgileri.">
    <meta name="keywords" content="kasırga, yıldırım, dolu, hava afetleri, fırtına, afet hazırlık, test, ilk yardım">
    <meta name="author" content="Afet Hazırlık Platformu">

    <style>
        /* ==================== CSS DEĞİŞKENLERİ ==================== */
        :root {
            color-scheme: light dark;

            --primary: #0f766e;
            --primary-dark: #115e59;
            --primary-light: #14b8a6;
            --primary-soft: #99f6e4;
            --accent: #dc2626;
            --accent-light: #f87171;
            --warning: #d97706;
            --success: #059669;

            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;

            --white: #ffffff;
            --black: #000000;

            --shadow-sm: 0 1px 2px 0 rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --transition-fast: 150ms cubic-bezier(0.4,0,0.2,1);
            --transition-normal: 300ms cubic-bezier(0.4,0,0.2,1);
            --transition-smooth: 200ms cubic-bezier(0.4,0,0.2,1);

            /* Mobil güvenli alan değişkenleri */
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
            --safe-left: env(safe-area-inset-left, 0px);
            --safe-right: env(safe-area-inset-right, 0px);
        }

        /* ==================== KARANLIK MOD ==================== */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary: #14b8a6;
                --primary-dark: #0d9488;
                --primary-light: #5eead4;
                --primary-soft: #134e4a;
                --accent: #ef4444;
                --accent-light: #fca5a5;
                --warning: #f59e0b;
                --success: #10b981;

                --gray-50: #0f172a;
                --gray-100: #1e293b;
                --gray-200: #334155;
                --gray-300: #475569;
                --gray-400: #64748b;
                --gray-500: #94a3b8;
                --gray-600: #cbd5e1;
                --gray-700: #e2e8f0;
                --gray-800: #f1f5f9;
                --gray-900: #f8fafc;

                --white: #1e293b;
                --black: #f8fafc;
            }

            body { background-color: #0a0f1c !important; color: #f1f5f9 !important; }
            h1, h2, h3, h4, h5, h6 { color: #ffffff !important; }
            p { color: #cbd5e1 !important; }
            .logo-title { color: #ffffff !important; }
            .logo-subtitle { color: #94a3b8 !important; }

            header { background: rgba(15,23,42,0.97) !important; border-bottom-color: #334155 !important; }
            .nav-link { color: #94a3b8 !important; }
            .nav-link:hover { color: #5eead4 !important; background: rgba(94,234,212,0.1) !important; }
            .nav-link.active { color: #ffffff !important; background: linear-gradient(135deg,#14b8a6,#0d9488) !important; }

            .card { background-color: #1a2238 !important; border-color: #2d3748 !important; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.4) !important; }
            .card:hover { box-shadow: 0 10px 25px -3px rgba(0,0,0,0.5) !important; border-color: #14b8a6 !important; }
            .card h3 { color: #ffffff !important; }
            .card p { color: #cbd5e1 !important; }

            .card-btn.primary { background: linear-gradient(135deg,#14b8a6,#0d9488) !important; color: #ffffff !important; }
            .card-btn.primary:hover { background: linear-gradient(135deg,#0d9488,#115e59) !important; }
            .card-btn.secondary { background: #334155 !important; color: #cbd5e1 !important; }
            .card-btn.secondary:hover { background: #475569 !important; color: #f1f5f9 !important; }

            .page-hero h1 { color: #ffffff !important; }
            .page-hero p { color: rgba(255,255,255,0.95) !important; }

            .section-title h2 { background: linear-gradient(135deg,#14b8a6,#f59e0b) !important; -webkit-background-clip: text !important; -webkit-text-fill-color: transparent !important; background-clip: text !important; }
            .section-title p { color: #cbd5e1 !important; }

            .detail-section { background-color: #1a2238 !important; border-color: #334155 !important; color: #f1f5f9 !important; }
            .detail-section h2 { color: #14b8a6 !important; }
            .detail-section h3 { color: #f1f5f9 !important; }
            .detail-section h4 { color: #e2e8f0 !important; }
            .detail-section h5 { color: #cbd5e1 !important; }
            .detail-section p { color: #cbd5e1 !important; }

            .detail-section .info-box-blue { background: #1e3a5f !important; border-left-color: #3b82f6 !important; color: #bfdbfe !important; }
            .detail-section .info-box-blue h3 { color: #93c5fd !important; }
            .detail-section .info-box-blue p { color: #bfdbfe !important; }
            .detail-section .info-box-yellow { background: #451a03 !important; border-left-color: #f59e0b !important; color: #fef3c7 !important; }
            .detail-section .info-box-yellow h3 { color: #fbbf24 !important; }
            .detail-section .info-box-yellow p { color: #fef3c7 !important; }
            .detail-section .info-box-purple { background: #2e1065 !important; border-left-color: #8b5cf6 !important; color: #ddd6fe !important; }
            .detail-section .info-box-purple h3 { color: #c4b5fd !important; }
            .detail-section .info-box-purple p { color: #ddd6fe !important; }
            .detail-section .info-box-green { background: #064e3b !important; border-left-color: #10b981 !important; color: #a7f3d0 !important; }
            .detail-section .info-box-green h3 { color: #6ee7b7 !important; }
            .detail-section .info-box-green p { color: #a7f3d0 !important; }
            .detail-section .info-box-pink { background: #500724 !important; border-left-color: #db2777 !important; color: #fbcfe8 !important; }
            .detail-section .info-box-pink h5 { color: #f9a8d4 !important; }
            .detail-section .info-box-pink p { color: #fbcfe8 !important; }
            .detail-section .stat-box { background-color: #334155 !important; color: #f1f5f9 !important; }
            .detail-section .stat-box p { color: #cbd5e1 !important; }
            .detail-section .stat-box-primary { background: linear-gradient(135deg,#0d9488,#14b8a6) !important; color: #ffffff !important; }
            .detail-section .stat-box-accent { background: linear-gradient(135deg,#b91c1c,#ef4444) !important; color: #ffffff !important; }
            .detail-section .step-card { background-color: #243347 !important; border-color: #475569 !important; }
            .detail-section .step-card h4 { color: #f1f5f9 !important; }
            .detail-section .step-card p { color: #cbd5e1 !important; }
            .detail-section .warning-box { background: #451a03 !important; border-color: #f59e0b !important; color: #fef3c7 !important; }
            .detail-section .warning-box h5 { color: #fbbf24 !important; }
            .detail-section .warning-box p { color: #fef3c7 !important; }
            .detail-section .emergency-info { background: #1e293b !important; border-color: #334155 !important; color: #cbd5e1 !important; }
            .detail-section .emergency-info h5 { color: #5eead4 !important; }
            .detail-section .emergency-info p { color: #cbd5e1 !important; }
            .detail-section .emergency-info strong { color: #f1f5f9 !important; }

            .test-overlay { background: rgba(5,10,20,0.98) !important; }
            .test-header { border-bottom-color: #334155 !important; background: linear-gradient(135deg,#14b8a6,#0d9488) !important; }

            .question { background: #1e293b !important; color: #f1f5f9 !important; border-color: #475569 !important; }
            .progress-label { color: #94a3b8 !important; }
            .progress-bar { background: #334155 !important; }

            .choice { background: #1e293b !important; border-color: #475569 !important; color: #cbd5e1 !important; }
            .choice:hover:not(:disabled) { background: #0d9488 !important; color: #ffffff !important; border-color: #14b8a6 !important; }
            .choice.correct { background: #065f46 !important; border-color: #10b981 !important; color: #d1fae5 !important; }
            .choice.wrong { background: #7f1d1d !important; border-color: #ef4444 !important; color: #fecaca !important; }

            .feedback.correct { background: #064e3b !important; border-color: #10b981 !important; color: #a7f3d0 !important; }
            .feedback.wrong { background: #7f1d1d !important; border-color: #ef4444 !important; color: #fecaca !important; }

            .result-score { background: linear-gradient(135deg,#14b8a6,#f59e0b) !important; -webkit-background-clip: text !important; -webkit-text-fill-color: transparent !important; background-clip: text !important; }
            .result-message { color: #94a3b8 !important; }
            .detailed-results { background: #1e293b !important; border-color: #334155 !important; }
            .result-item { border-bottom-color: #334155 !important; }
            .result-question { color: #f1f5f9 !important; }
            .result-explanation { background: #334155 !important; color: #cbd5e1 !important; }
            .result-answer.correct { color: #10b981 !important; }
            .result-answer.wrong { color: #ef4444 !important; }

            .auto-continue-btn { background: linear-gradient(135deg,#14b8a6,#0d9488) !important; color: #ffffff !important; }
            .auto-continue-btn:hover { background: linear-gradient(135deg,#0d9488,#115e59) !important; }
            .countdown-text { color: #94a3b8 !important; }

            .small-close-btn { background: rgba(255,255,255,0.15) !important; color: #ffffff !important; }
            .small-close-btn:hover { background: rgba(255,255,255,0.25) !important; color: #f87171 !important; }

            .firstaid-modal-content { background-color: #1e293b !important; border-color: #334155 !important; }
            .firstaid-modal-header { background: linear-gradient(135deg,rgba(220,38,38,0.95),rgba(185,28,28,0.9)) !important; border-bottom-color: #334155 !important; }
            .firstaid-tabs { background: #0f172a !important; border-bottom-color: #334155 !important; }
            .firstaid-tab { background-color: #1e293b !important; color: #94a3b8 !important; }
            .firstaid-tab:hover { background-color: #334155 !important; color: #e2e8f0 !important; }
            .firstaid-tab.active { background-color: #1e293b !important; color: #ef4444 !important; border-bottom-color: #f87171 !important; }
            .firstaid-tab-content { color: #cbd5e1 !important; }
            .firstaid-tab-content h3 { color: #ef4444 !important; }
            .firstaid-step-card { background-color: #243347 !important; border-color: #475569 !important; }
            .firstaid-step-card:hover { background-color: #334155 !important; border-color: #f87171 !important; }
            .firstaid-step-card h4 { color: #f1f5f9 !important; }
            .firstaid-step-card p { color: #cbd5e1 !important; }
            .firstaid-warning { background: #451a03 !important; border-color: #f59e0b !important; color: #fef3c7 !important; }
            .firstaid-warning h5 { color: #fbbf24 !important; }
            .firstaid-tip { background: #164e63 !important; border-color: #0d9488 !important; }
            .firstaid-tip h5 { color: #22d3ee !important; }
            .firstaid-tip p { color: #cffafe !important; }
            .emergency-number { background: #1e293b !important; border: 1px solid #334155 !important; }
            .emergency-number:hover { background: #334155 !important; border-color: #14b8a6 !important; }
            .emergency-number .number { color: #ef4444 !important; }
            .emergency-number .service { color: #f1f5f9 !important; }
            .emergency-number p { color: #94a3b8 !important; }
            .number-list li { background: #1e293b !important; border: 1px solid #334155 !important; color: #cbd5e1 !important; }
            .number-list .service { color: #f1f5f9 !important; }
            .number-list .number { color: #ef4444 !important; }

            footer { background-color: #030712 !important; color: #94a3b8 !important; }
            .footer-column h4 { color: #ffffff !important; }
            .footer-links a { color: #94a3b8 !important; }
            .footer-links a:hover { color: #ffffff !important; }
            .footer-bottom { border-top-color: #1e293b !important; color: #64748b !important; }
            .footer-bottom p { color: #64748b !important; }

            .mobile-menu { background-color: #1e293b !important; }
            .mobile-menu-link { color: #cbd5e1 !important; }
            .mobile-menu-link:hover, .mobile-menu-link.active { background: #14b8a6 !important; color: #ffffff !important; }

            ::-webkit-scrollbar-track { background: #1e293b !important; }
            ::-webkit-scrollbar-thumb { background: #475569 !important; }
        }

        /* ==================== RESET ==================== */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
            /* iOS scroll bounce fix */
            -webkit-text-size-adjust: 100%;
            text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--gray-50);
            color: var(--gray-800);
            line-height: 1.5;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            transition: background-color var(--transition-smooth), color var(--transition-smooth);
            /* iOS tap highlight kaldır */
            -webkit-tap-highlight-color: transparent;
        }

        h1, h2, h3, h4, h5, h6 { font-weight: 700; line-height: 1.2; color: var(--gray-900); }
        /* Mobil için fluid font boyutları */
        h1 { font-size: clamp(1.75rem, 5vw, 3rem); letter-spacing: -0.025em; }
        h2 { font-size: clamp(1.5rem, 4vw, 2.25rem); letter-spacing: -0.025em; }
        h3 { font-size: clamp(1.2rem, 3vw, 1.5rem); }
        p { font-size: clamp(0.95rem, 2.5vw, 1.125rem); color: var(--gray-600); }

        /* ==================== CONTAINER ==================== */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            /* Safe area için dinamik padding */
            padding-left: max(1rem, calc(1rem + var(--safe-left)));
            padding-right: max(1rem, calc(1rem + var(--safe-right)));
        }

        /* ==================== HEADER ==================== */
        header {
            position: sticky;
            top: 0;
            z-index: 50;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--gray-200);
            /* Safe area için top padding */
            padding-top: max(0.75rem, calc(0.75rem + var(--safe-top)));
            padding-bottom: 0.75rem;
            transition: background-color var(--transition-smooth), border-color var(--transition-smooth);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            min-height: 3rem;
        }

        .logo { display: flex; align-items: center; gap: 0.625rem; text-decoration: none; flex-shrink: 0; }
        .logo-icon.compass {
            width: 2.25rem;
            height: 2.25rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1rem;
            font-weight: 600;
            flex-shrink: 0;
        }
        .logo-text { display: flex; flex-direction: column; }
        .logo-title { font-size: clamp(1.1rem, 3vw, 1.5rem); font-weight: 700; color: var(--gray-900); line-height: 1.2; }
        .logo-subtitle { font-size: 0.75rem; color: var(--gray-500); font-weight: 500; }

        /* Küçük ekranlarda subtitle gizle */
        @media (max-width: 360px) { .logo-subtitle { display: none; } }

        .nav-desktop { display: none; }
        @media (min-width: 768px) { .nav-desktop { display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap; } }
        @media (min-width: 1024px) { .nav-desktop { gap: 1rem; } }

        .nav-link {
            color: var(--gray-600);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.875rem;
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }
        .nav-link:hover { color: var(--primary); background: var(--gray-100); }
        .nav-link.active { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; }

        .nav-link.firstaid-button {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            gap: 0.4rem;
        }
        .nav-link.firstaid-button:hover {
            background: linear-gradient(135deg, var(--accent), #b91c1c);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* ==================== MOBİL MENÜ BUTONU ==================== */
        .mobile-menu-btn {
            display: flex;
            flex-direction: column;
            gap: 5px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.625rem;
            border-radius: var(--radius-md);
            min-height: 44px;
            min-width: 44px;
            align-items: center;
            justify-content: center;
            /* Dokunma geri bildirimi */
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        @media (min-width: 768px) { .mobile-menu-btn { display: none; } }
        .menu-line { width: 22px; height: 2px; background: var(--gray-600); transition: var(--transition-fast); border-radius: 1px; }

        /* Hamburger animasyonu */
        .mobile-menu-btn.active .menu-line:nth-child(1) { transform: translateY(7px) rotate(45deg); }
        .mobile-menu-btn.active .menu-line:nth-child(2) { opacity: 0; transform: scaleX(0); }
        .mobile-menu-btn.active .menu-line:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

        /* ==================== MOBİL MENÜ ==================== */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            /* Safe area dahil tam genişlik */
            width: min(320px, 85vw);
            height: 100%;
            height: 100dvh; /* Dynamic viewport height */
            background: white;
            z-index: 200;
            transition: right var(--transition-normal);
            /* Safe area padding */
            padding: max(1.5rem, calc(1.5rem + var(--safe-top))) 1.5rem max(1.5rem, calc(1.5rem + var(--safe-bottom)));
            box-shadow: var(--shadow-xl);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        .mobile-menu.active { right: 0; }
        .mobile-menu-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .mobile-menu-links { display: flex; flex-direction: column; gap: 0.375rem; }
        .mobile-menu-link {
            padding: 0.875rem 1rem;
            border-radius: var(--radius-md);
            color: var(--gray-700);
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: var(--transition-fast);
            min-height: 52px; /* Mobilde daha büyük dokunma hedefi */
            display: flex;
            align-items: center;
            gap: 0.5rem;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        .mobile-menu-link:hover, .mobile-menu-link.active { background: var(--primary); color: white; }
        .mobile-menu-link.firstaid-button {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            justify-content: center;
            margin-top: 1rem;
        }

        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 199;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-normal);
            -webkit-tap-highlight-color: transparent;
        }
        .menu-overlay.active { opacity: 1; visibility: visible; }

        /* ==================== PAGE HERO ==================== */
        .page-hero {
            /* Mobilde daha kompakt */
            padding: clamp(2.5rem, 8vw, 5rem) 1rem;
            background: linear-gradient(135deg, rgba(15,118,110,0.95) 0%, rgba(20,184,166,0.9) 50%, rgba(153,246,228,0.85) 100%);
            position: relative;
            overflow: hidden;
        }
        .page-hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.05) 0%, transparent 50%);
            pointer-events: none;
        }
        .page-hero-content { position: relative; z-index: 1; text-align: center; max-width: 800px; margin: 0 auto; }
        .page-hero h1 {
            color: white;
            margin-bottom: 1rem;
            font-size: clamp(2rem, 7vw, 4rem);
            line-height: 1.1;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .page-hero p {
            color: rgba(255,255,255,0.95);
            font-size: clamp(1rem, 3vw, 1.35rem);
            margin-bottom: clamp(1.5rem, 5vw, 3rem);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 0.5rem;
        }

        /* ==================== MAIN ==================== */
        main { padding: clamp(2rem, 6vw, 4rem) 0; background-color: var(--gray-50); }

        .section-title { text-align: center; margin-bottom: clamp(1.5rem, 5vw, 3rem); padding: 0 1rem; }
        .section-title h2 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, var(--primary), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ==================== EMERGENCY BANNER ==================== */
        .emergency-banner {
            background: linear-gradient(135deg, var(--accent), #b91c1c);
            color: white;
            padding: 1rem 1.25rem;
            border-radius: var(--radius-xl);
            margin: 1.25rem 0;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            flex-wrap: wrap; /* Küçük ekranda sarılabilir */
        }
        .emergency-banner-info { display: flex; align-items: center; gap: 0.75rem; flex: 1; min-width: 0; }
        .emergency-banner-icon { font-size: 1.25rem; flex-shrink: 0; }
        .emergency-banner-text { min-width: 0; }
        .emergency-banner-text strong { font-size: clamp(1rem, 3vw, 1.25rem); display: block; }
        .emergency-banner-text span { font-size: 0.85rem; opacity: 0.9; }
        .emergency-banner-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.625rem 1rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-height: 44px;
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        .emergency-banner-btn:hover { background: rgba(255,255,255,0.3); transform: translateY(-1px); }

        /* ==================== GRID ==================== */
        .grid { display: grid; gap: 1.25rem; }
        @media (min-width: 600px) { .grid-cols-3 { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 900px) { .grid-cols-3 { grid-template-columns: repeat(3, 1fr); } }
        @media (min-width: 768px) { .grid-cols-2 { grid-template-columns: repeat(2,1fr); } }

        /* ==================== CARDS ==================== */
        .card {
            background: white;
            border-radius: var(--radius-xl);
            padding: clamp(1.25rem, 4vw, 2rem);
            box-shadow: var(--shadow-lg);
            transition: var(--transition-normal);
            border: 1px solid var(--gray-200);
            height: 100%;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transform: translateZ(0);
            will-change: transform;
            backface-visibility: hidden;
            /* Mobilde touch geri bildirimi */
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        /* Masaüstünde hover efekti */
        @media (hover: hover) and (pointer: fine) {
            .card:hover { transform: translateY(-8px); box-shadow: var(--shadow-xl); border-color: var(--primary-light); }
        }
        /* Mobilde tap feedback */
        @media (hover: none) {
            .card:active { transform: scale(0.98); opacity: 0.9; }
        }

        .card-icon {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.25rem;
            font-size: 1.5rem;
            color: white;
            flex-shrink: 0;
        }
        .card[data-type="kasirga"] .card-icon { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); }
        .card[data-type="yildirim"] .card-icon { background: linear-gradient(135deg, var(--warning), #b45309); }
        .card[data-type="dolu"] .card-icon { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }

        .card h3 { font-size: clamp(1.15rem, 3.5vw, 1.5rem); margin-bottom: 0.75rem; color: var(--gray-900); }
        .card p { font-size: clamp(0.875rem, 2.5vw, 1rem); color: var(--gray-600); margin-bottom: 1.25rem; flex-grow: 1; line-height: 1.6; }

        .card-actions { display: flex; gap: 0.75rem; margin-top: auto; flex-wrap: wrap; }
        .card-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            text-decoration: none;
            font-weight: 600;
            font-size: clamp(0.8rem, 2.5vw, 0.95rem);
            transition: var(--transition-fast);
            border: none;
            cursor: pointer;
            flex: 1;
            min-height: 48px; /* Mobil için daha büyük */
            min-width: 44px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        .card-btn.primary { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; }
        .card-btn.secondary { background: var(--gray-200); color: var(--gray-700); }
        @media (hover: hover) and (pointer: fine) {
            .card-btn.primary:hover { background: linear-gradient(135deg, var(--primary-dark), #115e59); transform: translateY(-2px); }
            .card-btn.secondary:hover { background: var(--gray-300); transform: translateY(-2px); }
        }
        @media (hover: none) {
            .card-btn:active { opacity: 0.8; transform: scale(0.97); }
        }

        /* ==================== DETAIL SECTION ==================== */
        .detail-section {
            background: white;
            border-radius: var(--radius-xl);
            padding: clamp(1.25rem, 5vw, 3rem);
            box-shadow: var(--shadow-lg);
            margin-top: 2rem;
            border: 1px solid var(--gray-200);
            transition: background-color var(--transition-smooth), border-color var(--transition-smooth);
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow-x: hidden; /* Taşmayı engelle */
        }

        .detail-section h2 { font-size: clamp(1.35rem, 4vw, 2rem); margin-bottom: 1.25rem; color: var(--primary); }

        .info-box-blue { background: linear-gradient(135deg,#dbeafe,#e0e7ff); padding: clamp(1.25rem, 4vw, 2rem); border-radius: var(--radius-lg); margin-bottom: 1.5rem; border-left: 4px solid #4f46e5; }
        .info-box-blue h3 { color: #4f46e5; margin-bottom: 0.75rem; }
        .info-box-blue p { color: #1e40af; }

        .info-box-yellow { background: linear-gradient(135deg,#fef3c7,#fef9c3); padding: clamp(1.25rem, 4vw, 2rem); border-radius: var(--radius-lg); margin-bottom: 1.5rem; border-left: 4px solid var(--warning); }
        .info-box-yellow h3 { color: var(--warning); margin-bottom: 0.75rem; }

        .info-box-purple { background: linear-gradient(135deg,#ede9fe,#f5f3ff); padding: clamp(1.25rem, 4vw, 2rem); border-radius: var(--radius-lg); margin-bottom: 1.5rem; border-left: 4px solid #6366f1; }
        .info-box-purple h3 { color: #6366f1; margin-bottom: 0.75rem; }

        .info-box-green { background: linear-gradient(135deg,#dcfce7,#d1fae5); padding: 1.25rem; border-radius: var(--radius-lg); margin-top: 1.5rem; border-left: 4px solid var(--success); }
        .info-box-green h5 { color: var(--success); margin-bottom: 0.5rem; }

        .info-box-pink { background: linear-gradient(135deg,#fce7f3,#fbcfe8); padding: 1.25rem; border-radius: var(--radius-lg); margin-top: 1.5rem; border-left: 4px solid #db2777; }
        .info-box-pink h5 { color: #db2777; margin-bottom: 0.5rem; }

        .stat-box { background: var(--gray-100); padding: 1rem; border-radius: var(--radius-md); text-align: center; }
        .stat-box p { font-size: 0.875rem; }

        .stat-box-primary { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; padding: 1.25rem; border-radius: var(--radius-lg); text-align: center; }
        .stat-box-primary p { font-size: 0.875rem; opacity: 0.9; color: white; }

        .stat-box-accent { background: linear-gradient(135deg, var(--accent-light), var(--accent)); color: white; padding: 1.25rem; border-radius: var(--radius-lg); text-align: center; }
        .stat-box-accent p { font-size: 0.875rem; opacity: 0.9; color: white; }

        .step-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: clamp(1rem, 3vw, 1.5rem);
            margin-bottom: 1.25rem;
            transition: var(--transition-fast);
        }
        @media (hover: hover) and (pointer: fine) {
            .step-card:hover { transform: translateX(4px); border-color: var(--primary-light); box-shadow: var(--shadow-md); }
        }
        .step-card h4 { color: var(--gray-900); margin-bottom: 0.625rem; display: flex; align-items: center; gap: 0.5rem; font-size: clamp(1rem, 3vw, 1.25rem); }
        .step-card p { font-size: clamp(0.875rem, 2.5vw, 1rem); color: var(--gray-600); line-height: 1.6; margin-bottom: 0; }

        .warning-box { background: #fef3c7; border-left: 4px solid var(--warning); padding: 1.125rem; border-radius: var(--radius-md); margin: 1.25rem 0; }
        .warning-box h5 { color: var(--warning); margin-bottom: 0.375rem; display: flex; align-items: center; gap: 0.375rem; }

        .emergency-info { background: var(--gray-100); padding: 1.25rem; border-radius: var(--radius-lg); margin-top: 1.5rem; border: 1px solid var(--gray-200); }
        .emergency-info h5 { color: var(--primary-dark); margin-bottom: 0.5rem; }

        /* Grid - Mobil uyumlu */
        .info-grid-4 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin: 1rem 0; }
        @media (min-width: 600px) { .info-grid-4 { grid-template-columns: repeat(4, 1fr); } }

        .info-grid-2 { display: grid; grid-template-columns: 1fr; gap: 1rem; margin-top: 1.5rem; }
        @media (min-width: 480px) { .info-grid-2 { grid-template-columns: repeat(2, 1fr); } }

        .info-h3 { margin-top: 1.25rem; color: var(--primary); font-size: clamp(1.1rem, 3vw, 1.5rem); }

        /* ==================== TEST OVERLAY ==================== */
        .test-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15,23,42,0.97);
            z-index: 1000;
            display: none;
            flex-direction: column;
            /* Safe area padding */
            padding: max(0.75rem, calc(0.75rem + var(--safe-top))) max(0.75rem, calc(0.75rem + var(--safe-right))) max(0.75rem, calc(0.75rem + var(--safe-bottom))) max(0.75rem, calc(0.75rem + var(--safe-left)));
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain; /* Scroll geçişini engelle */
        }
        .test-overlay.active { display: flex; }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.875rem;
            padding: 1rem 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: var(--radius-lg);
            gap: 0.75rem;
            flex-shrink: 0;
        }
        .test-header h2 {
            color: white !important;
            font-size: clamp(1rem, 3.5vw, 1.5rem);
            flex: 1;
            min-width: 0;
            /* Uzun başlıklar için */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .test-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        .small-close-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 44px;
            min-width: 44px;
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        .small-close-btn:hover { background: rgba(255,255,255,0.3); color: var(--accent-light); }

        /* ==================== PROGRESS BAR ==================== */
        .progress-container { margin-bottom: 1.25rem; }
        .progress-label { display: flex; justify-content: space-between; margin-bottom: 0.375rem; color: var(--gray-600); font-weight: 500; font-size: 0.875rem; }
        .progress-bar { width: 100%; height: 6px; background: var(--gray-200); border-radius: 1rem; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--warning)); border-radius: 1rem; transition: width 0.4s ease; }

        /* ==================== QUESTION & CHOICES ==================== */
        .question {
            font-size: clamp(1rem, 3.5vw, 1.4rem);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 1.25rem;
            line-height: 1.5;
            padding: 1.125rem;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            border: 2px solid var(--gray-200);
        }

        .choices { display: grid; gap: 0.75rem; margin-bottom: 1.25rem; }
        .choice {
            padding: 1rem 1.125rem;
            background: white;
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-lg);
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            text-align: left;
            cursor: pointer;
            transition: var(--transition-fast);
            color: var(--gray-700);
            min-height: 52px; /* Mobil için yeterli dokunma hedefi */
            display: flex;
            align-items: center;
            line-height: 1.4;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            /* Uzun metinleri kır */
            word-break: break-word;
            overflow-wrap: break-word;
        }
        @media (hover: hover) and (pointer: fine) {
            .choice:hover:not(:disabled) { border-color: var(--primary); transform: translateX(8px); background: var(--primary-light); color: white; }
        }
        @media (hover: none) {
            .choice:not(:disabled):active { background: var(--primary-light); border-color: var(--primary); color: white; }
        }
        .choice.correct { background: #10b981; border-color: #059669; color: white; animation: pulseCorrect 0.5s ease; }
        .choice.wrong { background: #ef4444; border-color: #dc2626; color: white; animation: pulseWrong 0.5s ease; }
        .choice:disabled { cursor: not-allowed; opacity: 0.8; }

        @keyframes pulseCorrect { 0%,100% { transform: scale(1); } 50% { transform: scale(1.03); } }
        @keyframes pulseWrong { 0%,100% { transform: scale(1); } 50% { transform: scale(0.97); } }

        /* ==================== FEEDBACK ==================== */
        .feedback { padding: 1.125rem; border-radius: var(--radius-lg); margin-bottom: 1.25rem; animation: slideIn 0.3s ease; font-size: clamp(0.875rem, 2.5vw, 1rem); }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
        .feedback.correct { background: #d1fae5; border: 2px solid #10b981; color: #065f46; }
        .feedback.wrong { background: #fee2e2; border: 2px solid #ef4444; color: #7f1d1d; }

        /* ==================== AUTO CONTINUE ==================== */
        .auto-continue-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 0.875rem 1.5rem;
            border-radius: var(--radius-lg);
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-fast);
            width: 100%;
            margin-top: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: 52px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        @media (hover: hover) and (pointer: fine) {
            .auto-continue-btn:hover { background: linear-gradient(135deg, var(--primary-dark), #115e59); transform: translateY(-2px); }
        }
        .auto-continue-btn:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }
        .countdown-text { font-size: 0.8rem; color: var(--gray-500); text-align: center; margin-top: 0.375rem; }

        /* ==================== RESULT SCREEN ==================== */
        .result-screen { text-align: center; padding: 1.25rem 0.5rem; }
        .result-icon { font-size: 3.5rem; margin-bottom: 1rem; animation: bounce 1s ease infinite; }
        @keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        .result-score { font-size: clamp(2rem, 8vw, 3rem); font-weight: 700; margin: 1rem 0; background: linear-gradient(135deg, var(--primary), var(--warning)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .result-message { font-size: clamp(0.95rem, 3vw, 1.2rem); color: var(--gray-600); margin-bottom: 1.5rem; }
        .detailed-results { text-align: left; background: white; border-radius: var(--radius-xl); padding: clamp(1rem, 4vw, 2rem); margin: 1.5rem 0; box-shadow: var(--shadow-md); border: 1px solid var(--gray-200); }
        .result-item { padding: 1.125rem; border-bottom: 2px solid var(--gray-200); margin-bottom: 1.125rem; border-radius: var(--radius-md); }
        .result-item:last-child { border-bottom: none; margin-bottom: 0; }
        .result-item.correct { background: rgba(16,185,129,0.1); border-left: 4px solid #10b981; }
        .result-item.wrong { background: rgba(239,68,68,0.1); border-left: 4px solid #ef4444; }
        .result-question { font-weight: 600; margin-bottom: 0.625rem; color: var(--gray-900); font-size: clamp(0.875rem, 2.5vw, 1rem); }
        .result-answer { display: flex; align-items: flex-start; gap: 0.5rem; margin: 0.375rem 0; font-size: clamp(0.8rem, 2.5vw, 0.95rem); flex-wrap: wrap; }
        .result-answer.correct { color: #059669; }
        .result-answer.wrong { color: #dc2626; }
        .result-explanation { color: var(--gray-600); font-size: clamp(0.8rem, 2vw, 0.95rem); margin-top: 0.75rem; padding: 0.875rem; background: var(--gray-100); border-radius: var(--radius-md); }

        /* Sonuç ekranı butonları */
        .result-actions { display: flex; gap: 0.75rem; margin-top: 1.5rem; flex-wrap: wrap; }
        .result-actions .card-btn { min-width: 120px; }

        /* ==================== FOOTER ==================== */
        footer {
            background: var(--gray-900);
            color: var(--gray-300);
            padding: clamp(2rem, 6vw, 4rem) 0 0;
            margin-top: clamp(2rem, 6vw, 4rem);
            /* Safe area için alt padding */
            padding-bottom: max(1.5rem, calc(1.5rem + var(--safe-bottom)));
            transition: background-color var(--transition-smooth);
        }
        .footer-content { max-width: 1200px; margin: 0 auto; }
        .footer-grid { display: grid; gap: 2rem; margin-bottom: 2rem; }
        @media (min-width: 600px) { .footer-grid { grid-template-columns: repeat(2,1fr); } }
        @media (min-width: 900px) { .footer-grid { grid-template-columns: repeat(3,1fr); } }
        .footer-column h4 { color: white; font-size: 1.05rem; margin-bottom: 1.25rem; display: flex; align-items: center; gap: 0.5rem; }
        .footer-links { list-style: none; }
        .footer-links li { margin-bottom: 0.375rem; }
        .footer-links a {
            color: var(--gray-400);
            text-decoration: none;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-height: 44px;
            font-size: 0.9rem;
            -webkit-tap-highlight-color: transparent;
        }
        .footer-links a:hover { color: white; transform: translateX(4px); }
        .footer-bottom { border-top: 1px solid var(--gray-800); padding-top: 1.5rem; text-align: center; color: var(--gray-500); font-size: 0.875rem; }

        /* Footer ilk yardım butonu */
        .footer-firstaid-btn {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            border: none;
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            margin-top: 1rem;
            width: 100%;
            min-height: 48px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* ==================== ANIMATIONS ==================== */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fadeInUp 0.5s ease-out forwards; opacity: 0; }
        .animate-delay-100 { animation-delay: 100ms; }
        .animate-delay-200 { animation-delay: 200ms; }
        .animate-delay-300 { animation-delay: 300ms; }

        /* ==================== İLK YARDIM MODAL ==================== */
        .firstaid-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15,23,42,0.95);
            z-index: 300;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-normal);
            /* Safe area dahil padding */
            padding: max(0.5rem, var(--safe-top)) max(0.5rem, var(--safe-right)) max(0.5rem, var(--safe-bottom)) max(0.5rem, var(--safe-left));
        }
        .firstaid-modal.active { opacity: 1; visibility: visible; }

        .firstaid-modal-content {
            background: white;
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 1000px;
            /* Dynamic viewport height - çentikli ekranlarda düzgün çalışır */
            height: 100%;
            max-height: 100dvh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            transform: translateZ(0);
        }

        .firstaid-modal-header {
            padding: 0.875rem 1.125rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--accent), #b91c1c);
            color: white;
            flex-shrink: 0;
            gap: 0.75rem;
        }
        .firstaid-modal-header h3 {
            color: white;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: clamp(1rem, 3.5vw, 1.35rem);
            flex: 1;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .close-modal-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            min-width: 44px;
            min-height: 44px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.375rem;
            cursor: pointer;
            transition: var(--transition-fast);
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        .close-modal-btn:hover { background: rgba(255,255,255,0.3); transform: rotate(90deg); }

        .firstaid-modal-body {
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }

        .firstaid-tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
            flex-shrink: 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            /* Scroll göstergesi kaldır */
            scrollbar-width: none;
            -ms-overflow-style: none;
            /* Dokunma scroll */
            touch-action: pan-x;
            overscroll-behavior-x: contain;
        }
        .firstaid-tabs::-webkit-scrollbar { display: none; }

        .firstaid-tab {
            flex: 0 0 auto;
            /* Mobilde daha iyi boyut */
            padding: 0.875rem 1rem;
            border: none;
            background: none;
            font-family: inherit;
            font-weight: 600;
            color: var(--gray-600);
            cursor: pointer;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            font-size: clamp(0.8rem, 2.5vw, 0.95rem);
            position: relative;
            white-space: nowrap;
            min-height: 52px;
            min-width: 80px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        .firstaid-tab:hover { background: var(--gray-100); }
        .firstaid-tab.active { color: var(--accent); border-bottom: 3px solid var(--accent); background: white; }

        .firstaid-tab-content {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: clamp(1rem, 4vw, 1.5rem);
            display: none;
            animation: fadeInUp 0.3s ease-out;
            overscroll-behavior: contain;
        }
        .firstaid-tab-content.active { display: block; }

        .firstaid-step-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: clamp(1rem, 3vw, 1.5rem);
            margin-bottom: 1.125rem;
            transition: var(--transition-fast);
        }
        @media (hover: hover) and (pointer: fine) {
            .firstaid-step-card:hover { transform: translateX(4px); border-color: var(--accent-light); box-shadow: var(--shadow-md); }
        }
        .firstaid-step-card h4 { color: var(--gray-900); margin-bottom: 0.625rem; display: flex; align-items: center; gap: 0.5rem; font-size: clamp(1rem, 3vw, 1.2rem); }
        .firstaid-step-card p { font-size: clamp(0.875rem, 2.5vw, 1rem); color: var(--gray-600); line-height: 1.6; margin-bottom: 0; }

        .firstaid-warning { background: #fef3c7; border-left: 4px solid var(--warning); padding: 1.125rem; border-radius: var(--radius-md); margin: 1.25rem 0; }
        .firstaid-warning h5 { color: var(--warning); margin-bottom: 0.375rem; display: flex; align-items: center; gap: 0.375rem; font-size: 0.95rem; }

        .firstaid-tips { display: grid; grid-template-columns: 1fr; gap: 1rem; margin-top: 1.5rem; }
        @media (min-width: 480px) { .firstaid-tips { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 700px) { .firstaid-tips { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); } }

        .firstaid-tip { background: linear-gradient(135deg, var(--primary-soft), white); border-radius: var(--radius-lg); padding: 1.125rem; border: 1px solid var(--primary-light); }
        .firstaid-tip h5 { color: var(--primary-dark); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.375rem; }

        .emergency-numbers { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.875rem; margin-top: 1.5rem; }
        @media (min-width: 480px) { .emergency-numbers { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); } }

        .emergency-number {
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            padding: 1rem;
            text-align: center;
            transition: var(--transition-fast);
            /* Dokunulabilir */
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        @media (hover: hover) and (pointer: fine) {
            .emergency-number:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
        }
        @media (hover: none) {
            .emergency-number:active { transform: scale(0.97); }
        }
        .emergency-number .number { font-size: clamp(1.375rem, 5vw, 1.75rem); font-weight: 700; color: var(--accent); margin-bottom: 0.25rem; }
        .emergency-number .service { font-weight: 600; color: var(--gray-800); font-size: 0.85rem; }
        .emergency-number p { font-size: 0.8rem; margin-top: 0.25rem; }

        .number-list { list-style: none; padding-left: 0; }
        .number-list li { margin-bottom: 0.625rem; padding: 0.75rem; background: var(--gray-50); border-radius: var(--radius-md); display: flex; align-items: center; gap: 0.875rem; border: 1px solid var(--gray-200); }
        .number-list .number { font-weight: 700; font-size: clamp(1rem, 4vw, 1.25rem); color: var(--accent); min-width: 80px; }
        .number-list .service { flex: 1; font-weight: 600; color: var(--gray-800); font-size: clamp(0.85rem, 2.5vw, 1rem); }

        .icon-red { color: var(--accent); }
        .icon-blue { color: var(--primary); }
        .icon-green { color: var(--success); }
        .icon-orange { color: var(--warning); }
        .icon-purple { color: #7c3aed; }

        :focus-visible { outline: 3px solid var(--primary); outline-offset: 2px; }

        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--gray-100); }
        ::-webkit-scrollbar-thumb { background: var(--gray-300); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--gray-400); }

        /* ==================== TOUCH FEEDBACK ==================== */
        /* Genel dokunulabilir elementler için */
        button, a, [role="button"] {
            -webkit-tap-highlight-color: transparent;
        }

        /* ==================== BODY SCROLL LOCK ==================== */
        body.scroll-locked {
            overflow: hidden;
            position: fixed;
            width: 100%;
            /* Scroll pozisyonu JS'te yönetilir */
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo" aria-label="Afet Hazırlık Ana Sayfa">
                    <div class="logo-icon compass" aria-hidden="true">🧭</div>
                    <div class="logo-text">
                        <div class="logo-title">Afet Hazırlık</div>
                        <div class="logo-subtitle">Güvende Kal</div>
                    </div>
                </a>

                <nav class="nav-desktop" aria-label="Ana Navigasyon">
                    <a href="index.html" class="nav-link">🏠 Ana Sayfa</a>
                    <a href="yer.html" class="nav-link">🏔️ Yer</a>
                    <a href="su.html" class="nav-link">🌊 Su</a>
                    <a href="hava.html" class="nav-link active" aria-current="page">🌪️ Hava</a>
                    <a href="İnsan.html" class="nav-link">🔥 İnsan</a>
                    <a href="hakkinda.html" class="nav-link">ℹ️</a>
                    <a href="#" class="nav-link firstaid-button" id="firstAidButton" aria-label="İlk Yardım Rehberini Aç">
                        <span aria-hidden="true">🆘</span> İlk Yardım
                    </a>
                </nav>

                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menüyü Aç" aria-expanded="false" aria-controls="mobileMenu">
                    <span class="menu-line"></span>
                    <span class="menu-line"></span>
                    <span class="menu-line"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu Overlay -->
    <div class="menu-overlay" id="menuOverlay" aria-hidden="true"></div>

    <!-- Mobile Menu -->
    <nav class="mobile-menu" id="mobileMenu" aria-label="Mobil Navigasyon" aria-hidden="true">
        <div class="mobile-menu-header">
            <div class="logo">
                <div class="logo-icon compass" aria-hidden="true">🧭</div>
                <div class="logo-text"><div class="logo-title">Afet Hazırlık</div></div>
            </div>
            <button id="closeMenuBtn" style="background:none;border:none;font-size:1.75rem;color:var(--gray-600);cursor:pointer;min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center;-webkit-tap-highlight-color:transparent;" aria-label="Menüyü Kapat">×</button>
        </div>
        <div class="mobile-menu-links">
            <a href="index.html" class="mobile-menu-link">🏠 Ana Sayfa</a>
            <a href="yer.html" class="mobile-menu-link">🏔️ Yer Afetleri</a>
            <a href="su.html" class="mobile-menu-link">🌊 Su Afetleri</a>
            <a href="hava.html" class="mobile-menu-link active" aria-current="page">🌪️ Hava Afetleri</a>
            <a href="İnsan.html" class="mobile-menu-link">🔥 İnsan Kaynaklı</a>
            <a href="hakkinda.html" class="mobile-menu-link">ℹ️ Hakkında</a>
            <a href="#" class="mobile-menu-link firstaid-button" id="mobileFirstAidButton">
                <span aria-hidden="true">🆘</span> İlk Yardım Rehberi
            </a>
        </div>
    </nav>

    <!-- İLK YARDIM MODAL -->
    <div class="firstaid-modal" id="firstAidModal" role="dialog" aria-modal="true" aria-labelledby="firstAidModalTitle">
        <div class="firstaid-modal-content">
            <div class="firstaid-modal-header">
                <h3 id="firstAidModalTitle"><span aria-hidden="true">🆘</span> Acil İlk Yardım Rehberi</h3>
                <button class="close-modal-btn" id="closeFirstAidModal" aria-label="Kapat">×</button>
            </div>
            <div class="firstaid-modal-body">
                <div class="firstaid-tabs" role="tablist" aria-label="İlk Yardım Kategorileri">
                    <button class="firstaid-tab active" data-tab="basic" role="tab" aria-selected="true" aria-controls="basic-tab">🧠 Temel</button>
                    <button class="firstaid-tab" data-tab="bleeding" role="tab" aria-selected="false" aria-controls="bleeding-tab">🩸 Kanama</button>
                    <button class="firstaid-tab" data-tab="unconscious" role="tab" aria-selected="false" aria-controls="unconscious-tab">😴 Bayılma</button>
                    <button class="firstaid-tab" data-tab="burn" role="tab" aria-selected="false" aria-controls="burn-tab">🔥 Yanık</button>
                    <button class="firstaid-tab" data-tab="fracture" role="tab" aria-selected="false" aria-controls="fracture-tab">🦴 Kırık</button>
                    <button class="firstaid-tab" data-tab="numbers" role="tab" aria-selected="false" aria-controls="numbers-tab">📞 Numaralar</button>
                </div>

                <div class="firstaid-tab-content active" id="basic-tab" role="tabpanel">
                    <h3 style="margin-bottom:1.25rem;">İlk Yardımın Temel Kuralları</h3>
                    <div class="firstaid-step-card"><h4><span class="icon-red" aria-hidden="true">1️⃣</span> Sakin Olun ve Güvenliği Sağlayın</h4><p>Önce kendi güvenliğinizi kontrol edin, sonra çevreyi değerlendirin. Elektrik, gaz, yangın gibi riskleri kontrol edin.</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-blue" aria-hidden="true">2️⃣</span> 112'yi Arayın</h4><p>Hemen 112 Acil'i arayın. Sakin şekilde: olayın ne olduğunu, tam adresinizi, yaralı sayısı ve durumunu, isim ve telefon numaranızı bildirin.</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-green" aria-hidden="true">3️⃣</span> Yaralıyı Değerlendirin</h4><p>• Bilinç kontrolü yapın<br>• Solunumunu kontrol edin<br>• Nabzını kontrol edin<br>• Ciddi kanama olup olmadığını kontrol edin</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-orange" aria-hidden="true">4️⃣</span> Temel Yaşam Desteği (ABC)</h4><p><strong>A (Airway):</strong> Havayolunu açık tutun<br><strong>B (Breathing):</strong> Solunumu sağlayın<br><strong>C (Circulation):</strong> Dolaşımı destekleyin</p></div>
                    <div class="firstaid-warning"><h5><span aria-hidden="true">⚠️</span> ÖNEMLİ UYARI</h5><p>• Bilinçsiz yaralıları hareket ettirmeyin (boyun yaralanması riski)<br>• Bilinçsiz yaralılara su veya yiyecek vermeyin<br>• Yaralıyı sıcak tutun ama terletmeyin</p></div>
                </div>

                <div class="firstaid-tab-content" id="bleeding-tab" role="tabpanel">
                    <h3 style="margin-bottom:1.25rem;">Kanamalarda İlk Yardım</h3>
                    <div class="firstaid-step-card"><h4><span class="icon-red">🩸</span> İç Kanama Belirtileri</h4><p>• Soluk, soğuk, nemli cilt<br>• Hızlı ve zayıf nabız<br>• Baş dönmesi, baygınlık hissi</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-blue">🎯</span> Kanamayı Durdurma</h4><p><strong>1. Basınç:</strong> Temiz bezle direkt basınç uygulayın<br><strong>2. Yüksekte Tutma:</strong> Kanayan bölgeyi kalp seviyesinin üzerine kaldırın<br><strong>3. Basınç Noktaları:</strong> Atardamar kanamalarında basınç noktalarına basın</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-green">⚠️</span> Turnike (Sadece Hayati Risk!)</h4><p>• 5-7 cm genişliğinde bez kullanın<br>• Uygulama saatini not edin<br>• 15-20 dakikada bir 5-10 saniye gevşetin</p></div>
                    <div class="firstaid-warning"><h5><span>❌</span> YAPILMAMASI GEREKENLER</h5><p>• Tentürdiyot, alkol dökmeyin<br>• Yaraya pamuk basmayın<br>• Batmış cisimleri çıkarmaya çalışmayın</p></div>
                </div>

                <div class="firstaid-tab-content" id="unconscious-tab" role="tabpanel">
                    <h3 style="margin-bottom:1.25rem;">Bilinç Kaybı ve Bayılmada İlk Yardım</h3>
                    <div class="firstaid-step-card"><h4><span class="icon-red">😴</span> Bilinç Kontrolü</h4><p>1. Omuzlarından sarsarak "İyi misiniz?" diye sorun<br>2. Yanıt yoksa acil servisi arayın<br>3. Solunumunu kontrol edin</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-blue">🔄</span> Koma Pozisyonu</h4><p>1. Sırt üstü yatırın<br>2. Yakın taraftaki kolu baş hizasında uzatın<br>3. Diğer elini yanağının altına koyun<br>4. Uzaktaki bacağını dizden bükün<br>5. Omuzdan çevirerek yan yatırın<br>6. Başını geriye yatırıp çeneyi kaldırın</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-green">💓</span> Kalp Masajı</h4><p><strong>Yetişkinler:</strong> 30 bası - 2 solunum, dakikada 100-120 bası, göğüs 5-6 cm çökmeli</p></div>
                    <div class="firstaid-tips">
                        <div class="firstaid-tip"><h5><span>🌬️</span> Suni Solunum</h5><p>Başı geriye yatır, burnu kapat, ağızdan 1 saniye üfle.</p></div>
                        <div class="firstaid-tip"><h5><span>👶</span> Bebeklerde</h5><p>2 parmakla bası, 30 masaj - 2 solunum, göğüs 4 cm çökmeli.</p></div>
                        <div class="firstaid-tip"><h5><span>🧒</span> Çocuklarda</h5><p>1 el, 30 masaj - 2 solunum, göğüs 5 cm çökmeli.</p></div>
                    </div>
                </div>

                <div class="firstaid-tab-content" id="burn-tab" role="tabpanel">
                    <h3 style="margin-bottom:1.25rem;">Yanıklarda İlk Yardım</h3>
                    <div class="firstaid-step-card"><h4><span class="icon-red">🔥</span> 1. Derece Yanık</h4><p><strong>Belirtiler:</strong> Kızarıklık, hafif şişlik<br><strong>Yapılacaklar:</strong> 15-20 dk soğuk su, yanık kremi, steril bez.</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-blue">🔥</span> 2. Derece Yanık</h4><p><strong>Belirtiler:</strong> Kabarcıklar, şiddetli ağrı<br><strong>Yapılacaklar:</strong> Soğuk su, kabarcıkları patlatma, acil servis.</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-green">🔥</span> 3. Derece Yanık</h4><p><strong>Belirtiler:</strong> Deri beyaz/kömürleşmiş, ağrı yok<br><strong>Yapılacaklar:</strong> Hemen 112, temiz bez, kesinlikle su uygulamayın.</p></div>
                    <div class="firstaid-warning"><h5><span>❌</span> YANIKLARDA ASLA!</h5><p>• Diş macunu, yoğurt, salça sürmeyin<br>• Buz uygulamayın<br>• Kabarcıkları patlatmayın</p></div>
                </div>

                <div class="firstaid-tab-content" id="fracture-tab" role="tabpanel">
                    <h3 style="margin-bottom:1.25rem;">Kırık, Çıkık ve Burkulmalarda İlk Yardım</h3>
                    <div class="firstaid-step-card"><h4><span class="icon-red">🦴</span> Kırık Belirtileri</h4><p>• Şiddetli ağrı, şişlik, morarma<br>• Şekil bozukluğu, hareket edememe<br>• Kemik sesi duyulması</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-blue">🩹</span> Kapalı Kırık</h4><p>1. Hareket ettirmeyin<br>2. Üstündeki ve altındaki eklemleri sabitleyin<br>3. Soğuk uygulayın<br>4. Acil servise başvurun</p></div>
                    <div class="firstaid-step-card"><h4><span class="icon-green">⚠️</span> Açık Kırık</h4><p>1. Kanamayı kontrol altına alın<br>2. Kemik uçlarını içeri itmeyin<br>3. Temiz bezle örtün<br>4. Hemen 112'yi arayın</p></div>
                </div>

                <div class="firstaid-tab-content" id="numbers-tab" role="tabpanel">
                    <h3 style="margin-bottom:1.25rem;">Acil Durum Telefon Numaraları</h3>
                    <div class="emergency-numbers">
                        <div class="emergency-number" onclick="window.location.href='tel:112'" role="button" aria-label="112 Acil Yardımı Ara"><div class="number">112</div><div class="service">ACİL YARDIM</div><p>Tüm acil durumlar</p></div>
                        <div class="emergency-number" onclick="window.location.href='tel:110'" role="button" aria-label="110 İtfaiyeyi Ara"><div class="number">110</div><div class="service">İTFAİYE</div><p>Yangın, kurtarma</p></div>
                        <div class="emergency-number" onclick="window.location.href='tel:155'" role="button" aria-label="155 Polis İmdadı Ara"><div class="number">155</div><div class="service">POLİS İMDAT</div><p>Güvenlik, asayiş</p></div>
                        <div class="emergency-number" onclick="window.location.href='tel:156'" role="button" aria-label="156 Jandarmayı Ara"><div class="number">156</div><div class="service">JANDARMA</div><p>Kırsal bölgeler</p></div>
                    </div>
                    <div style="margin-top:2rem;">
                        <h4 style="color:var(--primary);margin-bottom:1rem;">📞 Diğer Önemli Numaralar</h4>
                        <ul class="number-list">
                            <li><span class="number">184</span><span class="service">SABİM - Sağlık Bakanlığı</span></li>
                            <li><span class="number">186</span><span class="service">ELEKTRİK ARIZA</span></li>
                            <li><span class="number">187</span><span class="service">DOĞAL GAZ ARIZA</span></li>
                            <li><span class="number">153</span><span class="service">BELEDİYE ZABITA</span></li>
                        </ul>
                    </div>
                    <div class="firstaid-warning" style="margin-top:1.5rem;">
                        <h5><span>📱</span> ACİL ARAMA YAPARKEN</h5>
                        <p>1. Sakin olun ve net konuşun<br>2. Tam adresinizi söyleyin<br>3. Olayın ne olduğunu açıklayın<br>4. Yaralı sayısı ve durumunu bildirin<br>5. Telefonu ilk siz kapatmayın</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page Hero -->
    <section class="page-hero">
        <div class="container">
            <div class="page-hero-content">
                <h1 class="animate-fade-in-up">🌪️ Hava Afetleri</h1>
                <p class="animate-fade-in-up animate-delay-100">
                    Kasırga, yıldırım fırtınası ve şiddetli dolu için hazırlık rehberi ve testler
                </p>
            </div>
        </div>
    </section>

    <!-- Emergency Banner -->
    <div class="container">
        <div class="emergency-banner">
            <div class="emergency-banner-info">
                <div class="emergency-banner-icon" aria-hidden="true">🚨</div>
                <div class="emergency-banner-text">
                    <strong>ACİL DURUM: 112</strong>
                    <span>Tüm acil durumlar için tek numara</span>
                </div>
            </div>
            <button id="emergencyFirstAidButton" class="emergency-banner-btn" aria-label="İlk Yardım Rehberini Aç">
                <span aria-hidden="true">🆘</span> İlk Yardım
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <div class="container">
            <div class="section-title animate-fade-in-up">
                <h2>Hava Afeti Türleri</h2>
                <p class="animate-fade-in-up animate-delay-100">Bir afet türü seçerek bilgi alın veya testi başlatın</p>
            </div>

            <div class="grid grid-cols-3">
                <!-- Kasırga -->
                <div class="card animate-fade-in-up" data-type="kasirga" id="kasirga-card" tabindex="0" role="button" aria-label="Kasırga hakkında bilgi al veya test başlat">
                    <div class="card-icon" aria-hidden="true">🌪️</div>
                    <h3>Kasırga</h3>
                    <p>Şiddetli rüzgarlar, dönen hava kolonları ve yıkıcı etkiler. Bodrum katı güvenliği, pencere koruması.</p>
                    <div class="card-actions">
                        <button class="card-btn primary" onclick="startTest('kasirga')" aria-label="Kasırga testini başlat">▶️ Test Başlat</button>
                        <button class="card-btn secondary" onclick="showInfo('kasirga')" aria-label="Kasırga hakkında bilgi al">📚 Bilgi Al</button>
                    </div>
                </div>

                <!-- Yıldırım -->
                <div class="card animate-fade-in-up animate-delay-100" data-type="yildirim" id="yildirim-card" tabindex="0" role="button" aria-label="Yıldırım fırtınası hakkında bilgi al veya test başlat">
                    <div class="card-icon" aria-hidden="true">⚡</div>
                    <h3>Yıldırım Fırtınası</h3>
                    <p>Elektrik boşalmaları, gök gürültüsü ve korunma yöntemleri. Kapalı alan güvenliği, uzaklık hesaplama.</p>
                    <div class="card-actions">
                        <button class="card-btn primary" onclick="startTest('yildirim')" aria-label="Yıldırım testini başlat">▶️ Test Başlat</button>
                        <button class="card-btn secondary" onclick="showInfo('yildirim')" aria-label="Yıldırım hakkında bilgi al">📚 Bilgi Al</button>
                    </div>
                </div>

                <!-- Dolu -->
                <div class="card animate-fade-in-up animate-delay-200" data-type="dolu" id="dolu-card" tabindex="0" role="button" aria-label="Şiddetli dolu hakkında bilgi al veya test başlat">
                    <div class="card-icon" aria-hidden="true">🌨️</div>
                    <h3>Şiddetli Dolu</h3>
                    <p>Büyük buz parçalarının oluşumu, hasar riskleri ve korunma yolları. Araç koruması, barınak önlemleri.</p>
                    <div class="card-actions">
                        <button class="card-btn primary" onclick="startTest('dolu')" aria-label="Dolu testini başlat">▶️ Test Başlat</button>
                        <button class="card-btn secondary" onclick="showInfo('dolu')" aria-label="Dolu hakkında bilgi al">📚 Bilgi Al</button>
                    </div>
                </div>
            </div>

            <!-- Detail Section -->
            <div class="detail-section animate-fade-in-up" id="detailSection" style="display:none;">
                <h2 id="detailTitle">Afet Bilgisi</h2>
                <div class="info-content" id="detailContent"></div>
                <button class="card-btn primary" style="margin-top:1.5rem;max-width:200px;" onclick="hideInfo()">← Geri Dön</button>
            </div>
        </div>
    </main>

    <!-- Fullscreen Test Overlay -->
    <div class="test-overlay" id="testOverlay" role="dialog" aria-modal="true" aria-labelledby="testTitle">
        <div class="test-header">
            <h2 id="testTitle">Test</h2>
            <button class="small-close-btn" onclick="closeTest()" aria-label="Testi Kapat">✕</button>
        </div>
        <div class="test-content" id="testContent"></div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-grid">
                    <div class="footer-column">
                        <h4><span aria-hidden="true">🚨</span> Afet Hazırlık</h4>
                        <p style="color:var(--gray-400);margin-bottom:1rem;font-size:0.9rem;">Doğal afetlere hazırlık için rehber ve bilgi kaynağı.</p>
                        <button id="footerFirstAidButton" class="footer-firstaid-btn" aria-label="İlk Yardım Rehberini Aç">
                            <span aria-hidden="true">🆘</span> İlk Yardım Rehberi
                        </button>
                    </div>
                    <div class="footer-column">
                        <h4><span aria-hidden="true">🔗</span> Hızlı Bağlantılar</h4>
                        <ul class="footer-links">
                            <li><a href="index.html"><span aria-hidden="true">🏠</span> Ana Sayfa</a></li>
                            <li><a href="yer.html"><span aria-hidden="true">🏔️</span> Yer Afetleri</a></li>
                            <li><a href="su.html"><span aria-hidden="true">🌊</span> Su Afetleri</a></li>
                            <li><a href="hava.html"><span aria-hidden="true">🌪️</span> Hava Afetleri</a></li>
                            <li><a href="İnsan.html"><span aria-hidden="true">🔥</span> İnsan Kaynaklı</a></li>
                            <li><a href="hakkinda.html"><span aria-hidden="true">ℹ️</span> Hakkında</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h4><span aria-hidden="true">📞</span> Acil Kaynaklar</h4>
                        <ul class="footer-links">
                            <li><a href="https://www.afad.gov.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">🏛️</span> AFAD</a></li>
                            <li><a href="https://www.mgm.gov.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">🌤️</span> Meteoroloji</a></li>
                            <li><a href="https://www.112.gov.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">🚨</span> 112 Acil</a></li>
                            <li><a href="https://www.kizilay.org.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">❤️</span> Kızılay</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>© 2026 Afet Hazırlık Rehberi<br><small>Bilgilendirme amaçlıdır. Acil durumlarda 112'yi arayınız.</small></p>
                </div>
            </div>
        </div>
    </footer>

    <script>
    // ==================== SCROLL LOCK - iOS UYUMLU ====================
    let savedScrollY = 0;

    function lockScroll() {
        savedScrollY = window.scrollY;
        document.body.style.top = `-${savedScrollY}px`;
        document.body.classList.add('scroll-locked');
    }

    function unlockScroll() {
        document.body.classList.remove('scroll-locked');
        document.body.style.top = '';
        window.scrollTo(0, savedScrollY);
    }

    // ==================== ESC / KHOrt KISAYOL ====================
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            if (firstAidModal.classList.contains('active')) {
                closeFirstAidModalFunc();
            } else if (document.getElementById('testOverlay').classList.contains('active')) {
                closeTest();
            } else if (mobileMenu.classList.contains('active')) {
                toggleMobileMenu();
            }
        }
        if (e.ctrlKey && e.key === 'f') {
            e.preventDefault();
            openFirstAidModal();
        }
    });

    // ==================== MOBİL MENÜ ====================
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const closeMenuBtn  = document.getElementById('closeMenuBtn');
    const mobileMenu    = document.getElementById('mobileMenu');
    const menuOverlay   = document.getElementById('menuOverlay');

    function toggleMobileMenu() {
        const isOpen = mobileMenu.classList.toggle('active');
        menuOverlay.classList.toggle('active', isOpen);
        mobileMenuBtn.classList.toggle('active', isOpen);
        mobileMenuBtn.setAttribute('aria-expanded', isOpen);
        mobileMenu.setAttribute('aria-hidden', !isOpen);
        menuOverlay.setAttribute('aria-hidden', !isOpen);

        if (isOpen) {
            lockScroll();
            // Menüye odaklan - erişilebilirlik
            const firstLink = mobileMenu.querySelector('.mobile-menu-link');
            if (firstLink) setTimeout(() => firstLink.focus(), 300);
        } else {
            unlockScroll();
            mobileMenuBtn.focus();
        }
    }

    mobileMenuBtn.addEventListener('click', toggleMobileMenu);
    closeMenuBtn.addEventListener('click', toggleMobileMenu);
    menuOverlay.addEventListener('click', toggleMobileMenu);

    // Swipe ile menü kapatma
    let menuTouchStartX = 0;
    mobileMenu.addEventListener('touchstart', e => { menuTouchStartX = e.touches[0].clientX; }, { passive: true });
    mobileMenu.addEventListener('touchend', e => {
        const diff = e.changedTouches[0].clientX - menuTouchStartX;
        if (diff > 60) toggleMobileMenu(); // Sağa swipe → kapat
    }, { passive: true });

    // ==================== KART TIKLAMA ====================
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('click', function(e) {
            if (!e.target.closest('button')) {
                showInfo(this.getAttribute('data-type'));
            }
        });
        // Klavye erişilebilirliği
        card.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                showInfo(this.getAttribute('data-type'));
            }
        });
    });

    // ==================== ANİMASYONLAR ====================
    // prefers-reduced-motion kontrolü
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    if (!prefersReducedMotion && 'IntersectionObserver' in window) {
        const obs = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    e.target.style.opacity = '1';
                    e.target.style.transform = 'translateY(0)';
                    obs.unobserve(e.target);
                }
            });
        }, { rootMargin: '30px', threshold: 0.1 });

        document.querySelectorAll('.animate-fade-in-up').forEach(el => obs.observe(el));
    } else {
        // Reduced motion veya eski tarayıcılarda anında göster
        document.querySelectorAll('.animate-fade-in-up').forEach(el => {
            el.style.opacity = '1';
            el.style.transform = 'translateY(0)';
        });
    }

    // ==================== İLK YARDIM MODAL ====================
    const firstAidModal        = document.getElementById('firstAidModal');
    const firstAidButton       = document.getElementById('firstAidButton');
    const mobileFirstAidButton = document.getElementById('mobileFirstAidButton');
    const emergencyFirstAidBtn = document.getElementById('emergencyFirstAidButton');
    const footerFirstAidButton = document.getElementById('footerFirstAidButton');
    const closeFirstAidModalEl = document.getElementById('closeFirstAidModal');
    const firstAidTabs         = document.querySelectorAll('.firstaid-tab');
    const firstAidTabContents  = document.querySelectorAll('.firstaid-tab-content');

    function openFirstAidModal() {
        lockScroll();
        firstAidModal.classList.add('active');
        switchFirstAidTab('basic');
        // Odak yönetimi
        setTimeout(() => closeFirstAidModalEl.focus(), 300);
    }

    function closeFirstAidModalFunc() {
        firstAidModal.classList.remove('active');
        unlockScroll();
    }

    function switchFirstAidTab(tabName) {
        firstAidTabs.forEach(tab => {
            const isActive = tab.dataset.tab === tabName;
            tab.classList.toggle('active', isActive);
            tab.setAttribute('aria-selected', isActive);
        });
        firstAidTabContents.forEach(content => {
            const isActive = content.id === `${tabName}-tab`;
            content.classList.toggle('active', isActive);
            if (isActive) content.scrollTop = 0;
        });

        // Aktif tabı görünür yap
        const activeTab = document.querySelector(`.firstaid-tab[data-tab="${tabName}"]`);
        if (activeTab) activeTab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
    }

    firstAidButton.addEventListener('click', e => { e.preventDefault(); openFirstAidModal(); });
    mobileFirstAidButton.addEventListener('click', e => { e.preventDefault(); openFirstAidModal(); toggleMobileMenu(); });
    emergencyFirstAidBtn.addEventListener('click', openFirstAidModal);
    footerFirstAidButton.addEventListener('click', openFirstAidModal);
    closeFirstAidModalEl.addEventListener('click', closeFirstAidModalFunc);
    firstAidModal.addEventListener('click', e => { if (e.target === firstAidModal) closeFirstAidModalFunc(); });
    firstAidTabs.forEach(tab => tab.addEventListener('click', () => switchFirstAidTab(tab.dataset.tab)));

    // Modal içinde Tab tuşu ile focus trap
    firstAidModal.addEventListener('keydown', e => {
        if (e.key !== 'Tab') return;
        const focusable = firstAidModal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        const firstEl = focusable[0];
        const lastEl = focusable[focusable.length - 1];
        if (e.shiftKey) {
            if (document.activeElement === firstEl) { e.preventDefault(); lastEl.focus(); }
        } else {
            if (document.activeElement === lastEl) { e.preventDefault(); firstEl.focus(); }
        }
    });

    // ==================== BİLGİ İÇERİĞİ ====================
    const infoData = {
        kasirga: {
            title: "🌪️ Kasırga Hakkında Detaylı Bilgi",
            content: `
                <div class="info-box-blue">
                    <h3>📖 Kasırga Nedir?</h3>
                    <p><strong>Kasırga</strong>, Türkiye'de özellikle Karadeniz ve Ege kıyılarında görülen, konvektif fırtınalarla ilişkili dönen rüzgar sistemleridir. Saatte 100 km'yi aşan hızlara ulaşabilir ve Beaufort skalasında 12 kuvvetin üzerindedir.</p>
                </div>

                <h3 class="info-h3">📋 Temel Önlemler</h3>

                <div class="step-card">
                    <h4><span style="color:var(--warning)">🛡️</span> Öncesi Hazırlık</h4>
                    <p>• Bodrum katını temizleyin ve güvenli hale getirin<br>• Acil durum çantası hazırlayın (72 saatlik su, yiyecek, ilk yardım, el feneri, pil)<br>• Dışarıdaki eşyaları sabitleyin veya içeri alın<br>• Önemli belgelerin kopyalarını su geçirmez kaba koyun</p>
                </div>
                <div class="step-card">
                    <h4><span style="color:var(--accent)">⚡</span> Sırasında</h4>
                    <p>• En iç odalarda veya bodrumda, yerde kalın<br>• Pencerelerden en az 1.5 metre uzak durun<br>• Elektrikli aletleri fişten çekin; metal borulara dokunmayın<br>• Başınızı koruyun (yastık, kalın kitap, kask)</p>
                </div>
                <div class="step-card">
                    <h4><span style="color:var(--success)">✅</span> Sonrası</h4>
                    <p>• Yetkililer izin verene kadar dışarı çıkmayın ("göz" geçmesi olabilir)<br>• Kopmuş elektrik tellerine asla dokunmayın (en az 10 m uzak kalın)<br>• Hasarlı binalara girmeyin<br>• Gaz kokusu → vanayı kapatın, yetkilileri arayın</p>
                </div>

                <h3 class="info-h3">⚠️ Tehlikeler</h3>
                <div class="info-grid-4">
                    <div class="stat-box"><strong style="color:var(--accent)">💨 Şiddetli Rüzgar</strong><p>100+ km/s hız</p></div>
                    <div class="stat-box"><strong style="color:var(--warning)">🚀 Uçan Nesneler</strong><p>Cam, tahta, metal parçalar</p></div>
                    <div class="stat-box"><strong style="color:var(--primary)">🏚️ Yapısal Hasar</strong><p>Çatı uçması, duvar yıkılması</p></div>
                    <div class="stat-box"><strong style="color:#8b5cf6">🔌 Elektrik Kesintisi</strong><p>Günlerce sürebilir</p></div>
                </div>

                <div class="warning-box" style="margin-top:1.5rem;">
                    <h5><span>🚫</span> YAPILMAMASI GEREKENLER</h5>
                    <p>• Kasırga sırasında arabaya binmeyin<br>• Pencereleri açmayın — "basıncı eşitleme" efsanesi yanlıştır<br>• Asansör kullanmayın<br>• Nehir ya da sel yatağına yaklaşmayın</p>
                </div>

                <div class="emergency-info">
                    <h5>📞 Acil Numaralar</h5>
                    <p><strong>112</strong> Acil Yardım &nbsp;|&nbsp; <strong>186</strong> Elektrik Arıza &nbsp;|&nbsp; <strong>187</strong> Doğal Gaz</p>
                </div>
            `
        },
        yildirim: {
            title: "⚡ Yıldırım Fırtınası Hakkında Detaylı Bilgi",
            content: `
                <div class="info-box-yellow">
                    <h3>⚡ Yıldırım Fırtınası Nedir?</h3>
                    <p><strong>Yıldırım</strong>, bulut ile yer arasında gerçekleşen elektrik boşalmasıdır. Sıcaklığı 30.000°C'ye ulaşabilir ve her darbe yaklaşık 1-5 milyar volt enerji taşır. Türkiye'de yılda yaklaşık 3 milyon yıldırım düşmektedir.</p>
                </div>

                <h3 class="info-h3">⚠️ Risk Belirtileri</h3>
                <div class="info-grid-4">
                    <div class="stat-box"><strong style="color:var(--warning)">⚡ Şimşek</strong><p>Ani ışık patlamaları</p></div>
                    <div class="stat-box"><strong style="color:#8b5cf6">🌩️ Gök Gürültüsü</strong><p>Yakın ve şiddetli sesler</p></div>
                    <div class="stat-box"><strong style="color:var(--accent)">💨 Ani Rüzgar</strong><p>Hava basıncı değişikliği</p></div>
                    <div class="stat-box"><strong style="color:var(--primary)">☁️ Koyu Bulutlar</strong><p>Aniden kararan gökyüzü</p></div>
                </div>

                <div class="step-card" style="margin-top:1.5rem;">
                    <h4><span style="color:var(--warning)">📏</span> 30/30 Kuralı</h4>
                    <p><strong>Uzaklık hesaplama:</strong> Şimşek ile gök gürültüsü arasındaki her <strong>3 saniye = 1 km</strong>.<br>
                    <strong>30 saniyenin altı</strong> → hemen kapalı alana girin.<br>
                    <strong>Son şimşekten 30 dakika sonra</strong> → güvenli kabul edilir.</p>
                </div>

                <h3 class="info-h3">🛡️ Korunma Yöntemleri</h3>
                <div class="step-card">
                    <h4><span style="color:var(--success)">🏠</span> Kapalı Alanlarda</h4>
                    <p>• Pencere ve kapıları kapatın<br>• Kablolu telefon kullanmayın<br>• Banyo ve duş almayın<br>• TV/bilgisayar fişini çekin</p>
                </div>
                <div class="step-card">
                    <h4><span style="color:var(--accent)">🌳</span> Açık Alanlarda</h4>
                    <p>• En yakın kapalı alana sığının<br>• Ağaçlardan <strong>en az 30 metre</strong> uzak durun<br>• Yere yatmayın — zemin akımı tehlikeli<br>• Metal nesneleri (şemsiye) bırakın<br>• Ayakları bitişik çömelin</p>
                </div>
                <div class="step-card">
                    <h4><span style="color:#8b5cf6">🚗</span> Araç İçinde</h4>
                    <p>• Araç içinde kalın — metal gövde korur<br>• Metal kısımlara dokunmayın<br>• Camları kapatın, aracı park edin</p>
                </div>

                <div class="warning-box">
                    <h5><span>🚫</span> TEHLİKELİ DAVRANIŞLAR</h5>
                    <p>• Bisiklet, motosiklet kullanmayın<br>• Yüzmeyin, kayıkla gezmeyin<br>• Metal yapılara (çit, tel örgü) yaklaşmayın<br>• Grup halindeyseniz dağılın</p>
                </div>

                <div class="info-box-green">
                    <h5>🆘 Yıldırım Çarpması — İlk Yardım</h5>
                    <p><strong>1.</strong> Hemen 112'yi arayın<br>
                    <strong>2.</strong> Yaralıya dokunmak güvenlidir — artık elektrik yüklü değildir<br>
                    <strong>3.</strong> Solunum ve nabız kontrolü; gerekirse CPR<br>
                    <strong>4.</strong> Yanık bölgelere soğuk su (buz değil)</p>
                </div>

                <div class="info-grid-4" style="margin-top:1.5rem;">
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.375rem;">⚡</div><strong>1-5 Milyar</strong><p>Volt enerji</p></div>
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.375rem;">🔥</div><strong>30.000°C</strong><p>Sıcaklık</p></div>
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.375rem;">💀</div><strong>%10-30</strong><p>Ölüm oranı</p></div>
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.375rem;">⏱️</div><strong>0.2 saniye</strong><p>Çarpma süresi</p></div>
                </div>
            `
        },
        dolu: {
            title: "🌨️ Şiddetli Dolu Hakkında Detaylı Bilgi",
            content: `
                <div class="info-box-purple">
                    <h3>🌨️ Şiddetli Dolu Nedir?</h3>
                    <p><strong>Dolu</strong>, kümülonimbüs bulutlarındaki kuvvetli yukarı hava akımlarıyla havada asılı kalan su damlacıklarının katmanlı biçimde donarak büyüdüğü buz parçalarıdır. Türkiye'de özellikle Mayıs-Eylül arasında görülür.</p>
                </div>

                <h3 class="info-h3">📏 Dolu Boyutları ve Etkileri</h3>
                <div class="info-grid-4">
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.25rem;">🟢</div><strong style="color:var(--success)">Küçük</strong><p>0.5-1.5 cm — Bezelye</p></div>
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.25rem;">🟡</div><strong style="color:var(--warning)">Orta</strong><p>1.5-4.5 cm — Ceviz</p></div>
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.25rem;">🔴</div><strong style="color:var(--accent)">Büyük</strong><p>4.5+ cm — Tenis topu</p></div>
                    <div class="stat-box" style="text-align:center;"><div style="font-size:1.25rem;">⚫</div><strong>Dev</strong><p>15+ cm — Greyfurt</p></div>
                </div>

                <h3 class="info-h3">☁️ Korunma Yöntemleri</h3>
                <div class="step-card">
                    <h4><span style="color:var(--primary)">🏠</span> Ev İçi Önlemler</h4>
                    <p>• Çatı pencerelerini kapatın<br>• Balkon/teras eşyalarını içeri alın<br>• Sığınak olarak iç odaları kullanın<br>• Yağmur oluğu ve drenleri önceden temizleyin</p>
                </div>
                <div class="step-card">
                    <h4><span style="color:#8b5cf6">🚗</span> Araç Koruma</h4>
                    <p>• Araçları kapalı garaja alın<br>• Garaj yoksa kalın battaniye veya dolu brandası kullanın<br>• Dolu sırasında yoldaysa güvenli yere çekin, camlardan uzak durun</p>
                </div>
                <div class="step-card">
                    <h4><span style="color:var(--warning)">⚠️</span> Dışarıda Yakalanırsanız</h4>
                    <p>• Hemen kapalı alana sığının<br>• Ağaç altına girmeyin<br>• Başınızı kollarınızla kapatın, yere çöküp kapanın</p>
                </div>

                <div class="warning-box">
                    <h5><span>🚫</span> YAPILMAMASI GEREKENLER</h5>
                    <p>• Dolu tanelerini yemeyin<br>• Dolu yağarken dışarı çıkmayın<br>• Kopan elektrik tellerine yaklaşmayın<br>• Dolu suyunu içmeyin</p>
                </div>

                <div class="info-box-pink">
                    <h5>📊 Dolu İstatistikleri</h5>
                    <p><strong>En Büyük Dolu:</strong> 20 cm, Güney Dakota, ABD (2010)<br>
                    <strong>En Hızlı Dolu:</strong> 160 km/s hızla düşebilir<br>
                    <strong>Türkiye'de:</strong> Yılda ortalama 150.000 hasar kaydı</p>
                </div>

                <div class="info-grid-2">
                    <div class="stat-box-primary"><div style="font-size:1.75rem;">🌡️</div><strong>Oluşum Koşulu</strong><p>Bulut içinde -10°C altı sıcaklık gerekir.</p></div>
                    <div class="stat-box-accent"><div style="font-size:1.75rem;">⏱️</div><strong>Ortalama Süre</strong><p>5-10 dakika, nadir durumlarda 30+ dakika.</p></div>
                </div>
            `
        }
    };

    // ==================== TEST VERİLERİ ====================
    const testData = {
        kasirga: [
            { question: "Kasırga 'göz' bölgesi geçtiğinde hava aniden sakinleşir. Bu durumda ne yapmalısınız?", choices: ["Fırtınanın geçtiğini düşünerek hemen dışarı çıkın", "İçeride kalmaya devam edin; göz geçtikten sonra fırtına ikinci yarısıyla geri döner", "Üst katlara geçin, yere yakın olmak tehlikelidir", "Tüm pencereleri açarak basıncı dengeleyin"], correctAnswer: 1, explanation: "Kasırga gözü sakin bir bölgedir ama fırtınanın ikinci yarısı geliyor demektir. Dışarı çıkmak son derece tehlikelidir; içeride güvenli bir alanda beklemeye devam edilmelidir." },
            { question: "Kasırga sırasında 'pencereleri açarak basıncı dengeleme' önerisine göre hangisi doğrudur?", choices: ["Bu doğru bir yöntemdir, basıncı dengeler ve çatıyı korur", "Sadece rüzgar yönündeki pencereler açılmalıdır", "Bu yanlış bir efsanedir; pencereler açılırsa rüzgar ve uçan nesneler içeri girer", "Yalnızca bodrum katında uygulanabilir"], correctAnswer: 2, explanation: "Pencereleri açmak tehlikelidir. Rüzgar ve uçan nesnelerin içeri girmesine yol açar. Bu yaygın efsane tamamen yanlıştır." },
            { question: "Kasırgadan sonra hasarlı bir binayı değerlendirirken en önemli ilk adım nedir?", choices: ["İçeri girerek eşyaları toplamak", "Binayı dışarıdan inceleyerek yapısal çatlak ve temel kaymalarını kontrol etmek", "Elektriği yeniden bağlatmak", "Hemen temizliğe başlamak"], correctAnswer: 1, explanation: "Hasarlı binaya girmeden önce dışarıdan yapısal bütünlüğünü değerlendirmek gerekir. Çatlak veya çökme varsa bina güvensizdir ve uzmanlara bırakılmalıdır." },
            { question: "Kasırga uyarısı bölgenize ulaştığında hangi sırayla hareket etmelisiniz?", choices: ["Önce aracınızla şehri terk edin, sonra akrabalarınızı arayın", "Acil çantanızı alın, dışarıdaki eşyaları güvence altına alın, bodrum veya iç odaya geçin", "TV izlemeye devam edin, uyarı abartılı olabilir", "Pencerelerinizi bantlayın ve üst kata çıkın"], correctAnswer: 1, explanation: "Doğru sıra: acil çantayı hazır tutmak, dış eşyaları içeri almak ve bodrum ya da iç odalara geçmektir. Araçla kaçmak kasırga altında çok tehlikelidir." },
            { question: "Kasırga sonrası kopmuş elektrik teli yakınında su birikintisi varsa ne yapılmalıdır?", choices: ["Tel titreşmiyorsa geçilebilir", "Plastik tabanlı ayakkabıyla geçilebilir", "Su birikintisine yaklaşılmamalı; toprak akımı öldürücü olabilir", "Teli çubukla uzaklaştırarak geçilebilir"], correctAnswer: 2, explanation: "Enerjili bir telin yakınındaki su 'basamak gerilimi' oluşturur. Görünürde titreşmese bile toprak üzerinden ölümcül akım geçebilir." },
            { question: "Kasırga koşullarında en iyi korumayı hangi yapı sağlar?", choices: ["Ahşap çerçeveli bina — esnediği için rüzgara dayanır", "Takviyeli betonarme iç odalar veya bodrum katlar", "Metal prefabrik yapılar — hafif olduğu için uçmaz", "Geniş ve yüksek binalar — rüzgar altlarından geçer"], correctAnswer: 1, explanation: "Takviyeli betonarme iç odalar ve bodrum katlar kasırga rüzgarına karşı en güvenli korumayı sağlar." },
            { question: "Kasırga esnasında jeneratörü nerede çalıştırmalısınız?", choices: ["Mutfakta, pencere açık", "Binanın içinde düşük güçte", "Garajda, kapı kısmen açık", "Binanın dışında, açık ve havadar bir alanda"], correctAnswer: 3, explanation: "Jeneratörler karbonmonoksit gazı üretir; renksiz ve kokusuz olup ölümcüldür. Yalnızca açık havada, binanın dışında çalıştırılmalıdır." }
        ],
        yildirim: [
            { question: "Yıldırımın düşebileceği maksimum yatay mesafe nedir?", choices: ["Yaklaşık 1 km; gök gürültüsü duyulmadan tehlike yoktur", "Yaklaşık 5 km", "Yaklaşık 15 km; gök gürültüsü duymadan da yıldırım çarpabilir", "Yaklaşık 30 km"], correctAnswer: 2, explanation: "Yıldırım yaklaşık 15 km mesafeye kadar yatay hareket edebilir. Gök gürültüsü duymadan da çarpma riski vardır. 30/30 kuralı: 30 saniyeden az aralık → içeri gir." },
            { question: "Açık alanda yıldırımdan korunmak için doğru vücut pozisyonu hangisidir?", choices: ["Yere uzanmak", "Ayakta durmak ve en kısa ağacın yanında beklemek", "Ayakları bitişik çömelmek, ellerle kulaklarını kapatmak", "Dört ayak pozisyonunda beklemek"], correctAnswer: 2, explanation: "Ayakları bitişik çömelmek yere temas yüzeyini en aza indirir. Yere uzanmak 'basamak gerilimi' nedeniyle tehlikelidir." },
            { question: "Yıldırım çarpması kurbanlarına ilk yardımda hangisi kesinlikle yanlıştır?", choices: ["Güvenli bir yere taşımak", "Dokunmaktan kaçınmak çünkü kişi hâlâ elektrik yüklüdür", "Solunum ve nabız kontrolü yapmak", "Gerekirse CPR uygulamak"], correctAnswer: 1, explanation: "Yıldırım çarpan kişi elektrik depolamaz; güvenle dokunulabilir ve ilk yardım uygulanabilir. Dokunmaktan kaçınmak değerli zamanı kaybettirir." },
            { question: "Araç içindeyken yıldırım çarparsa ne yapmalısınız?", choices: ["Araçtan hemen atlayın", "Metal yüzeylere dokunmadan bekleyin — Faraday kafesi etkisiyle enerji gövdeden geçer", "Kapıları açık tutun", "Hemen dışarı çıkın"], correctAnswer: 1, explanation: "Araçların metal gövdesi Faraday kafesi görevi görür. Koltukta oturun, metal yüzeylere dokunmayın ve fırtına geçene kadar bekleyin." },
            { question: "Yıldırım fırtınası sırasında banyo yapmanın neden tehlikeli olduğu doğru açıklanmıştır?", choices: ["Banyo buharı elektriği iletir", "Su boruları topraklanmış iletken hat oluşturur; yıldırım bu hattan kişiye ulaşabilir", "Plastik borular bile elektriği iletir", "Yalnızca şehir dışında tehlikelidir"], correctAnswer: 1, explanation: "Metal su boruları topraklanmış iletken bir yol oluşturur. Yıldırım binaya çarparsa bu enerji borular aracılığıyla banyodaki kişiye iletilir." },
            { question: "'Şimşek asla aynı yere iki kez çarpmaz' ifadesi hakkında hangisi doğrudur?", choices: ["Doğrudur; çarpma noktasındaki elektrik boşaldığı için ikinci çarpma olmaz", "Yanlıştır; yüksek yapılar tek fırtınada onlarca kez çarpma alabilir", "Kısmen doğrudur; düz arazide tekrarlanmaz", "Yalnızca yapay yapılarda tekrar çarpma görülür"], correctAnswer: 1, explanation: "Bu inanış tamamen yanlıştır. Empire State Building bir fırtınada 8 kez çarpmıştır. Yüksek yapılar defalarca çarpmayı 'çeker'." },
            { question: "Yıldırım nereye çarpar?", choices: ["Her zaman en yüksek noktaya", "Islak yüzeylere", "En iyi iletkenlik yolunu seçer; bu her zaman en yüksek nokta olmayabilir", "Tepelerde hiç görülmez"], correctAnswer: 2, explanation: "Yıldırım en kısa ve en iletken yolu seçer. İyi iletkenlik sunan nesneler öne çıkan nokta olmasa bile tercih edilebilir." }
        ],
        dolu: [
            { question: "Dolu, kümülonimbüs bulutlarında nasıl oluşur?", choices: ["Yağmur damlaları yere inerken donar", "Güçlü yukarı hava akımları su damlacıklarını dondurup tekrar tekrar yukarı taşır; katmanlı buz oluşur", "Fırtına bulutlarındaki elektrik su damlalarını dondurur", "Kardan farklı bir yoğuşma süreci"], correctAnswer: 1, explanation: "Güçlü yukarı akımlar su damlacıklarını defalarca donma bölgesine taşır. Her seferinde yeni bir buz katmanı eklenir; taneler büyüdükçe ağırlaşır ve düşer." },
            { question: "Dolu fırtınası araçtayken yakaladıysa ve kapalı alan bulamıyorsanız ne yapmalısınız?", choices: ["Daha hızlı sürerek kaçmaya çalışın", "Aracı durdurun, diz seviyesinin altına inin, elleri ensede kilitli çömelin, camlardan uzak durun", "Camları indirerek tanelerin içeri girmesini önleyin", "Araçtan çıkarak köprü altına sığının"], correctAnswer: 1, explanation: "Aracı güvenle durdurmalı, camlardan uzaklaşmalı ve diz seviyesinin altına çömelerek başı ve boynu korumalısınız. Araçtan çıkmak dolu çarpması riskini artırır." },
            { question: "Dolu tanelerinin büyüklüğü ile yukarı hava akımı (updraft) hızı arasındaki ilişki nedir?", choices: ["İlişki yoktur", "Updraft ne kadar zayıfsa dolu o kadar büyük olur", "Updraft ne kadar güçlüyse dolu taneleri o kadar büyür", "Updraft hızı yalnızca dolu sayısını etkiler"], correctAnswer: 2, explanation: "Güçlü yukarı hava akımları su damlacıklarını daha uzun süre donma bölgesinde tutar; her tur yeni bir buz katmanı ekler. Şiddetli fırtınalar daha büyük dolu üretir." },
            { question: "Dolu, tarım alanlarında en çok hangi dönemi etkiler?", choices: ["Kış", "İlkbahar sonu ve yaz başı; meyveler gelişim aşamasındayken fiziksel hasar oluşturur", "Sonbahar", "Yaz sonu"], correctAnswer: 1, explanation: "İlkbahar sonu ve yaz başı (Mayıs-Haziran) en kritik dönemdir. Meyveler gelişiminin kritik evrelerinde dolu darbeleri kalıcı yara bırakır." },
            { question: "Şiddetli dolu sırasında köprü altına sığınmak neden tehlikeli olabilir?", choices: ["Köprüler yıldırım riski taşır", "Köprü altı sel suyu birikimine yol açabilir ve trafik güvenliğini tehdit eder", "Ses yankısı kulak hasarı yapar", "Tamamen güvenlidir"], correctAnswer: 1, explanation: "Köprü altları ani sel sularının toplandığı noktalardır. Dolu ile gelen yoğun yağmur hızla birikerek kişiyi tuzakta bırakabilir." },
            { question: "Dolu kütlesini ölçmek için en doğru yöntem hangisidir?", choices: ["En büyük tanelerin çapını ölçmek", "Birim alana düşen toplam dolu kütlesini tartmak (kg/m²)", "Tanelerin hız ve çapından hesaplama", "Dolu tanelerini saymak"], correctAnswer: 1, explanation: "Meteorolojik ölçümlerde birim alana (m²) düşen dolu kütlesi (kg) esas alınır. Bu yöntem tarım hasarı tahmininde ve sigorta değerlendirmelerinde kullanılır." },
            { question: "Dolu sigorta hasarında 'onarım değeri aşılırsa' ile ilgili doğru ifade hangisidir?", choices: ["Sigorta her durumda tam ödeme yapar", "Hasar piyasa değerinin %70'ini aşarsa araç 'toplam hasar' sayılabilir", "Dolu hasarı her zaman sürücünün kusurudur", "Kapsamlı kasko dolu hasarını kapsamaz"], correctAnswer: 1, explanation: "Kasko sigortasında onarım maliyeti aracın piyasa değerinin belirli bir eşiğini aşarsa araç 'toplam hasar' ilan edilebilir. Kapsamlı kasko dolu hasarını kapsar." }
        ]
    };

    const testTitles = {
        kasirga: "🌪️ Kasırga İleri Düzey Testi",
        yildirim: "⚡ Yıldırım Fırtınası Testi",
        dolu: "🌨️ Şiddetli Dolu Testi"
    };

    // ==================== TEST SİSTEMİ ====================
    let currentTest      = null;
    let currentQuestion  = 0;
    let score            = 0;
    let allAnswers       = [];
    let isAnswerSelected = false;
    let autoContinueTimer = null;

    function startTest(type) {
        currentTest      = type;
        currentQuestion  = 0;
        score            = 0;
        allAnswers       = [];
        isAnswerSelected = false;

        document.getElementById('testTitle').textContent = testTitles[type];
        const overlay = document.getElementById('testOverlay');
        overlay.classList.add('active');
        overlay.scrollTop = 0;
        lockScroll();

        renderQuestion();
    }

    function closeTest() {
        if (autoContinueTimer) { clearInterval(autoContinueTimer); autoContinueTimer = null; }
        document.getElementById('testOverlay').classList.remove('active');
        unlockScroll();
        resetTest();
    }

    function resetTest() {
        currentTest = null;
        currentQuestion = 0;
        score = 0;
        allAnswers = [];
        isAnswerSelected = false;
    }

    function renderQuestion() {
        if (!currentTest || currentQuestion >= testData[currentTest].length) {
            showResults();
            return;
        }

        const testContent  = document.getElementById('testContent');
        const questionData = testData[currentTest][currentQuestion];
        const progress     = ((currentQuestion + 1) / testData[currentTest].length) * 100;

        testContent.innerHTML = `
            <div class="progress-container">
                <div class="progress-label">
                    <span>Soru ${currentQuestion + 1} / ${testData[currentTest].length}</span>
                    <span>Puan: ${score}</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" style="width:${progress}%"></div></div>
            </div>
            <div class="question">${questionData.question}</div>
            <div class="choices" id="choicesContainer">
                ${questionData.choices.map((c, i) => `
                    <button class="choice" onclick="selectAnswer(${i})" id="choice-${i}">${c}</button>
                `).join('')}
            </div>
            <div id="feedbackContainer"></div>
        `;

        // Test içeriğini başa sar
        testContent.scrollTop = 0;
        document.getElementById('testOverlay').scrollTop = 0;
    }

    function selectAnswer(choiceIndex) {
        if (isAnswerSelected) return;
        isAnswerSelected = true;

        const questionData = testData[currentTest][currentQuestion];
        const isCorrect    = choiceIndex === questionData.correctAnswer;

        document.querySelectorAll('.choice').forEach(c => c.disabled = true);
        document.getElementById(`choice-${choiceIndex}`).classList.add(isCorrect ? 'correct' : 'wrong');
        if (!isCorrect) document.getElementById(`choice-${questionData.correctAnswer}`).classList.add('correct');

        allAnswers.push({
            question:      questionData.question,
            userAnswer:    questionData.choices[choiceIndex],
            correctAnswer: questionData.choices[questionData.correctAnswer],
            isCorrect,
            explanation:   questionData.explanation
        });

        if (isCorrect) score++;

        const feedbackContainer = document.getElementById('feedbackContainer');
        feedbackContainer.innerHTML = `
            <div class="feedback ${isCorrect ? 'correct' : 'wrong'}">
                <strong>${isCorrect ? '✅ Doğru!' : '❌ Yanlış!'}</strong><br>
                ${questionData.explanation}
            </div>
            <button class="auto-continue-btn" id="autoContinueBtn" onclick="nextQuestion()">
                ${currentQuestion < testData[currentTest].length - 1 ? '⏭️ Sonraki Soru' : '🏁 Sonuçları Göster'}
            </button>
            <div class="countdown-text">Otomatik geçiş: <span id="countdownNumber">4</span> sn</div>
        `;

        // Geri bildirimi görünür hale getir
        feedbackContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

        startAutoContinue();
    }

    function startAutoContinue() {
        let countdown = 4;
        const updateCountdown = () => {
            const countEl = document.getElementById('countdownNumber');
            if (countEl) countEl.textContent = countdown;
        };

        autoContinueTimer = setInterval(() => {
            countdown--;
            updateCountdown();
            if (countdown <= 0) {
                clearInterval(autoContinueTimer);
                autoContinueTimer = null;
                nextQuestion();
            }
        }, 1000);
    }

    function nextQuestion() {
        if (autoContinueTimer) { clearInterval(autoContinueTimer); autoContinueTimer = null; }
        currentQuestion++;
        isAnswerSelected = false;
        renderQuestion();
    }

    function showResults() {
        const testContent    = document.getElementById('testContent');
        const totalQuestions = testData[currentTest].length;
        const percentage     = Math.round((score / totalQuestions) * 100);

        let detailedHTML = allAnswers.map((a, i) => `
            <div class="result-item ${a.isCorrect ? 'correct' : 'wrong'}">
                <div class="result-question">Soru ${i + 1}: ${a.question}</div>
                <div class="result-answer ${a.isCorrect ? 'correct' : 'wrong'}">
                    ${a.isCorrect ? '✅' : '❌'} <strong>Senin cevabın:</strong> ${a.userAnswer}
                </div>
                ${!a.isCorrect ? `<div class="result-answer correct">✅ <strong>Doğru cevap:</strong> ${a.correctAnswer}</div>` : ''}
                <div class="result-explanation">💡 ${a.explanation}</div>
            </div>
        `).join('');

        let icon, msg;
        if (percentage >= 80)      { icon = '🏆'; msg = 'Mükemmel! Gerçek bir uzmansın!'; }
        else if (percentage >= 57) { icon = '👍'; msg = 'İyi iş! Detayları da öğrenmeye devam et.'; }
        else                       { icon = '💡'; msg = 'Bilgi kartlarını okuyarak tekrar dene!'; }

        testContent.innerHTML = `
            <div class="result-screen">
                <div class="result-icon">${icon}</div>
                <div class="result-score">${score}/${totalQuestions}</div>
                <div class="result-message">${msg}<br>Başarı oranın: <strong>%${percentage}</strong></div>
                <div class="detailed-results">
                    <h3 style="margin-bottom:1.25rem;color:var(--primary);">📊 Detaylı Sonuçlar</h3>
                    ${detailedHTML}
                </div>
                <div class="result-actions">
                    <button class="card-btn primary" onclick="startTest('${currentTest}')">🔄 Tekrar Dene</button>
                    <button class="card-btn secondary" onclick="closeTest()">🏠 Geri Dön</button>
                </div>
            </div>
        `;

        document.getElementById('testOverlay').scrollTop = 0;
    }

    // ==================== BİLGİ GÖSTER/GİZLE ====================
    function showInfo(type) {
        const info = infoData[type];
        document.getElementById('detailTitle').textContent = info.title;
        document.getElementById('detailContent').innerHTML = info.content;
        const detailSection = document.getElementById('detailSection');
        detailSection.style.display = 'block';
        document.querySelectorAll('.card').forEach(c => c.style.display = 'none');
        document.querySelector('.section-title').style.display = 'none';
        // Yumuşak scroll - mobil uyumlu
        setTimeout(() => {
            detailSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
    }

    function hideInfo() {
        document.getElementById('detailSection').style.display = 'none';
        document.querySelectorAll('.card').forEach(c => c.style.display = 'flex');
        document.querySelector('.section-title').style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ==================== MOBİL SWIPE — TEST KAPATMA ====================
    if ('ontouchstart' in window) {
        let swipeStartX = 0, swipeStartY = 0;
        const testOverlay = document.getElementById('testOverlay');

        testOverlay.addEventListener('touchstart', e => {
            swipeStartX = e.touches[0].clientX;
            swipeStartY = e.touches[0].clientY;
        }, { passive: true });

        testOverlay.addEventListener('touchend', e => {
            const diffX = e.changedTouches[0].clientX - swipeStartX;
            const diffY = Math.abs(e.changedTouches[0].clientY - swipeStartY);
            // Yatay swipe (dikey scroll değil) ve yeterli mesafe
            if (Math.abs(diffX) > diffY && diffX < -80) closeTest();
        }, { passive: true });
    }

    // ==================== RESIZE HANDLER ====================
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
            const isMobile = window.innerWidth <= 768;
            document.documentElement.style.setProperty(
                '--transition-normal',
                isMobile ? '200ms cubic-bezier(0.4,0,0.2,1)' : '300ms cubic-bezier(0.4,0,0.2,1)'
            );
        }, 200);
    }, { passive: true });

    // ==================== DOKUNMA GERI BİLDİRİM ====================
    // iOS'ta active sözde sınıfını çalıştırmak için
    document.addEventListener('touchstart', () => {}, { passive: true });

    // ==================== PERFORMANS: PASSIVE SCROLL ====================
    window.addEventListener('scroll', () => {}, { passive: true });
    </script>
</body>
</html>
