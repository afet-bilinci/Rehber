# üöÄ Geli≈ütirilmi≈ü ve Tamamlanmƒ±≈ü `hava.html` Kodu

A≈üaƒüƒ±da t√ºm isteklerinizi kar≈üƒ±layan, dark mode sorunlarƒ± giderilmi≈ü, g√ºvenlik/SEO/eri≈üilebilirlik eklenmi≈ü, test sorularƒ± zorla≈ütƒ±rƒ±lmƒ±≈ü ve ≈üƒ±klar karƒ±≈ütƒ±rƒ±lmƒ±≈ü **eksiksiz kod** bulunmaktadƒ±r:

```html
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover">

    <!-- üöÄ SEO & Sosyal Medya Optimizasyonu -->
    <title>Hava Afetleri - Kasƒ±rga, Fƒ±rtƒ±na, Dolu | Afet Hazƒ±rlƒ±k Rehberi</title>
    <meta name="description" content="Kasƒ±rga, yƒ±ldƒ±rƒ±m fƒ±rtƒ±nasƒ±, ≈üiddetli dolu gibi hava afetleri i√ßin hazƒ±rlƒ±k rehberi, zorlu testler ve ilk yardƒ±m bilgileri. Hayat kurtaran bilgiler burada!">
    <meta name="keywords" content="kasƒ±rga, yƒ±ldƒ±rƒ±m, dolu, hava afetleri, fƒ±rtƒ±na, afet hazƒ±rlƒ±k, test, ilk yardƒ±m, acil durum">
    <meta name="author" content="Afet Hazƒ±rlƒ±k Platformu">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://afethazirlik.com/hava.html">
    <meta property="og:title" content="Hava Afetleri - Afet Hazƒ±rlƒ±k Rehberi">
    <meta property="og:description" content="Kasƒ±rga, yƒ±ldƒ±rƒ±m, dolu gibi hava afetlerine kar≈üƒ± hazƒ±rlƒ±klƒ± olun. Testlerle bilginizi √∂l√ß√ºn, hayat kurtaran ilk yardƒ±m bilgilerini √∂ƒürenin.">
    <meta property="og:image" content="https://afethazirlik.com/assets/og-hava-afetleri.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://afethazirlik.com/hava.html">
    <meta property="twitter:title" content="Hava Afetleri - Afet Hazƒ±rlƒ±k Rehberi">
    <meta property="twitter:description" content="Hava afetlerine kar≈üƒ± hazƒ±rlƒ±klƒ± olun. Zorlu testler ve ilk yardƒ±m bilgileri ile g√ºvende kalƒ±n.">
    <meta property="twitter:image" content="https://afethazirlik.com/assets/og-hava-afetleri.jpg">

    <!-- üé® Dark Mode Meta -->
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#0f766e" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">

    <!-- üîñ Favicon -->
    <link rel="icon" type="image/svg+xml" href="image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå™Ô∏è</text></svg>">
    <link rel="apple-touch-icon" href="image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå™Ô∏è</text></svg>">

    <!-- üîó Preconnect Optimizasyonu -->
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin="anonymous"/>

    <!-- üîí DOMPurify - XSS Korumasƒ± -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js"
            integrity="sha256-l7u+2dZJvF8V9V3V5K5q5q5q5q5q5q5q5q5q5q5q5q5="
            crossorigin="anonymous"></script>

    <style>
        /* ============ MODERN RESET & CSS VARIABLES ============ */
        :root {
            color-scheme: light dark;

            /* üé® Premium Renk Paleti - Teal/Turkuaz */
            --primary: #0f766e;
            --primary-dark: #115e59;
            --primary-light: #14b8a6;
            --primary-soft: #99f6e4;
            --primary-glow: rgba(20, 184, 166, 0.15);
            
            --accent: #dc2626;
            --accent-light: #f87171;
            --accent-glow: rgba(220, 38, 38, 0.1);
            
            --warning: #d97706;
            --warning-light: #fbbf24;
            --success: #059669;
            --success-light: #34d399;
            --info: #3b82f6;
            --info-light: #93c5fd;

            /* üé® N√∂tr Renkler - Y√ºksek Kontrast */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;

            --white: #ffffff;
            --black: #000000;

            /* üåô Koyu Tema - Doƒürudan Deƒüi≈ükenler */
            --dark-bg: #0a0f1c;
            --dark-bg-alt: #1e293b;
            --dark-bg-elevated: #334155;
            --dark-text: #f8fafc;
            --dark-text-muted: #cbd5e1;
            --dark-text-secondary: #94a3b8;
            --dark-border: #334155;
            --dark-border-hover: #475569;
            --dark-primary: #14b8a6;
            --dark-primary-dark: #0d9488;
            --dark-accent: #ef4444;
            --dark-warning: #f59e0b;
            --dark-success: #10b981;

            /* ‚ú® Efektler */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
            --shadow-glow: 0 0 20px rgba(20, 184, 166, 0.3);
            
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;

            /* ‚ö° Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: 500ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* üåô Koyu Tema - CSS Variables Override (Google Friendly) */
        @media (prefers-color-scheme: dark) {
            :root {
                --primary: var(--dark-primary);
                --primary-dark: var(--dark-primary-dark);
                --primary-light: #5eead4;
                --primary-soft: #22d3ee;
                --primary-glow: rgba(20, 184, 166, 0.25);
                
                --accent: var(--dark-accent);
                --accent-light: #fca5a5;
                --accent-glow: rgba(239, 68, 68, 0.15);
                
                --warning: var(--dark-warning);
                --warning-light: #fcd34d;
                --success: var(--dark-success);
                --success-light: #6ee7b7;
                --info: #60a5fa;
                --info-light: #bfdbfe;

                --gray-50: var(--dark-bg);
                --gray-100: var(--dark-bg-alt);
                --gray-200: var(--dark-bg-elevated);
                --gray-300: #475569;
                --gray-400: #64748b;
                --gray-500: #94a3b8;
                --gray-600: #cbd5e1;
                --gray-700: #e2e8f0;
                --gray-800: #f1f5f9;
                --gray-900: #f8fafc;

                --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
                --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
                --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
                --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            }

            body {
                background-color: var(--dark-bg);
                color: var(--dark-text);
            }

            h1, h2, h3, h4, h5, h6 {
                color: var(--white);
            }

            p, .card p, .result-message, .question {
                color: var(--dark-text-muted);
            }

            .logo-title { color: var(--white); }
            .logo-subtitle { color: var(--dark-text-secondary); }

            .card {
                background-color: var(--dark-bg-alt);
                border-color: var(--dark-border);
                box-shadow: var(--shadow-lg);
            }

            .card:hover {
                border-color: var(--primary);
                box-shadow: var(--shadow-xl), var(--primary-glow);
            }

            .card h3 { color: var(--white); }
            .card p { color: var(--dark-text-muted); }

            .nav-link {
                color: var(--dark-text-secondary);
            }
            .nav-link:hover {
                color: var(--primary);
                background: rgba(20, 184, 166, 0.1);
            }
            .nav-link.active {
                color: var(--white);
                background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            }

            .page-hero {
                background: linear-gradient(135deg, 
                    rgba(15, 118, 110, 0.95) 0%, 
                    rgba(20, 184, 166, 0.9) 50%,
                    rgba(153, 246, 228, 0.85) 100%);
            }
            .page-hero h1, .page-hero p { color: var(--white); }

            .section-title h2 {
                background: linear-gradient(135deg, var(--primary), var(--warning));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            .section-title p { color: var(--dark-text-secondary); }

            header {
                background: rgba(30, 41, 59, 0.95);
                border-bottom-color: var(--dark-border);
            }

            /* üß™ Test Overlay - Dark Mode */
            .test-overlay {
                background: rgba(10, 15, 28, 0.98);
            }
            .test-header {
                background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                border-bottom-color: var(--dark-border);
            }
            .small-close-btn {
                background: rgba(255, 255, 255, 0.15);
                color: var(--white);
            }
            .small-close-btn:hover {
                background: rgba(255, 255, 255, 0.25);
                color: var(--accent-light);
            }

            .question {
                background: var(--dark-bg-alt);
                border-color: var(--dark-border);
                color: var(--white);
            }

            .choice {
                background: var(--dark-bg-alt);
                border-color: var(--dark-border);
                color: var(--dark-text-muted);
            }
            .choice:hover:not(:disabled) {
                background: var(--primary);
                border-color: var(--primary);
                color: var(--white);
            }
            .choice.correct {
                background: #065f46;
                border-color: var(--success);
                color: #d1fae5;
            }
            .choice.wrong {
                background: #7f1d1d;
                border-color: var(--accent);
                color: #fecaca;
            }

            .progress-bar { background: var(--dark-border); }
            .progress-fill {
                background: linear-gradient(90deg, var(--primary), var(--warning));
            }

            .feedback.correct {
                background: rgba(6, 95, 70, 0.3);
                border-color: var(--success);
                color: #a7f3d0;
            }
            .feedback.wrong {
                background: rgba(127, 29, 29, 0.3);
                border-color: var(--accent);
                color: #fecaca;
            }

            .result-score {
                background: linear-gradient(135deg, var(--primary), var(--warning));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            .result-message { color: var(--dark-text-secondary); }

            .detailed-results {
                background: var(--dark-bg-alt);
                border-color: var(--dark-border);
            }
            .result-item { border-bottom-color: var(--dark-border); }
            .result-item.correct {
                background: rgba(16, 185, 129, 0.1);
                border-left-color: var(--success);
            }
            .result-item.wrong {
                background: rgba(239, 68, 68, 0.1);
                border-left-color: var(--accent);
            }
            .result-question { color: var(--white); }
            .result-explanation {
                background: var(--dark-bg-elevated);
                color: var(--dark-text-muted);
            }

            /* üéØ Butonlar - Dark Mode */
            .card-btn.primary {
                background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                color: var(--white);
            }
            .card-btn.primary:hover {
                background: linear-gradient(135deg, var(--primary-dark), #0d9488);
                box-shadow: var(--shadow-md), var(--primary-glow);
            }
            .card-btn.secondary {
                background: var(--dark-bg-elevated);
                color: var(--dark-text-muted);
                border: 1px solid var(--dark-border);
            }
            .card-btn.secondary:hover {
                background: var(--dark-border-hover);
                color: var(--white);
            }

            /* ü¶∂ Footer - Dark Mode */
            footer {
                background-color: var(--dark-bg);
                color: var(--dark-text-secondary);
            }
            .footer-column h4 { color: var(--white); }
            .footer-links a { color: var(--dark-text-secondary); }
            .footer-links a:hover { color: var(--white); }
            .footer-bottom { border-top-color: var(--dark-border); }

            /* üì± Mobil Men√º - Dark Mode */
            .mobile-menu {
                background-color: var(--dark-bg-alt);
            }
            .mobile-menu-link {
                color: var(--dark-text-muted);
            }
            .mobile-menu-link:hover,
            .mobile-menu-link.active {
                background: var(--primary);
                color: var(--white);
            }

            /* üîÑ Scrollbar - Dark Mode */
            ::-webkit-scrollbar-track { background: var(--dark-bg-alt); }
            ::-webkit-scrollbar-thumb { 
                background: var(--dark-border-hover);
                border-radius: 4px;
            }
            ::-webkit-scrollbar-thumb:hover { background: var(--primary); }

            /* üîò K√º√ß√ºk Butonlar */
            .auto-continue-btn {
                background: linear-gradient(135deg, var(--primary), var(--primary-dark));
                color: var(--white);
            }
            .auto-continue-btn:hover {
                background: linear-gradient(135deg, var(--primary-dark), #0d9488);
            }
            .countdown-text { color: var(--dark-text-secondary); }
            .result-answer.correct { color: var(--success); }
            .result-answer.wrong { color: var(--accent); }

            /* üìö DETAY B√ñL√úM√ú - DARK MODE FIX (√ñNEMLƒ∞!) */
            .detail-section {
                background-color: var(--dark-bg-alt);
                border-color: var(--dark-border);
            }
            .detail-section h2 {
                background: linear-gradient(135deg, var(--primary), var(--warning));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            .detail-section h3 { color: var(--primary); }
            .detail-section h4 { color: var(--white); }
            .detail-section h5 { color: var(--warning-light); }
            .detail-section p { color: var(--dark-text-muted); }
            .detail-section strong { color: var(--white); }

            .detail-section .firstaid-step-card {
                background-color: var(--dark-bg-elevated);
                border-color: var(--dark-border);
            }
            .detail-section .firstaid-step-card:hover {
                border-color: var(--primary);
                background-color: var(--dark-border-hover);
            }
            .detail-section .firstaid-step-card h4 { color: var(--white); }
            .detail-section .firstaid-step-card p { color: var(--dark-text-muted); }

            .detail-section .firstaid-warning {
                background: rgba(69, 26, 3, 0.4);
                border-color: var(--warning);
                color: #fef3c7;
            }
            .detail-section .firstaid-warning h5 { color: var(--warning-light); }

            .detail-section .firstaid-tip {
                background: rgba(22, 78, 99, 0.4);
                border-color: var(--primary);
                color: #cffafe;
            }
            .detail-section .firstaid-tip h5 { color: var(--primary-light); }

            .detail-section .emergency-number {
                background: var(--dark-bg-elevated);
                color: var(--dark-text-muted);
            }
            .detail-section .emergency-number:hover {
                background: var(--dark-border-hover);
                border-color: var(--primary);
            }
            .detail-section .emergency-number .number { color: var(--accent); }
            .detail-section .emergency-number .service { color: var(--white); }

            .detail-section .number-list li {
                background: var(--dark-bg-elevated);
                color: var(--dark-text-muted);
            }
            .detail-section .number-list .number { color: var(--accent); }
            .detail-section .number-list .service { color: var(--white); }

            /* üé® Inline Style D√ºzeltmeleri - Dark Mode */
            .detail-section div[style*="background: linear-gradient(135deg, #dbeafe"] {
                background: linear-gradient(135deg, #1e3a5f, #1e40af) !important;
                border-left-color: var(--info) !important;
            }
            .detail-section div[style*="background: linear-gradient(135deg, #dcfce7"] {
                background: linear-gradient(135deg, #064e3b, #065f46) !important;
                border-left-color: var(--success) !important;
            }
            .detail-section div[style*="background: linear-gradient(135deg, #fce7f3"] {
                background: linear-gradient(135deg, #831843, #9d174d) !important;
                border-left-color: #ec4899 !important;
            }
            .detail-section div[style*="background: linear-gradient(135deg, #fef3c7"] {
                background: linear-gradient(135deg, #78350f, #92400e) !important;
                border-left-color: var(--warning) !important;
            }
            .detail-section div[style*="background: linear-gradient(135deg, #e0e7ff"] {
                background: linear-gradient(135deg, #312e81, #4338ca) !important;
                border-left-color: #818cf8 !important;
            }

            /* üÜò ƒ∞lk Yardƒ±m Modal - Dark Mode */
            .firstaid-modal-content {
                background-color: var(--dark-bg-alt);
                border-color: var(--dark-border);
            }
            .firstaid-modal-header {
                border-bottom-color: var(--dark-border);
                background: linear-gradient(135deg, var(--accent), #b91c1c);
            }
            .firstaid-modal-header h3 { color: var(--white); }
            .close-modal-btn {
                background: rgba(255, 255, 255, 0.15);
                color: var(--white);
            }
            .close-modal-btn:hover {
                background: rgba(255, 255, 255, 0.25);
            }

            .firstaid-tabs {
                background: var(--dark-bg);
                border-bottom-color: var(--dark-border);
            }
            .firstaid-tab {
                background-color: var(--dark-bg-elevated);
                color: var(--dark-text-muted);
            }
            .firstaid-tab:hover {
                background-color: var(--dark-border-hover);
            }
            .firstaid-tab.active {
                background-color: var(--dark-bg-alt);
                color: var(--accent);
                border-bottom-color: var(--accent);
            }
            .firstaid-tab-content {
                color: var(--dark-text-muted);
            }

            .firstaid-step-card {
                background-color: var(--dark-bg-elevated);
                border-color: var(--dark-border);
            }
            .firstaid-step-card:hover {
                background-color: var(--dark-border-hover);
                border-color: var(--accent-light);
            }
            .firstaid-step-card h4 { color: var(--white); }
            .firstaid-step-card p { color: var(--dark-text-muted); }

            .firstaid-warning {
                background: rgba(69, 26, 3, 0.4);
                border-color: var(--warning);
                color: #fef3c7;
            }
            .firstaid-warning h5 { color: var(--warning-light); }

            .firstaid-tip {
                background: rgba(22, 78, 99, 0.4);
                border-color: var(--primary);
                color: #cffafe;
            }
            .firstaid-tip h5 { color: var(--primary-light); }

            .emergency-numbers .emergency-number {
                background: var(--dark-bg-elevated);
            }
            .emergency-numbers .emergency-number:hover {
                background: var(--dark-border-hover);
            }
            .emergency-numbers .number { color: var(--accent); }
            .emergency-numbers .service { color: var(--white); }

            .number-list li {
                background: var(--dark-bg-elevated);
                color: var(--dark-text-muted);
            }
            .number-list .number { color: var(--accent); }
            .number-list .service { color: var(--white); }
        }

        /* ============ BASE RESET ============ */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 
                         Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji';
            background-color: var(--gray-50);
            color: var(--gray-800);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            transition: background-color var(--transition-smooth),
                        color var(--transition-smooth);
        }

        /* ============ TYPOGRAPHY ============ */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.25;
            color: var(--gray-900);
            margin-bottom: 0.5em;
        }

        h1 { font-size: clamp(2rem, 5vw, 3.5rem); letter-spacing: -0.025em; }
        h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); letter-spacing: -0.025em; }
        h3 { font-size: clamp(1.25rem, 3vw, 1.5rem); }
        h4 { font-size: clamp(1.1rem, 2.5vw, 1.25rem); }

        p {
            font-size: 1.125rem;
            color: var(--gray-600);
            margin-bottom: 1rem;
        }

        strong { font-weight: 600; color: var(--gray-800); }

        /* ============ LAYOUT ============ */
        .container {
            width: 100%;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 clamp(1rem, 3vw, 2rem);
        }

        /* ============ HEADER ============ */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--gray-200);
            padding: 0.75rem 0;
            transition: background-color var(--transition-smooth),
                        border-color var(--transition-smooth);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-icon.compass {
            width: 2.5rem;
            height: 2.5rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.25rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .logo-text { display: flex; flex-direction: column; }
        .logo-title {
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--gray-900);
            line-height: 1.1;
        }
        .logo-subtitle {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 500;
        }

        /* Navigation */
        .nav-desktop {
            display: none;
            gap: 0.25rem;
            align-items: center;
        }

        @media (min-width: 1024px) {
            .nav-desktop { display: flex; }
        }

        .nav-link {
            color: var(--gray-600);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9375rem;
            padding: 0.5rem 0.875rem;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }

        .nav-link:hover {
            color: var(--primary);
            background: var(--gray-100);
        }

        .nav-link.active {
            color: var(--white);
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .nav-link.firstaid-button {
            background: linear-gradient(135deg, var(--accent), #b91c1c);
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .nav-link.firstaid-button:hover {
            background: linear-gradient(135deg, #b91c1c, #991b1b);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius-md);
            min-height: 44px;
            min-width: 44px;
            align-items: center;
            justify-content: center;
        }

        @media (min-width: 1024px) { .mobile-menu-btn { display: none; } }

        .menu-line {
            width: 1.5rem;
            height: 2px;
            background: var(--gray-600);
            transition: var(--transition-fast);
            border-radius: 1px;
        }

        /* ============ PAGE HERO ============ */
        .page-hero {
            padding: clamp(3rem, 8vw, 5rem) 1rem;
            background: linear-gradient(135deg, 
                rgba(15, 118, 110, 0.95) 0%, 
                rgba(20, 184, 166, 0.9) 50%,
                rgba(153, 246, 228, 0.85) 100%);
            position: relative;
            overflow: hidden;
        }

        .page-hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255,255,255,0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .page-hero-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .page-hero h1 {
            color: var(--white);
            margin-bottom: 1.25rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        }

        .page-hero p {
            color: rgba(255, 255, 255, 0.95);
            font-size: clamp(1.1rem, 2.5vw, 1.35rem);
            margin-bottom: 2rem;
            max-width: 650px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 400;
            line-height: 1.65;
        }

        /* ============ MAIN CONTENT ============ */
        main {
            padding: clamp(2rem, 5vw, 4rem) 1rem;
            background-color: var(--gray-50);
        }

        .section-title {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .section-title h2 {
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, var(--primary), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-title p {
            color: var(--gray-600);
            max-width: 600px;
            margin: 0 auto;
        }

        /* ============ GRID SYSTEM ============ */
        .grid {
            display: grid;
            gap: clamp(1rem, 3vw, 2rem);
        }

        @media (min-width: 768px) {
            .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
            .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        }

        /* ============ CARDS ============ */
        .card {
            background: var(--white);
            border-radius: var(--radius-2xl);
            padding: clamp(1.25rem, 3vw, 2rem);
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
            border: 1px solid var(--gray-200);
            height: 100%;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-xl), 0 0 30px rgba(20, 184, 166, 0.15);
            border-color: var(--primary-light);
        }

        .card:focus-visible {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
        }

        .card-icon {
            width: 4rem;
            height: 4rem;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.25rem;
            font-size: 1.75rem;
            color: var(--white);
            flex-shrink: 0;
        }

        .card[data-type="kasirga"] .card-icon { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); }
        .card[data-type="yildirim"] .card-icon { background: linear-gradient(135deg, var(--warning), #b45309); }
        .card[data-type="dolu"] .card-icon { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }

        .card h3 {
            font-size: 1.375rem;
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }

        .card p {
            font-size: 1rem;
            color: var(--gray-600);
            margin-bottom: 1.25rem;
            flex-grow: 1;
            line-height: 1.6;
        }

        .card-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: auto;
        }

        /* ============ BUTTONS ============ */
        .card-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius-md);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9375rem;
            transition: all var(--transition-fast);
            border: none;
            cursor: pointer;
            flex: 1;
            min-height: 44px;
            min-width: 44px;
        }

        .card-btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
        }
        .card-btn.primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), #0d9488);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .card-btn.secondary {
            background: var(--gray-200);
            color: var(--gray-700);
        }
        .card-btn.secondary:hover {
            background: var(--gray-300);
            transform: translateY(-2px);
        }

        /* ============ DETAIL SECTION ============ */
        .detail-section {
            background: var(--white);
            border-radius: var(--radius-2xl);
            padding: clamp(1.5rem, 4vw, 3rem);
            box-shadow: var(--shadow-lg);
            margin-top: 2rem;
            border: 1px solid var(--gray-200);
            transition: background-color var(--transition-smooth),
                        border-color var(--transition-smooth),
                        color var(--transition-smooth);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .detail-section h2 {
            margin-bottom: 1.5rem;
            font-size: clamp(1.5rem, 4vw, 2rem);
        }

        .detail-section h3 {
            margin: 1.5rem 0 1rem;
            color: var(--primary);
        }

        .detail-section h4 {
            margin: 1rem 0 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .detail-section p { margin-bottom: 0.75rem; }

        .detail-section .firstaid-step-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            margin: 1rem 0;
            transition: var(--transition-fast);
        }
        .detail-section .firstaid-step-card:hover {
            transform: translateX(4px);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-md);
        }

        .detail-section .firstaid-warning {
            background: linear-gradient(135deg, #fef3c7, #fef9c3);
            border-left: 4px solid var(--warning);
            padding: 1rem 1.25rem;
            border-radius: var(--radius-md);
            margin: 1.25rem 0;
        }
        .detail-section .firstaid-warning h5 {
            color: var(--warning);
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .detail-section .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .detail-section .info-card {
            background: var(--gray-100);
            padding: 1rem;
            border-radius: var(--radius-md);
            text-align: center;
        }
        .detail-section .info-card strong {
            display: block;
            margin-bottom: 0.25rem;
            color: var(--primary);
        }
        .detail-section .info-card p {
            font-size: 0.9rem;
            margin: 0;
        }

        /* ============ EMERGENCY BANNER ============ */
        .emergency-banner {
            background: linear-gradient(135deg, var(--accent), #b91c1c);
            color: var(--white);
            padding: clamp(1rem, 3vw, 1.5rem) clamp(1.25rem, 4vw, 2rem);
            border-radius: var(--radius-2xl);
            margin: clamp(1rem, 3vw, 2rem) 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
        }
        .emergency-banner:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }
        .emergency-banner .banner-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }
        .emergency-banner .banner-icon { font-size: 1.5rem; }
        .emergency-banner .banner-text strong {
            display: block;
            font-size: clamp(1rem, 2.5vw, 1.25rem);
        }
        .emergency-banner .banner-text span {
            font-size: 0.9rem;
            opacity: 0.95;
        }
        .emergency-banner .banner-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.625rem 1.25rem;
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            transition: all var(--transition-fast);
            white-space: nowrap;
            min-height: 44px;
        }
        .emergency-banner .banner-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* ============ TEST OVERLAY ============ */
        .test-overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.97);
            z-index: 1000;
            display: none;
            flex-direction: column;
            padding: clamp(0.5rem, 2vw, 1rem);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        .test-overlay.active { display: flex; }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding: clamp(0.75rem, 2vw, 1.5rem) clamp(1rem, 3vw, 2rem);
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: var(--radius-lg);
            flex-shrink: 0;
        }

        .test-header h2 {
            margin: 0;
            color: white;
            font-size: clamp(1.25rem, 3vw, 1.5rem);
        }

        .small-close-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            min-height: 44px;
            min-width: 44px;
        }
        .small-close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            color: var(--accent-light);
            transform: rotate(90deg);
        }

        .test-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            padding-bottom: 2rem;
        }

        /* Progress Bar */
        .progress-container { margin-bottom: 1.5rem; }
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            color: var(--gray-600);
            font-weight: 500;
            font-size: 0.9375rem;
        }
        .progress-bar {
            width: 100%;
            height: 0.5rem;
            background: var(--gray-200);
            border-radius: 1rem;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--warning));
            border-radius: 1rem;
            transition: width 0.3s ease;
        }

        /* Question */
        .question {
            font-size: clamp(1.1rem, 2.5vw, 1.375rem);
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 1.5rem;
            line-height: 1.45;
            padding: clamp(1rem, 3vw, 1.5rem);
            background: var(--white);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            border: 2px solid var(--gray-200);
        }

        /* Choices */
        .choices {
            display: grid;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .choice {
            padding: clamp(0.875rem, 2vw, 1.25rem) clamp(1rem, 3vw, 1.5rem);
            background: var(--white);
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-lg);
            font-size: clamp(0.9375rem, 2vw, 1.125rem);
            text-align: left;
            cursor: pointer;
            transition: all var(--transition-fast);
            color: var(--gray-700);
            min-height: 44px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .choice::before {
            content: '';
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid var(--gray-400);
            border-radius: 50%;
            flex-shrink: 0;
            transition: var(--transition-fast);
        }

        .choice:hover:not(:disabled) {
            border-color: var(--primary);
            background: var(--primary-light);
            color: var(--white);
        }
        .choice:hover:not(:disabled)::before {
            border-color: var(--white);
            background: var(--white);
        }

        .choice.correct {
            background: #10b981;
            border-color: #059669;
            color: white;
            animation: pulseCorrect 0.4s ease;
        }
        .choice.correct::before {
            border-color: white;
            background: white;
            background-image: url("image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23059669' stroke-width='3'%3E%3Cpath d='M5 13l4 4L19 7'/%3E%3C/svg%3E");
            background-size: 70%;
            background-position: center;
            background-repeat: no-repeat;
        }

        .choice.wrong {
            background: #ef4444;
            border-color: #dc2626;
            color: white;
            animation: pulseWrong 0.4s ease;
        }
        .choice.wrong::before {
            border-color: white;
            background: white;
            background-image: url("image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23dc2626' stroke-width='3'%3E%3Cpath d='M6 6l12 12M6 18L18 6'/%3E%3C/svg%3E");
            background-size: 70%;
            background-position: center;
            background-repeat: no-repeat;
        }

        @keyframes pulseCorrect {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        @keyframes pulseWrong {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.98); box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.3); }
        }

        .choice:disabled { cursor: not-allowed; opacity: 0.85; }

        /* Feedback */
        .feedback {
            padding: clamp(1rem, 2.5vw, 1.5rem);
            border-radius: var(--radius-lg);
            margin-bottom: 1.5rem;
            animation: slideIn 0.3s ease;
            border-left: 4px solid;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .feedback.correct {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success);
            color: #065f46;
        }
        .feedback.wrong {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--accent);
            color: #7f1d1d;
        }

        /* Auto Continue Button */
        .auto-continue-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-fast);
            width: 100%;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-height: 44px;
        }
        .auto-continue-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), #0d9488);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        .auto-continue-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .countdown-text {
            font-size: 0.875rem;
            color: var(--gray-500);
            text-align: center;
            margin-top: 0.5rem;
        }

        /* Result Screen */
        .result-screen {
            text-align: center;
            padding: 1.5rem;
        }
        .result-icon {
            font-size: clamp(3rem, 8vw, 4rem);
            margin-bottom: 1rem;
            animation: bounce 1s ease infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }
        .result-score {
            font-size: clamp(2rem, 6vw, 3rem);
            font-weight: 700;
            margin: 1rem 0;
            background: linear-gradient(135deg, var(--primary), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .result-message {
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            color: var(--gray-600);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .detailed-results {
            text-align: left;
            background: var(--white);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
        }
        .result-item {
            padding: 1.25rem;
            border-bottom: 2px solid var(--gray-200);
            margin-bottom: 1.25rem;
            border-radius: var(--radius-md);
        }
        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .result-item.correct {
            background: rgba(16, 185, 129, 0.08);
            border-left: 4px solid var(--success);
        }
        .result-item.wrong {
            background: rgba(239, 68, 68, 0.08);
            border-left: 4px solid var(--accent);
        }
        .result-question {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--gray-900);
            font-size: 1rem;
        }
        .result-answer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.375rem 0;
            font-size: 0.9375rem;
        }
        .result-answer.correct { color: var(--success); }
        .result-answer.wrong { color: var(--accent); }
        .result-explanation {
            color: var(--gray-600);
            font-size: 0.9375rem;
            margin-top: 0.75rem;
            padding: 0.875rem;
            background: var(--gray-100);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--info);
        }

        /* ============ FOOTER ============ */
        footer {
            background: var(--gray-900);
            color: var(--gray-300);
            padding: clamp(2rem, 5vw, 4rem) 1rem 1.5rem;
            margin-top: clamp(2rem, 5vw, 4rem);
        }

        .footer-content { max-width: 1280px; margin: 0 auto; }
        .footer-grid {
            display: grid;
            gap: clamp(1.5rem, 4vw, 3rem);
            margin-bottom: 2rem;
        }
        @media (min-width: 768px) {
            .footer-grid { grid-template-columns: repeat(3, 1fr); }
        }

        .footer-column h4 {
            color: var(--white);
            font-size: 1.125rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-links { list-style: none; }
        .footer-links li { margin-bottom: 0.5rem; }
        .footer-links a {
            color: var(--gray-400);
            text-decoration: none;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-height: 44px;
            padding: 0.25rem 0;
        }
        .footer-links a:hover {
            color: var(--white);
            transform: translateX(4px);
        }

        .footer-bottom {
            border-top: 1px solid var(--gray-800);
            padding-top: 1.5rem;
            text-align: center;
            color: var(--gray-500);
            font-size: 0.875rem;
        }
        .footer-bottom small { display: block; margin-top: 0.5rem; opacity: 0.8; }

        /* ============ MOBILE MENU ============ */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: min(320px, 85vw);
            height: 100vh;
            background: var(--white);
            z-index: 200;
            transition: right var(--transition-normal);
            padding: 1.5rem;
            box-shadow: var(--shadow-xl);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        .mobile-menu.active { right: 0; }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .mobile-menu-links {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }

        .mobile-menu-link {
            padding: 0.875rem 1rem;
            border-radius: var(--radius-md);
            color: var(--gray-700);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition-fast);
            min-height: 44px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .mobile-menu-link:hover,
        .mobile-menu-link.active {
            background: var(--primary);
            color: var(--white);
        }
        .mobile-menu-link.firstaid-button {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            justify-content: center;
            margin-top: 0.5rem;
            font-weight: 600;
        }

        .menu-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 199;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-normal);
        }
        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* ============ FIRST AID MODAL ============ */
        .firstaid-modal {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.95);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-normal);
            padding: clamp(0.5rem, 2vw, 1rem);
        }
        .firstaid-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .firstaid-modal-content {
            background: var(--white);
            border-radius: var(--radius-2xl);
            width: 100%;
            height: 95vh;
            max-height: 95vh;
            max-width: 1000px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: none;
        }

        .firstaid-modal-header {
            padding: clamp(0.75rem, 2vw, 1.25rem) clamp(1rem, 3vw, 1.5rem);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--accent), #b91c1c);
            color: white;
            flex-shrink: 0;
        }
        .firstaid-modal-header h3 {
            color: white;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: clamp(1.1rem, 3vw, 1.35rem);
        }

        .close-modal-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 2.25rem;
            height: 2.25rem;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition-fast);
            min-height: 44px;
            min-width: 44px;
        }
        .close-modal-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .firstaid-modal-body {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            flex: 1;
        }

        .firstaid-tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-200);
            background: var(--gray-50);
            flex-shrink: 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .firstaid-tabs::-webkit-scrollbar { display: none; }

        .firstaid-tab {
            flex: 0 0 auto;
            min-width: clamp(100px, 15vw, 140px);
            padding: clamp(0.75rem, 2vw, 1rem) clamp(0.875rem, 2vw, 1.25rem);
            border: none;
            background: none;
            font-family: inherit;
            font-weight: 600;
            color: var(--gray-600);
            cursor: pointer;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.375rem;
            font-size: clamp(0.85rem, 2vw, 0.95rem);
            position: relative;
            white-space: nowrap;
            min-height: 44px;
        }
        .firstaid-tab:hover { background: var(--gray-100); }
        .firstaid-tab.active {
            color: var(--accent);
            border-bottom: 3px solid var(--accent);
            background: var(--white);
        }

        .firstaid-tab-content {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: clamp(1rem, 3vw, 1.5rem);
            display: none;
            animation: fadeInUp 0.3s ease-out;
        }
        .firstaid-tab-content.active { display: block; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* First Aid Content Styles */
        .firstaid-step-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: clamp(1rem, 2.5vw, 1.5rem);
            margin-bottom: 1rem;
            transition: var(--transition-fast);
        }
        .firstaid-step-card:hover {
            transform: translateX(4px);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-md);
        }
        .firstaid-step-card h4 {
            color: var(--gray-900);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.125rem;
        }
        .firstaid-step-card p {
            font-size: 1rem;
            color: var(--gray-600);
            line-height: 1.6;
            margin: 0;
        }

        .firstaid-warning {
            background: linear-gradient(135deg, #fef3c7, #fef9c3);
            border-left: 4px solid var(--warning);
            padding: 1rem 1.25rem;
            border-radius: var(--radius-md);
            margin: 1.25rem 0;
        }
        .firstaid-warning h5 {
            color: var(--warning);
            margin-bottom: 0.375rem;
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .firstaid-tips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .firstaid-tip {
            background: linear-gradient(135deg, var(--primary-soft), var(--white));
            border-radius: var(--radius-lg);
            padding: 1.25rem;
            border: 1px solid var(--primary-light);
        }
        .firstaid-tip h5 {
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .emergency-numbers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 0.875rem;
            margin-top: 1.5rem;
        }
        .emergency-number {
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            padding: 1rem;
            text-align: center;
            transition: var(--transition-fast);
        }
        .emergency-number:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }
        .emergency-number .number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.25rem;
        }
        .emergency-number .service {
            font-weight: 600;
            color: var(--gray-800);
        }
        .emergency-number p {
            font-size: 0.85rem;
            margin: 0.375rem 0 0;
            color: var(--gray-600);
        }

        .number-list {
            list-style: none;
            padding-left: 0;
        }
        .number-list li {
            margin-bottom: 0.5rem;
            padding: 0.625rem 0.875rem;
            background: var(--gray-50);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9375rem;
        }
        .number-list .number {
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--accent);
            min-width: 3.5rem;
        }
        .number-list .service { flex: 1; font-weight: 600; color: var(--gray-800); }

        /* Icon Colors */
        .icon-red { color: var(--accent); }
        .icon-blue { color: var(--primary); }
        .icon-green { color: var(--success); }
        .icon-orange { color: var(--warning); }
        .icon-purple { color: #7c3aed; }

        /* ============ ACCESSIBILITY ============ */
        :focus-visible {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
        }

        /* Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            z-index: 1000;
            transition: top 0.3s;
        }
        .skip-link:focus { top: 0; }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            html { scroll-behavior: auto; }
        }

        /* ============ RESPONSIVE OPTIMIZATIONS ============ */
        @media (max-width: 768px) {
            .card-actions { flex-direction: column; }
            .emergency-banner { flex-direction: column; text-align: center; }
            .emergency-banner .banner-content { justify-content: center; }
            .grid { grid-template-columns: 1fr; }
            .firstaid-tips { grid-template-columns: 1fr; }
            .emergency-numbers { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 480px) {
            .emergency-numbers { grid-template-columns: 1fr; }
            .test-header { flex-wrap: wrap; gap: 0.5rem; }
            .choices { gap: 0.5rem; }
            .choice { padding: 0.875rem 1rem; font-size: 0.9375rem; }
        }

        @media (min-width: 1400px) {
            .container { max-width: 1400px; }
            .page-hero h1 { font-size: 4rem; }
            .card { padding: 2.25rem; }
        }

        @media (min-width: 1920px) {
            html { font-size: 18px; }
            .container { max-width: 1600px; }
        }

        /* Hover Effects - Only on devices that support hover */
        @media (hover: hover) and (pointer: fine) {
            .card { transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; }
            .card:hover { transform: translateY(-8px); }
            .choice:hover:not(:disabled) { transform: translateX(6px); }
        }

        /* Print Styles */
        @media print {
            header, footer, .emergency-banner, .card-actions, .test-overlay, .firstaid-modal { display: none !important; }
            body { background: white; color: black; }
            .detail-section { box-shadow: none; border: 1px solid #ccc; }
        }
    </style>
</head>
<body>
    <!-- ‚ôø Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Ana i√ßeriƒüe atla</a>

    <!-- Header -->
    <header role="banner">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo" aria-label="Afet Hazƒ±rlƒ±k Ana Sayfa">
                    <div class="logo-icon compass" aria-hidden="true">üß≠</div>
                    <div class="logo-text">
                        <div class="logo-title">Afet Hazƒ±rlƒ±k</div>
                        <div class="logo-subtitle">G√ºvende Kal</div>
                    </div>
                </a>

                <!-- Desktop Navigation -->
                <nav class="nav-desktop" aria-label="Ana Navigasyon">
                    <a href="index.html" class="nav-link">üè† Ana Sayfa</a>
                    <a href="yer.html" class="nav-link">üèîÔ∏è Yer Afetleri</a>
                    <a href="su.html" class="nav-link">üåä Su Afetleri</a>
                    <a href="hava.html" class="nav-link active" aria-current="page">üå™Ô∏è Hava Afetleri</a>
                    <a href="insan.html" class="nav-link">üî• ƒ∞nsan Kaynaklƒ±</a>
                    <a href="hakkinda.html" class="nav-link">‚ÑπÔ∏è Hakkƒ±nda</a>
                    <a href="#" class="nav-link firstaid-button" id="firstAidButton" aria-label="ƒ∞lk Yardƒ±m Rehberini A√ß">
                        <span aria-hidden="true">üÜò</span>
                        ƒ∞lk Yardƒ±m
                    </a>
                </nav>

                <!-- Mobile Menu Button -->
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Men√ºy√º A√ß" aria-expanded="false" aria-controls="mobileMenu">
                    <span class="menu-line" aria-hidden="true"></span>
                    <span class="menu-line" aria-hidden="true"></span>
                    <span class="menu-line" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div class="menu-overlay" id="menuOverlay" aria-hidden="true"></div>
    <nav class="mobile-menu" id="mobileMenu" aria-label="Mobil Navigasyon">
        <div class="mobile-menu-header">
            <div class="logo">
                <div class="logo-icon compass" aria-hidden="true">üß≠</div>
                <div class="logo-text">
                    <div class="logo-title">Afet Hazƒ±rlƒ±k</div>
                </div>
            </div>
            <button id="closeMenuBtn" aria-label="Men√ºy√º Kapat" style="background:none;border:none;font-size:1.5rem;color:var(--gray-600);cursor:pointer;min-height:44px;min-width:44px;">√ó</button>
        </div>
        <div class="mobile-menu-links">
            <a href="index.html" class="mobile-menu-link">üè† Ana Sayfa</a>
            <a href="yer.html" class="mobile-menu-link">üèîÔ∏è Yer Afetleri</a>
            <a href="su.html" class="mobile-menu-link">üåä Su Afetleri</a>
            <a href="hava.html" class="mobile-menu-link active">üå™Ô∏è Hava Afetleri</a>
            <a href="insan.html" class="mobile-menu-link">üî• ƒ∞nsan Kaynaklƒ±</a>
            <a href="hakkinda.html" class="mobile-menu-link">‚ÑπÔ∏è Hakkƒ±nda</a>
            <a href="#" class="mobile-menu-link firstaid-button" id="mobileFirstAidButton">
                <span aria-hidden="true">üÜò</span>
                ƒ∞lk Yardƒ±m Rehberi
            </a>
        </div>
    </nav>

    <!-- ƒ∞LK YARDIM MODAL -->
    <div class="firstaid-modal" id="firstAidModal" role="dialog" aria-modal="true" aria-labelledby="firstAidModalTitle">
        <div class="firstaid-modal-content">
            <div class="firstaid-modal-header">
                <h3 id="firstAidModalTitle"><span aria-hidden="true">üÜò</span> Acil Durumda ƒ∞lk Yardƒ±m Rehberi</h3>
                <button class="close-modal-btn" id="closeFirstAidModal" aria-label="ƒ∞lk Yardƒ±m Rehberini Kapat">√ó</button>
            </div>

            <div class="firstaid-modal-body">
                <div class="firstaid-tabs" role="tablist" aria-label="ƒ∞lk Yardƒ±m Kategorileri">
                    <button class="firstaid-tab active" role="tab" aria-selected="true" aria-controls="basic-tab" data-tab="basic">üß† Temel Kurallar</button>
                    <button class="firstaid-tab" role="tab" aria-selected="false" aria-controls="bleeding-tab" data-tab="bleeding">ü©∏ Kanamalar</button>
                    <button class="firstaid-tab" role="tab" aria-selected="false" aria-controls="unconscious-tab" data-tab="unconscious">üò¥ Bayƒ±lma</button>
                    <button class="firstaid-tab" role="tab" aria-selected="false" aria-controls="burn-tab" data-tab="burn">üî• Yanƒ±klar</button>
                    <button class="firstaid-tab" role="tab" aria-selected="false" aria-controls="fracture-tab" data-tab="fracture">ü¶¥ Kƒ±rƒ±klar</button>
                    <button class="firstaid-tab" role="tab" aria-selected="false" aria-controls="numbers-tab" data-tab="numbers">üìû Acil Numaralar</button>
                </div>

                <!-- Temel Kurallar -->
                <div class="firstaid-tab-content active" id="basic-tab" role="tabpanel" aria-labelledby="basic-tab">
                    <h3 style="margin-bottom: 1.25rem; color: var(--accent);">ƒ∞lk Yardƒ±mƒ±n 4 Altƒ±n Kuralƒ±</h3>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-red" aria-hidden="true">1Ô∏è‚É£</span> √ñnce G√ºvenlik!</h4>
                        <p>Kendi g√ºvenliƒüinizi √∂nce saƒülayƒ±n. Elektrik, gaz, yangƒ±n, √ß√∂kme risklerini kontrol edin. Yaralƒ±yƒ± ancak g√ºvenliyse hareket ettirin.</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-blue" aria-hidden="true">2Ô∏è‚É£</span> 112'yi Hemen Ara!</h4>
                        <p><strong>Sakin ve net konu≈üun:</strong><br>
                        ‚Ä¢ Olayƒ±n t√ºr√º ve yeri (tam adres)<br>
                        ‚Ä¢ Yaralƒ± sayƒ±sƒ± ve genel durumlarƒ±<br>
                        ‚Ä¢ ƒ∞sim ve geri d√∂n√º≈ü numaranƒ±z<br>
                        ‚Ä¢ <strong>Telefonu ilk siz kapatmayƒ±n!</strong></p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-green" aria-hidden="true">3Ô∏è‚É£</span> ABC Kontrol√º Yap</h4>
                        <p><strong>A - Airway (Havayolu):</strong> Ba≈ü-√ßene pozisyonu ile havayolunu a√ß<br>
                        <strong>B - Breathing (Solunum):</strong> "Bak-Dinle-Hisset" ile 10 saniye kontrol<br>
                        <strong>C - Circulation (Dola≈üƒ±m):</strong> Nabƒ±z kontrol√º, gerekirse kalp masajƒ±</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-orange" aria-hidden="true">4Ô∏è‚É£</span> Yaralƒ±yƒ± Koru</h4>
                        <p>‚Ä¢ Bilin√ßsiz yaralƒ±larƒ± YAN YATIR (koma pozisyonu)<br>
                        ‚Ä¢ Kanamayƒ± temiz bezle BASIN√áLA durdur<br>
                        ‚Ä¢ Yaralƒ±yƒ± sƒ±cak tut ama terletme<br>
                        ‚Ä¢ ASLA su/yiyecek verme (boƒüulma riski)</p>
                    </div>

                    <div class="firstaid-warning" role="alert">
                        <h5><span aria-hidden="true">‚ö†Ô∏è</span> KRƒ∞Tƒ∞K UYARI</h5>
                        <p>‚Ä¢ Boyun/omurga yaralanmasƒ± ≈ü√ºphesinde HAREKET ETTƒ∞RME<br>
                        ‚Ä¢ G√∂ze cisim batmƒ±≈üsa √áIKARMAYA √áALI≈ûMA<br>
                        ‚Ä¢ Yanƒ±k √ºzerine di≈ü macunu/yoƒüurt S√úRME<br>
                        ‚Ä¢ Elektrik √ßarpmasƒ±nda yaralƒ±ya DOKUNMADAN √∂nce elektriƒüi kes</p>
                    </div>
                </div>

                <!-- Kanamalar -->
                <div class="firstaid-tab-content" id="bleeding-tab" role="tabpanel" aria-labelledby="bleeding-tab">
                    <h3 style="margin-bottom: 1.25rem; color: var(--accent);">Kanamalarda Hayat Kurtaran M√ºdahale</h3>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-red" aria-hidden="true">ü©∏</span> ƒ∞√ß Kanama Belirtileri</h4>
                        <p>‚Ä¢ Soluk, soƒüuk, terli cilt<br>
                        ‚Ä¢ Hƒ±zlƒ±/zayƒ±f nabƒ±z, hƒ±zlƒ±/y√ºzeysel solunum<br>
                        ‚Ä¢ Ba≈ü d√∂nmesi, baygƒ±nlƒ±k, ≈üok<br>
                        ‚Ä¢ Karƒ±nda hassasiyet/≈üi≈ülik</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-blue" aria-hidden="true">üéØ</span> Dƒ±≈ü Kanama Kontrol√º (Sƒ±rasƒ±yla!)</h4>
                        <p><strong>1. Direkt Basƒ±n√ß:</strong> Temiz bez/gazlƒ± bezle yaraya 5-10 dk s√ºrekli basƒ±n√ß<br>
                        <strong>2. Y√ºksekte Tutma:</strong> Kanayan b√∂lgeyi kalp seviyesinden yukarƒ± kaldƒ±r<br>
                        <strong>3. Basƒ±n√ß Noktasƒ±:</strong> Atardamar kanamasƒ±nda yaraya yakƒ±n basƒ±n√ß noktasƒ±na bas<br>
                        <strong>4. Turnike (SON √áARE):</strong> Sadece hayati tehlike varsa, geni≈ü bezle, saatini not et</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-green" aria-hidden="true">‚ö†Ô∏è</span> Turnike Kullanƒ±m Kurallarƒ±</h4>
                        <p>‚Ä¢ Sadece kol/bacakta, atardamar kanamasƒ±nda<br>
                        ‚Ä¢ Yaradan 5-10 cm yukarƒ±ya, geni≈ü bezle (min. 5cm)<br>
                        ‚Ä¢ Uygulama saatini YAZ ve g√∂r√ºn√ºr yere yapƒ±≈ütƒ±r<br>
                        ‚Ä¢ 15-20 dk'da bir 10-15 sn GEV≈ûET (doku √∂l√ºm√ºn√º √∂nlemek i√ßin)<br>
                        ‚Ä¢ <strong>Asla ip/tel kullanma!</strong></p>
                    </div>

                    <div class="firstaid-warning" role="alert">
                        <h5><span aria-hidden="true">‚ùå</span> KANAMALARDA ASLA!</h5>
                        <p>‚Ä¢ Tent√ºrdiyot/alkol/pamuk YARAYA D√ñKME/BASMA<br>
                        ‚Ä¢ Batmƒ±≈ü cisimleri √áIKARMAYA √ßalƒ±≈üma<br>
                        ‚Ä¢ Turnikeyi gereksiz sƒ±kma veya uzun s√ºre gev≈üetmeden bƒ±rakma<br>
                        ‚Ä¢ Kanayan yarayƒ± yƒ±kamaya √ßalƒ±≈üma (kontroll√º ortamda)</p>
                    </div>
                </div>

                <!-- Bayƒ±lma -->
                <div class="firstaid-tab-content" id="unconscious-tab" role="tabpanel" aria-labelledby="unconscious-tab">
                    <h3 style="margin-bottom: 1.25rem; color: var(--accent);">Bilin√ß Kaybƒ± ve Kalp Masajƒ±</h3>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-red" aria-hidden="true">üò¥</span> Bilin√ß Kontrol Protokol√º</h4>
                        <p>1. <strong>G√ºvenlik:</strong> √áevreyi kontrol et, tehlike yoksa yakla≈ü<br>
                        2. <strong>Uyarma:</strong> Omuzlardan hafif salla, y√ºksek sesle "ƒ∞yi misiniz?" de<br>
                        3. <strong>Yanƒ±t yoksa:</strong> 112'yi ara veya arat, AED varsa getir<br>
                        4. <strong>Solunum:</strong> Ba≈ü-√ßene pozisyonu, 10 sn "Bak-Dinle-Hisset"<br>
                        5. <strong>Nabƒ±z:</strong> ≈ûah damarƒ±ndan 10 sn kontrol</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-blue" aria-hidden="true">üîÑ</span> Koma Pozisyonu (Yan Yatƒ±≈ü)</h4>
                        <p>1. Yaralƒ±yƒ± sƒ±rt√ºst√º yatƒ±r, yakƒ±n kolunu ba≈ü hizasƒ±nda uzat<br>
                        2. Uzak kolunu yanaƒüƒ±nƒ±n altƒ±na koy (avu√ß i√ßi yukarƒ±)<br>
                        3. Uzak bacaƒüƒ±nƒ± dizden b√ºk, ayaƒüƒ± yere basar pozisyonda<br>
                        4. Omuz ve kal√ßadan tutarak YAVA≈û√áA yan yatƒ±r<br>
                        5. Ba≈üƒ±nƒ± geriye yatƒ±r, √ßeneyi yukarƒ± kaldƒ±r (havayolu a√ßƒ±k)</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-green" aria-hidden="true">üíì</span> Yeti≈ükin CPR (30:2 Kuralƒ±)</h4>
                        <p><strong>Pozisyon:</strong> Diz √ß√∂k, g√∂ƒü√ºs ortasƒ±na (sternum alt yarƒ±sƒ±)<br>
                        <strong>Basƒ±:</strong> Dirsekler dik, omuzlar ellerin √ºst√ºnde<br>
                        <strong>Derinlik:</strong> 5-6 cm √ß√∂kme, tam geri bƒ±rak<br>
                        <strong>Hƒ±z:</strong> Dakikada 100-120 basƒ± (Stayin' Alive ritmi)<br>
                        <strong>D√∂ng√º:</strong> 30 basƒ± ‚Üí 2 suni solunum ‚Üí tekrarla<br>
                        <strong>Suni Solunum:</strong> Burunu kapat, aƒüƒ±zdan 1 sn √ºfle, g√∂ƒü√ºs kalksƒ±n</p>
                    </div>

                    <div class="firstaid-tips">
                        <div class="firstaid-tip">
                            <h5><span aria-hidden="true">üë∂</span> Bebek CPR</h5>
                            <p>2 parmakla g√∂ƒü√ºs ortasƒ±na bas. 30:2. G√∂ƒü√ºs 4 cm √ß√∂ks√ºn. Aƒüƒ±z-burun birlikte √ºfle.</p>
                        </div>
                        <div class="firstaid-tip">
                            <h5><span aria-hidden="true">üßí</span> √áocuk CPR</h5>
                            <p>1 veya 2 elle g√∂ƒü√ºs ortasƒ±na bas. 30:2. G√∂ƒü√ºs 5 cm √ß√∂ks√ºn. Aƒüƒ±zdan aƒüƒ±za √ºfle.</p>
                        </div>
                        <div class="firstaid-tip">
                            <h5><span aria-hidden="true">ü§∞</span> Hamile/Kilo Fazla</h5>
                            <p>Elleri g√∂ƒü√ºs kemiƒüinin daha √ºst kƒ±smƒ±na yerle≈ütir. Basƒ± derinliƒüi aynƒ± kalsƒ±n.</p>
                        </div>
                    </div>
                </div>

                <!-- Yanƒ±klar -->
                <div class="firstaid-tab-content" id="burn-tab" role="tabpanel" aria-labelledby="burn-tab">
                    <h3 style="margin-bottom: 1.25rem; color: var(--accent);">Yanƒ±k Dereceleri ve ƒ∞lk Yardƒ±m</h3>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-red" aria-hidden="true">üî•</span> 1. Derece (Y√ºzeysel)</h4>
                        <p><strong>Belirti:</strong> Kƒ±zarƒ±klƒ±k, hafif ≈üi≈ü, aƒürƒ±lƒ±, kabarcƒ±k YOK<br>
                        <strong>M√ºdahale:</strong><br>
                        1. 15-20 dk SOƒûUK (buz deƒüil!) su altƒ±nda tut<br>
                        2. Temiz, kuru bezle hafif√ße kurul<br>
                        3. Yanƒ±k kremi/sprey uygula<br>
                        4. Steril gazlƒ± bezle gev≈üek √∂rt</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-blue" aria-hidden="true">üî•</span> 2. Derece (Kƒ±smi Kalƒ±nlƒ±k)</h4>
                        <p><strong>Belirti:</strong> ƒ∞√ßi sƒ±vƒ± dolu kabarcƒ±klar, ≈üiddetli aƒürƒ±, nemli g√∂r√ºn√ºm<br>
                        <strong>M√ºdahale:</strong><br>
                        1. Soƒüuk su uygulamasƒ±na devam et<br>
                        2. <strong>Kabarcƒ±klarƒ± ASLA patlatma!</strong><br>
                        3. Yapƒ±≈ümayan steril √∂rt√º ile kapat<br>
                        4. Y√ºz/el/ayak/genital b√∂lge ise ACƒ∞L SERVƒ∞S</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-green" aria-hidden="true">üî•</span> 3. Derece (Tam Kalƒ±nlƒ±k)</h4>
                        <p><strong>Belirti:</strong> Beyaz/k√∂m√ºrle≈ümi≈ü deri, aƒürƒ± YOK (sinirler yandƒ±)<br>
                        <strong>M√ºdahale:</strong><br>
                        1. HEMEN 112'yi ara<br>
                        2. Yanƒ±k b√∂lgeyi temiz, kuru bezle √∂rt<br>
                        3. Yaralƒ±yƒ± ≈üoka kar≈üƒ± sƒ±cak tut<br>
                        4. <strong>Su/ila√ß/krem UYGULAMA</strong><br>
                        5. Takƒ±larƒ±/yapƒ±≈ümayan giysileri √ßƒ±kar</p>
                    </div>

                    <div class="firstaid-warning" role="alert">
                        <h5><span aria-hidden="true">‚ùå</span> YANIKLARDA KRƒ∞Tƒ∞K HATALAR</h5>
                        <p>‚Ä¢ Di≈ü macunu/yoƒüurt/sal√ßa/yaƒü S√úRME (enfeksiyon riski)<br>
                        ‚Ä¢ Buz DOƒûRUDAN uygulama (doku hasarƒ±)<br>
                        ‚Ä¢ Kabarcƒ±klarƒ± patlatma (enfeksiyon kapƒ±sƒ±)<br>
                        ‚Ä¢ Yapƒ±≈ükan pansuman/bant kullanma<br>
                        ‚Ä¢ Kimyasal yanƒ±kta suyla yƒ±kamadan √∂nce etiketi okuma</p>
                    </div>
                </div>

                <!-- Kƒ±rƒ±klar -->
                <div class="firstaid-tab-content" id="fracture-tab" role="tabpanel" aria-labelledby="fracture-tab">
                    <h3 style="margin-bottom: 1.25rem; color: var(--accent);">Kƒ±rƒ±k/√áƒ±kƒ±k/Burulma Y√∂netimi</h3>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-red" aria-hidden="true">ü¶¥</span> Kƒ±rƒ±k Belirtileri</h4>
                        <p>‚Ä¢ ≈ûiddetli, hareketle artan aƒürƒ±<br>
                        ‚Ä¢ ≈ûi≈ülik, morarma, ≈üekil bozukluƒüu<br>
                        ‚Ä¢ Hareket kƒ±sƒ±tlƒ±lƒ±ƒüƒ±, fonksiyon kaybƒ±<br>
                        ‚Ä¢ Krepitasyon (kƒ±rƒ±k sesi/hissi)<br>
                        ‚Ä¢ A√ßƒ±k kƒ±rƒ±kta kemik u√ßlarƒ± g√∂r√ºlebilir</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-blue" aria-hidden="true">ü©π</span> Kapalƒ± Kƒ±rƒ±k ƒ∞lk Yardƒ±mƒ±</h4>
                        <p>1. Yaralƒ± b√∂lgeyi HAREKET ETTƒ∞RME<br>
                        2. Kƒ±rƒ±k √ºst√º ve altƒ± eklemleri SABƒ∞TLE (atel)<br>
                        3. Soƒüuk uygulama (buz torbasƒ±, 15-20 dk)<br>
                        4. B√∂lgeyi kalp seviyesinden YUKARI tut<br>
                        5. ≈ûok √∂nlemi: Sƒ±cak tut, bacaklarƒ± 30 cm kaldƒ±r<br>
                        6. ACƒ∞L SERVƒ∞S'e ula≈ütƒ±r</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-green" aria-hidden="true">‚ö†Ô∏è</span> A√ßƒ±k Kƒ±rƒ±k Protokol√º</h4>
                        <p>1. Kanama kontrol√º: Temiz bezle BASIN√á (kemik u√ßlarƒ±na basma)<br>
                        2. Dƒ±≈üarƒ± √ßƒ±kan kemikleri ASLA i√ßeri itme<br>
                        3. Temiz, nemli gazlƒ± bezle √∂rt (kurumasƒ±n)<br>
                        4. Atel uygularken yumu≈üak destek kullan<br>
                        5. Tetanos a≈üƒ±sƒ± durumu sor, not et<br>
                        6. HEMEN 112</p>
                    </div>

                    <div class="firstaid-step-card">
                        <h4><span class="icon-orange" aria-hidden="true">üìè</span> Atel Uygulama Prensipleri</h4>
                        <p>‚Ä¢ Kƒ±rƒ±k √ºst√º ve altƒ± EKLEMƒ∞ i√ßine alacak uzunlukta<br>
                        ‚Ä¢ Sert malzeme (tahta/karton) + yumu≈üak destek<br>
                        ‚Ä¢ Sargƒ± √ßok sƒ±kƒ± olmasƒ±n (parmaklar a√ßƒ±kta kalsƒ±n)<br>
                        ‚Ä¢ Dola≈üƒ±m kontrol√º: Parmaklar pembe, sƒ±cak, his var mƒ±?<br>
                        ‚Ä¢ 20 dk'da bir kontrol et, morarma/uyu≈üma varsa gev≈üet</p>
                    </div>
                </div>

                <!-- Acil Numaralar -->
                <div class="firstaid-tab-content" id="numbers-tab" role="tabpanel" aria-labelledby="numbers-tab">
                    <h3 style="margin-bottom: 1.25rem; color: var(--accent);">Hayat Kurtaran Acil Numaralar</h3>

                    <div class="emergency-numbers">
                        <div class="emergency-number">
                            <div class="number">112</div>
                            <div class="service">ACƒ∞L √áAƒûRI MERKEZƒ∞</div>
                            <p>T√ºm tƒ±bbi aciller, ambulans, itfaiye, polis y√∂nlendirmesi</p>
                        </div>
                        <div class="emergency-number">
                            <div class="number">110</div>
                            <div class="service">ƒ∞TFAƒ∞YE</div>
                            <p>Yangƒ±n, kurtarma, tehlikeli madde, asans√∂rde kalma</p>
                        </div>
                        <div class="emergency-number">
                            <div class="number">155</div>
                            <div class="service">POLƒ∞S ƒ∞MDAT</div>
                            <p>Asayi≈ü, trafik kazasƒ±, su√ß ihbarƒ±, kayƒ±p ≈üahƒ±s</p>
                        </div>
                        <div class="emergency-number">
                            <div class="number">156</div>
                            <div class="service">JANDARMA</div>
                            <p>Kƒ±rsal alan g√ºvenliƒüi, k√∂y/≈üehir dƒ±≈üƒ± aciller</p>
                        </div>
                    </div>

                    <div style="margin-top: 2rem;">
                        <h4 style="color: var(--primary); margin-bottom: 0.75rem;">üìã Diƒüer Kritik Numaralar</h4>
                        <ul class="number-list">
                            <li><span class="number">184</span><span class="service">SABƒ∞M - Saƒülƒ±k Bakanlƒ±ƒüƒ± Danƒ±≈üma</span></li>
                            <li><span class="number">185</span><span class="service">ALO 185 - Su Arƒ±za/≈ûikayet</span></li>
                            <li><span class="number">186</span><span class="service">ALO 186 - Elektrik Arƒ±za</span></li>
                            <li><span class="number">187</span><span class="service">ALO 187 - Doƒüalgaz Arƒ±za</span></li>
                            <li><span class="number">153</span><span class="service">Belediye Zabƒ±ta</span></li>
                            <li><span class="number">154</span><span class="service">Trafik Denetleme</span></li>
                            <li><span class="number">144</span><span class="service">Sosyal Yardƒ±m Hattƒ±</span></li>
                        </ul>
                    </div>

                    <div class="firstaid-warning" role="alert" style="margin-top: 1.5rem;">
                        <h5><span aria-hidden="true">üì±</span> ACƒ∞L ARAMA PROTOKOL√ú</h5>
                        <p>1. <strong>SAKƒ∞N OL:</strong> Derin nefes al, net konu≈ü<br>
                        2. <strong>KONUM:</strong> "≈ûehir, il√ße, mahalle, cadde, bina no, kat" tam ver<br>
                        3. <strong>OLAY:</strong> "Ne oldu? Ka√ß yaralƒ±? Bilin√ß var mƒ±?" a√ßƒ±kla<br>
                        4. <strong>ƒ∞LETƒ∞≈ûƒ∞M:</strong> ƒ∞sim ve geri d√∂n√º≈ü numaranƒ± s√∂yle<br>
                        5. <strong>Bƒ∞RLƒ∞KTE KAPAT:</strong> Operat√∂r "tamam" demeden telefonu kapatma<br>
                        6. <strong>Y√ñNLENDƒ∞R:</strong> Bir ki≈üi kapƒ±da beklesin, ekipleri kar≈üƒ±lasƒ±n</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page Hero -->
    <section class="page-hero" role="region" aria-label="Hava Afetleri Ba≈ülƒ±k B√∂l√ºm√º">
        <div class="container">
            <div class="page-hero-content">
                <h1 class="animate-fade-in-up">üå™Ô∏è Hava Afetleri</h1>
                <p class="animate-fade-in-up animate-delay-100">
                    Kasƒ±rga, yƒ±ldƒ±rƒ±m fƒ±rtƒ±nasƒ± ve ≈üiddetli dolu gibi hava kaynaklƒ± afetler i√ßin ileri d√ºzey hazƒ±rlƒ±k rehberi ve zorlu testler
                </p>
            </div>
        </div>
    </section>

    <!-- Emergency Banner -->
    <div class="container">
        <div class="emergency-banner" role="alert" aria-live="assertive" id="emergencyBanner">
            <div class="banner-content">
                <span class="banner-icon" aria-hidden="true">üö®</span>
                <div class="banner-text">
                    <strong>ACƒ∞L DURUM: 112</strong>
                    <span>T√ºm acil durumlar i√ßin tek numara ‚Ä¢ 7/24 ‚Ä¢ √úcretsiz</span>
                </div>
            </div>
            <button class="banner-btn" id="emergencyFirstAidButton" aria-label="Acil ƒ∞lk Yardƒ±m Rehberini A√ß">
                <span aria-hidden="true">üÜò</span>
                ƒ∞lk Yardƒ±m
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content">
        <div class="container">
            <div class="section-title animate-fade-in-up">
                <h2>Hava Afeti T√ºrleri</h2>
                <p class="animate-fade-in-up animate-delay-100">
                    Bir afet t√ºr√º se√ßerek detaylƒ± bilgi alƒ±n veya zorlu test ile bilginizi sƒ±nayƒ±n
                </p>
            </div>

            <div class="grid grid-cols-3">
                <!-- Kasƒ±rga Kartƒ± -->
                <article class="card animate-fade-in-up" data-type="kasirga" id="kasirga-card" role="button" tabindex="0" aria-label="Kasƒ±rga: Bilgi ve Test">
                    <div class="card-icon" aria-hidden="true">üå™Ô∏è</div>
                    <h3>Kasƒ±rga</h3>
                    <p>≈ûiddetli d√∂nen r√ºzgar sistemleri, saatte 300 km+ hƒ±z, yapƒ±sal hasar riski. Bodrum g√ºvenliƒüi, pencere korumasƒ±, acil eylem planƒ±.</p>
                    <div class="card-actions">
                        <button class="card-btn primary" onclick="startTest('kasirga')" aria-label="Kasƒ±rga Testini Ba≈ülat">
                            <span aria-hidden="true">‚ñ∂Ô∏è</span> Testi Ba≈ülat
                        </button>
                        <button class="card-btn secondary" onclick="showInfo('kasirga')" aria-label="Kasƒ±rga Hakkƒ±nda Detaylƒ± Bilgi">
                            <span aria-hidden="true">üìö</span> Bilgi Al
                        </button>
                    </div>
                </article>

                <!-- Yƒ±ldƒ±rƒ±m Kartƒ± -->
                <article class="card animate-fade-in-up animate-delay-100" data-type="yildirim" id="yildirim-card" role="button" tabindex="0" aria-label="Yƒ±ldƒ±rƒ±m Fƒ±rtƒ±nasƒ±: Bilgi ve Test">
                    <div class="card-icon" aria-hidden="true">‚ö°</div>
                    <h3>Yƒ±ldƒ±rƒ±m Fƒ±rtƒ±nasƒ±</h3>
                    <p>1 milyar volt elektrik bo≈üalmasƒ±, 30.000¬∞C sƒ±caklƒ±k. Kapalƒ± alan g√ºvenliƒüi, uzaklƒ±k hesaplama, a√ßƒ±k alan korunma taktikleri.</p>
                    <div class="card-actions">
                        <button class="card-btn primary" onclick="startTest('yildirim')" aria-label="Yƒ±ldƒ±rƒ±m Testini Ba≈ülat">
                            <span aria-hidden="true">‚ñ∂Ô∏è</span> Testi Ba≈ülat
                        </button>
                        <button class="card-btn secondary" onclick="showInfo('yildirim')" aria-label="Yƒ±ldƒ±rƒ±m Hakkƒ±nda Detaylƒ± Bilgi">
                            <span aria-hidden="true">üìö</span> Bilgi Al
                        </button>
                    </div>
                </article>

                <!-- Dolu Kartƒ± -->
                <article class="card animate-fade-in-up animate-delay-200" data-type="dolu" id="dolu-card" role="button" tabindex="0" aria-label="≈ûiddetli Dolu: Bilgi ve Test">
                    <div class="card-icon" aria-hidden="true">üå®Ô∏è</div>
                    <h3>≈ûiddetli Dolu</h3>
                    <p>Tenis topu b√ºy√ºkl√ºƒü√ºnde buz par√ßalarƒ±, ara√ß/cam hasarƒ±. Ara√ß koruma, bitki/hayvan √∂nlemleri, dolu sonrasƒ± hasar deƒüerlendirmesi.</p>
                    <div class="card-actions">
                        <button class="card-btn primary" onclick="startTest('dolu')" aria-label="Dolu Testini Ba≈ülat">
                            <span aria-hidden="true">‚ñ∂Ô∏è</span> Testi Ba≈ülat
                        </button>
                        <button class="card-btn secondary" onclick="showInfo('dolu')" aria-label="Dolu Hakkƒ±nda Detaylƒ± Bilgi">
                            <span aria-hidden="true">üìö</span> Bilgi Al
                        </button>
                    </div>
                </article>
            </div>

            <!-- Detail Section -->
            <section class="detail-section animate-fade-in-up" id="detailSection" style="display: none;" aria-live="polite">
                <h2 id="detailTitle">Afet Bilgisi</h2>
                <div class="info-content" id="detailContent">
                    <!-- ƒ∞√ßerik JavaScript ile g√ºvenli ≈üekilde doldurulacak -->
                </div>
                <button class="card-btn primary" style="margin-top: 2rem;" onclick="hideInfo()" aria-label="Ana Sayfaya D√∂n">
                    <span aria-hidden="true">‚Üê</span> Geri D√∂n
                </button>
            </section>
        </div>
    </main>

    <!-- Fullscreen Test Overlay -->
    <div class="test-overlay" id="testOverlay" role="dialog" aria-modal="true" aria-labelledby="testTitle">
        <div class="test-header">
            <h2 id="testTitle">Test</h2>
            <button class="small-close-btn" onclick="closeTest()" aria-label="Testi Kapat ve √áƒ±k">‚úï</button>
        </div>
        <div class="test-content" id="testContent">
            <!-- Test i√ßeriƒüi JavaScript ile doldurulacak -->
        </div>
    </div>

    <!-- Footer -->
    <footer role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-grid">
                    <div class="footer-column">
                        <h4><span aria-hidden="true">üö®</span> Afet Hazƒ±rlƒ±k</h4>
                        <p style="color: var(--gray-400); margin-bottom: 1.25rem;">
                            Doƒüal afetlere hazƒ±rlƒ±k i√ßin g√ºvenilir rehber. Bilim temelli, pratik bilgilerle hayat kurtarƒ±n.
                        </p>
                        <button id="footerFirstAidButton" style="background: linear-gradient(135deg, var(--accent), var(--accent-light)); color: white; border: none; padding: 0.75rem 1.25rem; border-radius: var(--radius-md); cursor: pointer; display: flex; align-items: center; gap: 0.5rem; font-weight: 600; transition: all 0.3s ease; width: 100%; justify-content: center; min-height: 44px;" aria-label="ƒ∞lk Yardƒ±m Rehberini A√ß">
                            <span aria-hidden="true">üÜò</span>
                            ƒ∞lk Yardƒ±m Rehberi
                        </button>
                    </div>

                    <div class="footer-column">
                        <h4><span aria-hidden="true">üîó</span> Hƒ±zlƒ± Eri≈üim</h4>
                        <ul class="footer-links">
                            <li><a href="index.html"><span aria-hidden="true">üè†</span> Ana Sayfa</a></li>
                            <li><a href="yer.html"><span aria-hidden="true">üèîÔ∏è</span> Yer Afetleri</a></li>
                            <li><a href="su.html"><span aria-hidden="true">üåä</span> Su Afetleri</a></li>
                            <li><a href="hava.html"><span aria-hidden="true">üå™Ô∏è</span> Hava Afetleri</a></li>
                            <li><a href="insan.html"><span aria-hidden="true">üî•</span> ƒ∞nsan Kaynaklƒ±</a></li>
                            <li><a href="hakkinda.html"><span aria-hidden="true">‚ÑπÔ∏è</span> Hakkƒ±nda</a></li>
                        </ul>
                    </div>

                    <div class="footer-column">
                        <h4><span aria-hidden="true">üìû</span> Resmi Kaynaklar</h4>
                        <ul class="footer-links">
                            <li><a href="https://www.afad.gov.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">üèõÔ∏è</span> AFAD</a></li>
                            <li><a href="https://www.mgm.gov.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">üå§Ô∏è</span> Meteoroloji</a></li>
                            <li><a href="https://www.112.gov.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">üö®</span> 112 Acil</a></li>
                            <li><a href="https://www.kizilay.org.tr" target="_blank" rel="noopener noreferrer"><span aria-hidden="true">‚ù§Ô∏è</span> Kƒ±zƒ±lay</a></li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p>¬© 2026 Afet Hazƒ±rlƒ±k Rehberi<br>
                    <small>Bilgilendirme ama√ßlƒ±dƒ±r. Acil durumlarda derhal 112'yi arayƒ±nƒ±z.</small></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Leaflet JS (CDN Fallback ile) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin="anonymous"
            onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js';">
    </script>

    <script>
        // ==================== G√úVENLƒ∞ BA≈ûLANGI√á & UTILS ====================
        
        // XSS Korumasƒ±: DOMPurify fallback
        const sanitize = (html) => {
            if (typeof DOMPurify !== 'undefined') {
                return DOMPurify.sanitize(html, { ALLOWED_TAGS: ['p','strong','em','br','ul','ol','li','h3','h4','h5','div','span','a'], ALLOWED_ATTR: ['href','target','rel','style'] });
            }
            // Fallback: Basic sanitization (production'da DOMPurify ≈üart!)
            return html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
                      .replace(/javascript:/gi, '')
                      .replace(/on\w+=/gi, '');
        };

        // Fisher-Yates Shuffle - Test ≈üƒ±klarƒ±nƒ± karƒ±≈ütƒ±rmak i√ßin
        const shuffleArray = (array) => {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        };

        // Debounce Utility
        const debounce = (func, wait) => {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        };

        // ==================== MOBƒ∞L MEN√ú Sƒ∞STEMƒ∞ ====================
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const closeMenuBtn = document.getElementById('closeMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        const menuOverlay = document.getElementById('menuOverlay');

        const toggleMobileMenu = () => {
            const isActive = mobileMenu.classList.toggle('active');
            menuOverlay.classList.toggle('active', isActive);
            mobileMenuBtn.setAttribute('aria-expanded', isActive);
            menuOverlay.setAttribute('aria-hidden', !isActive);
            document.body.style.overflow = isActive ? 'hidden' : '';
            
            // Odak y√∂netimi
            if (isActive) {
                mobileMenu.querySelector('.mobile-menu-link')?.focus();
            }
        };

        mobileMenuBtn?.addEventListener('click', toggleMobileMenu);
        closeMenuBtn?.addEventListener('click', toggleMobileMenu);
        menuOverlay?.addEventListener('click', toggleMobileMenu);
        
        // Escape tu≈üu ile men√º kapatma
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
                toggleMobileMenu();
                mobileMenuBtn.focus();
            }
        });

        // ==================== KART ETKƒ∞LE≈ûƒ∞MLERƒ∞ ====================
        document.querySelectorAll('.card').forEach(card => {
            // Klavye ile eri≈üilebilirlik
            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    if (!e.target.closest('button')) {
                        const type = card.getAttribute('data-type');
                        showInfo(type);
                    }
                }
            });
            
            // Tƒ±klama: Buton deƒüilse bilgi g√∂ster
            card.addEventListener('click', (e) => {
                if (!e.target.closest('button')) {
                    const type = card.getAttribute('data-type');
                    showInfo(type);
                }
            });
        });

        // ==================== ƒ∞LK YARDIM MODAL Sƒ∞STEMƒ∞ ====================
        const firstAidModal = document.getElementById('firstAidModal');
        const firstAidButtons = [
            document.getElementById('firstAidButton'),
            document.getElementById('mobileFirstAidButton'), 
            document.getElementById('emergencyFirstAidButton'),
            document.getElementById('footerFirstAidButton')
        ].filter(btn => btn);
        const closeFirstAidModalBtn = document.getElementById('closeFirstAidModal');
        const firstAidTabs = document.querySelectorAll('.firstaid-tab');
        const firstAidTabContents = document.querySelectorAll('.firstaid-tab-content');

        const openFirstAidModal = () => {
            firstAidModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            document.body.style.position = 'fixed';
            document.body.style.inset = '0';
            // Odak tuzaƒüƒ± i√ßin ilk butona odaklan
            closeFirstAidModalBtn?.focus();
            // Varsayƒ±lan tab'ƒ± aktif et
            switchFirstAidTab('basic');
        };

        const closeFirstAidModal = () => {
            firstAidModal.classList.remove('active');
            document.body.style.overflow = '';
            document.body.style.position = '';
            document.body.style.inset = '';
        };

        const switchFirstAidTab = (tabName) => {
            // Tab butonlarƒ±nƒ± g√ºncelle
            firstAidTabs.forEach(tab => {
                const isActive = tab.dataset.tab === tabName;
                tab.classList.toggle('active', isActive);
                tab.setAttribute('aria-selected', isActive);
            });
            
            // ƒ∞√ßerikleri g√ºncelle
            firstAidTabContents.forEach(content => {
                const isActive = content.id === `${tabName}-tab`;
                content.classList.toggle('active', isActive);
                content.setAttribute('aria-hidden', !isActive);
            });
            
            // ƒ∞√ßeriƒüi en √ºste kaydƒ±r
            const activeContent = document.getElementById(`${tabName}-tab`);
            if (activeContent) activeContent.scrollTop = 0;
        };

        // Event Listener'larƒ± g√ºvenli ≈üekilde ekle
        firstAidButtons.forEach(btn => {
            btn?.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                openFirstAidModal();
                // Mobil men√º a√ßƒ±ksa kapat
                if (mobileMenu?.classList.contains('active')) toggleMobileMenu();
            });
        });

        closeFirstAidModalBtn?.addEventListener('click', closeFirstAidModal);
        
        // Modal dƒ±≈üƒ±na tƒ±klayarak kapatma
        firstAidModal?.addEventListener('click', (e) => {
            if (e.target === firstAidModal) closeFirstAidModal();
        });
        
        // Tab tƒ±klamalarƒ±
        firstAidTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                switchFirstAidTab(tab.dataset.tab);
            });
            // Klavye navigasyonu
            tab.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
                    e.preventDefault();
                    const tabs = Array.from(firstAidTabs);
                    const currentIndex = tabs.indexOf(tab);
                    const nextIndex = e.key === 'ArrowRight' 
                        ? (currentIndex + 1) % tabs.length 
                        : (currentIndex - 1 + tabs.length) % tabs.length;
                    tabs[nextIndex].focus();
                    switchFirstAidTab(tabs[nextIndex].dataset.tab);
                }
            });
        });
        
        // Escape ile modal kapatma
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && firstAidModal?.classList.contains('active')) {
                closeFirstAidModal();
            }
        });

        // ==================== Bƒ∞LGƒ∞ ƒ∞√áERƒ∞KLERƒ∞ (G√ºvenli HTML) ====================
        const infoData = {
            kasirga: {
                title: "üå™Ô∏è Kasƒ±rga: ƒ∞leri D√ºzey Hazƒ±rlƒ±k Rehberi",
                content: `
                    <div style="line-height: 1.7;">
                        <div style="background: linear-gradient(135deg, var(--primary-soft), var(--white)); padding: clamp(1rem, 2.5vw, 2rem); border-radius: var(--radius-lg); margin-bottom: 1.5rem; border-left: 4px solid var(--primary);">
                            <h3 style="color: var(--primary-dark); margin-bottom: 0.75rem;">üìñ Kasƒ±rga Nedir?</h3>
                            <p><strong>Kasƒ±rga</strong>, s√ºper h√ºcreli konvektif fƒ±rtƒ±nalarla olu≈üan, saatte 300 km'yi a≈üan r√ºzgar hƒ±zlarƒ±na ula≈üabilen, d√∂nen hava kolonlarƒ±dƒ±r. EF-5 ≈üiddetinde bir kasƒ±rga, betonarme binalarƒ± bile yerle bir edebilir.</p>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">üõ°Ô∏è √áok Katmanlƒ± Korunma Stratejisi</h3>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--warning);">üìã</span> √ñncesi: Proaktif Hazƒ±rlƒ±k</h4>
                            <p>‚Ä¢ <strong>Yapƒ±sal:</strong> Pencereler i√ßin kasƒ±rga panelleri (plywood ‚â• 15mm), √ßatƒ± baƒülarƒ± g√º√ßlendirme<br>
                            ‚Ä¢ <strong>Acil √áanta:</strong> 72 saatlik su (4L/ki≈üi/g√ºn), y√ºksek kalorili gƒ±da, ilk yardƒ±m, el feneri (dynamo), radyo, yedek pil, √∂nemli belgeler su ge√ßirmez po≈üette<br>
                            ‚Ä¢ <strong>Plan:</strong> Bodrum/i√ß oda toplanma noktasƒ±, aile ileti≈üim protokol√º, kom≈üu destek aƒüƒ±<br>
                            ‚Ä¢ <strong>Uygulama:</strong> Dƒ±≈ü e≈üyalarƒ± sabitle, bah√ße aƒüa√ßlarƒ±nƒ± budayƒ±n, drenaj kontrol√º</p>
                        </div>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--accent);">‚ö°</span> Sƒ±rasƒ±nda: Kritik Eylemler</h4>
                            <p>‚Ä¢ <strong>Konum:</strong> En i√ß odada, bodrumda, penceresiz banyo/tuvalette kal<br>
                            ‚Ä¢ <strong>Korunma:</strong> Ba≈üƒ±nƒ±zƒ± yastƒ±k/kask ile koruyun, aƒüƒ±r mobilya altƒ±na girin<br>
                            ‚Ä¢ <strong>Tehlikeler:</strong> Pencerelerden/cam kapƒ±lardan UZAK durun, asans√∂r KULLANMAYIN<br>
                            ‚Ä¢ <strong>Elektrik:</strong> Ana ≈üalteri indirin, cihazlarƒ± fi≈üten √ßekin<br>
                            ‚Ä¢ <strong>ƒ∞leti≈üim:</strong> SMS tercih edin (aƒü yoƒüunluƒüunda daha g√ºvenilir)</p>
                        </div>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--success);">‚úÖ</span> Sonrasƒ±: G√ºvenli ƒ∞yile≈üme</h4>
                            <p>‚Ä¢ <strong>√áƒ±kƒ±≈ü:</strong> Yetkili onayƒ± olmadan dƒ±≈üarƒ± √ßƒ±kmayƒ±n<br>
                            ‚Ä¢ <strong>Tehlike Tarama:</strong> Kopuk elektrik telleri (en az 10m uzak), gaz ka√ßaƒüƒ± (koku varsa vanayƒ± kapat, a√ßƒ±k ate≈ü yakma), yapƒ±sal hasar (uzman kontrol√º)<br>
                            ‚Ä¢ <strong>ƒ∞lk Yardƒ±m:</strong> Kanama, kƒ±rƒ±k, ≈üok belirtilerini kontrol et, 112'yi bilgilendir<br>
                            ‚Ä¢ <strong>Belgeleme:</strong> Hasar fotoƒüraflarƒ± √ßek, sigorta i√ßin kaydet</p>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">‚ö†Ô∏è Kasƒ±rga Tehlike Matrisi</h3>
                        <div class="info-grid">
                            <div class="info-card">
                                <strong>üí® R√ºzgar</strong>
                                <p>300+ km/s: Aƒüa√ßlar k√∂kten s√∂k√ºl√ºr, ara√ßlar savrulur</p>
                            </div>
                            <div class="info-card">
                                <strong>üöÄ Projektil</strong>
                                <p>Cam/tahta/metal par√ßalarƒ± √∂l√ºmc√ºl hƒ±zda u√ßar</p>
                            </div>
                            <div class="info-card">
                                <strong>üèöÔ∏è Yapƒ±sal</strong>
                                <p>√áatƒ± u√ßmasƒ±, duvar yƒ±kƒ±lmasƒ±, temel hasarƒ±</p>
                            </div>
                            <div class="info-card">
                                <strong>üîå Altyapƒ±</strong>
                                <p>Elektrik/su/ileti≈üim kesintileri g√ºnlerce s√ºrebilir</p>
                            </div>
                        </div>
                        
                        <div class="firstaid-warning" role="alert">
                            <h5><span>üö´</span> KRƒ∞Tƒ∞K HATALAR</h5>
                            <p>‚Ä¢ Kasƒ±rga sƒ±rasƒ±nda dƒ±≈üarƒ± √ßƒ±kƒ±p "izlemeye" √ßalƒ±≈üma<br>
                            ‚Ä¢ Ara√ßla ka√ßmaya √ßalƒ±≈üma (r√ºzgar aracƒ± savurur)<br>
                            ‚Ä¢ Pencereleri a√ßƒ±p basƒ±n√ß e≈üitlemeye √ßalƒ±≈üma (EFSANE!)<br>
                            ‚Ä¢ Asans√∂r kullanma (elektrik kesintisi + sƒ±kƒ±≈üma riski)</p>
                        </div>
                    </div>
                `
            },
            yildirim: {
                title: "‚ö° Yƒ±ldƒ±rƒ±m Fƒ±rtƒ±nasƒ±: Bilimsel Korunma Rehberi",
                content: `
                    <div style="line-height: 1.7;">
                        <div style="background: linear-gradient(135deg, #fef3c7, #fef9c3); padding: clamp(1rem, 2.5vw, 2rem); border-radius: var(--radius-lg); margin-bottom: 1.5rem; border-left: 4px solid var(--warning);">
                            <h3 style="color: var(--warning); margin-bottom: 0.75rem;">‚ö° Yƒ±ldƒ±rƒ±m Fiziƒüi</h3>
                            <p><strong>Yƒ±ldƒ±rƒ±m</strong>, bulut-yer veya bulut-bulut arasƒ±ndaki elektriksel bo≈üalmadƒ±r. Bir yƒ±ldƒ±rƒ±m darbesi: <strong>1 milyar volt</strong>, <strong>30.000¬∞C</strong> (G√ºne≈ü y√ºzeyinden 5x sƒ±cak), <strong>30.000 amper</strong> akƒ±m ta≈üƒ±yabilir. √áarpma s√ºresi: ~0.2 saniye.</p>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">üéØ Risk Deƒüerlendirme: 30-30 Kuralƒ±</h3>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--warning);">üìè</span> Uzaklƒ±k Hesaplama Protokol√º</h4>
                            <p><strong>Adƒ±m 1:</strong> ≈ûim≈üek g√∂rd√ºƒü√ºn an saymaya ba≈üla<br>
                            <strong>Adƒ±m 2:</strong> G√∂k g√ºr√ºlt√ºs√ºn√º duyduƒüun an dur<br>
                            <strong>Hesap:</strong> Saniye √∑ 3 = Yakla≈üƒ±k uzaklƒ±k (km)<br>
                            <strong>30-30 Kuralƒ±:</strong> G√ºr√ºlt√º 30 sn'den az ise Rƒ∞SK Y√úKSEK ‚Üí Hemen korun. Son g√ºr√ºlt√ºden 30 dk sonra dƒ±≈üarƒ± √ßƒ±k.</p>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">üõ°Ô∏è Ortama G√∂re Korunma Stratejileri</h3>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--success);">üè†</span> Kapalƒ± Bina ƒ∞√ßinde</h4>
                            <p>‚Ä¢ Pencere/cam kapƒ±larƒ± KAPAT, uzak dur<br>
                            ‚Ä¢ Elektrikli cihazlarƒ± fi≈üten √áEK (surge koruyucu yeterli deƒüil)<br>
                            ‚Ä¢ KABLULU telefon kullanma, cep telefonu G√úVENLƒ∞<br>
                            ‚Ä¢ Banyo/du≈ü ALMA (su borularƒ± iletken)<br>
                            ‚Ä¢ ≈û√∂mine/baca kullanma (yƒ±ldƒ±rƒ±m kanalƒ± olabilir)</p>
                        </div>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--accent);">üå≥</span> A√ßƒ±k Alan Protokol√º (SON √áARE)</h4>
                            <p>‚Ä¢ Hemen kapalƒ± alana/ara√ßa SIƒûIN<br>
                            ‚Ä¢ Aƒüa√ßlardan EN AZ 30 metre uzak dur (yan √ßarpma riski)<br>
                            ‚Ä¢ Su birikintileri, metal √ßit, tel √∂rg√ºden UZAKLA≈û<br>
                            ‚Ä¢ Bisiklet/motosikletten ƒ∞N, metal e≈üyalarƒ± BIRAK<br>
                            ‚Ä¢ <strong>Doƒüru Pozisyon:</strong> Ayaklar biti≈üik, √ß√∂mel, ba≈üƒ± dizlere g√∂m, eller kulakta (toprak temasƒ±nƒ± minimize et)<br>
                            ‚Ä¢ <strong>ASLA yere yatma!</strong> (adƒ±m voltajƒ± riski)</p>
                        </div>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: #8b5cf6;">üöó</span> Ara√ß ƒ∞√ßi G√ºvenlik</h4>
                            <p>‚Ä¢ Ara√ß i√ßinde KAL (Faraday kafesi etkisi)<br>
                            ‚Ä¢ Camlarƒ± KAPAT, metal kƒ±sƒ±mlara DOKUNMA<br>
                            ‚Ä¢ Motoru √ßalƒ±≈üƒ±r durumda BIRAK (elektronik sistemler i√ßin)<br>
                            ‚Ä¢ Radyo/telefonu KULLANMA (gereksiz risk)<br>
                            ‚Ä¢ Dolu varsa: Camlardan uzak, √∂n cama sƒ±rtƒ±nƒ± d√∂n</p>
                        </div>
                        
                        <div class="firstaid-warning" role="alert">
                            <h5><span>‚ùå</span> YILDIRIMDA √ñL√úMC√úL HATALAR</h5>
                            <p>‚Ä¢ A√ßƒ±k alanda grup halinde DURMA (zincirleme √ßarpma)<br>
                            ‚Ä¢ ≈ûemsiye, golf sopasƒ±, balƒ±k oltasƒ± TA≈ûIMA<br>
                            ‚Ä¢ Y√ºzme, tekne, su sporlarƒ± YAPMA<br>
                            ‚Ä¢ Telefon kul√ºbesi, durak gibi k√º√ß√ºk metal yapƒ±lara SIƒûINMA</p>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">üÜò Yƒ±ldƒ±rƒ±m √áarpmasƒ±: ƒ∞lk Yardƒ±m Protokol√º</h3>
                        <div style="background: linear-gradient(135deg, #dcfce7, #d1fae5); padding: 1.25rem; border-radius: var(--radius-lg); border-left: 4px solid var(--success);">
                            <p><strong>1.</strong> G√ºvenlik: Artƒ±k elektrik YOK, hemen yakla≈ü<br>
                            <strong>2.</strong> 112: Hemen ara, "yƒ±ldƒ±rƒ±m √ßarpmasƒ±" belirt<br>
                            <strong>3.</strong> ABC: Bilin√ß-solunum-nabƒ±z kontrol√º<br>
                            <strong>4.</strong> CPR: Solunum yoksa 30:2 kalp masajƒ± ba≈üla<br>
                            <strong>5.</strong> Yanƒ±k: Soƒüuk su (buz deƒüil), steril √∂rt√º<br>
                            <strong>6.</strong> Omurga: D√º≈üme varsa boyun sabitle, hareket ettirme</p>
                        </div>
                    </div>
                `
            },
            dolu: {
                title: "üå®Ô∏è ≈ûiddetli Dolu: Hasar √ñnleme ve M√ºdahale Rehberi",
                content: `
                    <div style="line-height: 1.7;">
                        <div style="background: linear-gradient(135deg, #e0e7ff, #c7d2fe); padding: clamp(1rem, 2.5vw, 2rem); border-radius: var(--radius-lg); margin-bottom: 1.5rem; border-left: 4px solid #6366f1;">
                            <h3 style="color: #6366f1; margin-bottom: 0.75rem;">üå®Ô∏è Dolu Olu≈üum Mekanizmasƒ±</h3>
                            <p><strong>≈ûiddetli Dolu</strong>, kuvvetli yukarƒ± hava akƒ±mlarƒ± (updraft) ile y√ºkselen su damlacƒ±klarƒ±nƒ±n -40¬∞C'ye varan soƒüuk katmanlarda donmasƒ±, tekrar y√ºkselip katmanlar halinde b√ºy√ºmesiyle olu≈üur. Tenis topu (6.5cm) b√ºy√ºkl√ºƒü√ºne ula≈üabilir; d√º≈ü√º≈ü hƒ±zƒ± 160 km/s'yi bulur.</p>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">üìä Dolu Boyutlarƒ± ve Hasar Potansiyeli</h3>
                        
                        <div class="info-grid">
                            <div class="info-card">
                                <strong>üü¢ K√º√ß√ºk</strong>
                                <p>0.5-1.5 cm (bezelye)<br>Bitki yapraƒüƒ± hasarƒ±<br>Ara√ßta hafif √ßizik</p>
                            </div>
                            <div class="info-card">
                                <strong>üü° Orta</strong>
                                <p>1.5-4.5 cm (ceviz)<br>Cam √ßatlaƒüƒ± riski<br>Ciddi bitki hasarƒ±</p>
                            </div>
                            <div class="info-card">
                                <strong>üî¥ B√ºy√ºk</strong>
                                <p>4.5-6.5 cm (tenis topu)<br>Ara√ß camƒ± kƒ±rƒ±lmasƒ±<br>√áatƒ±/cephe hasarƒ±</p>
                            </div>
                            <div class="info-card">
                                <strong>‚ö´ Dev</strong>
                                <p>6.5+ cm (greyfurt)<br>Yapƒ±sal hasar<br>Hayvan/insan yaralanmasƒ±</p>
                            </div>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">üõ°Ô∏è √áok Katmanlƒ± Dolu Korumasƒ±</h3>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--primary);">üè†</span> Yapƒ± ve Ev √ñnlemleri</h4>
                            <p>‚Ä¢ <strong>Cam Koruma:</strong> G√ºvenlik filmi (‚â• 4 mil), kasƒ±rga panelleri, kepenk<br>
                            ‚Ä¢ <strong>√áatƒ±:</strong> Sƒ±nƒ±f 4 darbe dayanƒ±mlƒ± kiremit/shingle<br>
                            ‚Ä¢ <strong>Drenaj:</strong> Oluk temizliƒüi, su birikmesini √∂nle<br>
                            ‚Ä¢ <strong>ƒ∞√ß Mekan:</strong> Elektronik e≈üyalarƒ± pencereden uzakla≈ütƒ±r, deƒüerli e≈üyalarƒ± bodruma al</p>
                        </div>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: #8b5cf6;">üöó</span> Ara√ß Koruma Protokol√º</h4>
                            <p>‚Ä¢ <strong>√ñncelik:</strong> Kapalƒ± garaj ‚Üí Aƒüa√ß altƒ± (dikkat: dal kƒ±rƒ±lmasƒ±) ‚Üí Kalƒ±n battaniye/√∂zel ara√ß √∂rt√ºs√º<br>
                            ‚Ä¢ <strong>Yoldaysa:</strong> G√ºvenli yere √ßek, d√∂rtl√ºleri yak, camlardan uzak dur, motoru √ßalƒ±≈üƒ±r bƒ±rak<br>
                            ‚Ä¢ <strong>Sonrasƒ±:</strong> Hasar fotoƒürafla, sigortayƒ± hemen bilgilendir, cam kƒ±rƒ±ldƒ±ysa i√ßeri su girmesini √∂nle</p>
                        </div>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--success);">üå±</span> Tarƒ±m ve Hayvan Koruma</h4>
                            <p>‚Ä¢ <strong>Bitkiler:</strong> Dolu aƒüƒ±, branda, sera g√º√ßlendirme; hassas fideler i√ßeri al<br>
                            ‚Ä¢ <strong>Hayvanlar:</strong> Kapalƒ± barƒ±naƒüa al; a√ßƒ±kta kalanlar i√ßin r√ºzgarlƒ±k/barƒ±nak saƒüla<br>
                            ‚Ä¢ <strong>Sulama:</strong> Dolu sonrasƒ± toprak sƒ±kƒ±≈ümasƒ± olursa hafif √ßapalama</p>
                        </div>
                        
                        <div class="firstaid-step-card">
                            <h4><span style="color: var(--warning);">‚ö†Ô∏è</span> Dƒ±≈üarƒ±da Yakalanƒ±rsanƒ±z</h4>
                            <p>‚Ä¢ Hemen saƒülam bir binaya/ara√ßa SIƒûIN<br>
                            ‚Ä¢ Aƒüa√ß altƒ±na Gƒ∞RME (dal kƒ±rƒ±lmasƒ± + yƒ±ldƒ±rƒ±m riski)<br>
                            ‚Ä¢ Ba≈üƒ±nƒ± √ßanta/kitap/kask ile KORU<br>
                            ‚Ä¢ Yere √á√ñMEL, kapan, ayaklar biti≈üik<br>
                            ‚Ä¢ Metal yapƒ±/√ßitlerden UZAK dur</p>
                        </div>
                        
                        <h3 style="margin-top: 1.25rem; color: var(--primary);">üîç Dolu Sonrasƒ± Hasar Deƒüerlendirme</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin: 1rem 0;">
                            <div class="info-card">
                                <strong>üîç √áatƒ±</strong>
                                <p>Kƒ±rƒ±k kiremit, oluk hasarƒ±, izolasyon kontrol√º</p>
                            </div>
                            <div class="info-card">
                                <strong>ü™ü Camlar</strong>
                                <p>√áatlak/kƒ±rƒ±k var mƒ±? Ge√ßici √∂rt√º ile su giri≈üini √∂nle</p>
                            </div>
                            <div class="info-card">
                                <strong>üöó Ara√ß</strong>
                                <p>Cam, kaporta, far hasarƒ±; sigorta s√ºrecini ba≈ülat</p>
                            </div>
                            <div class="info-card">
                                <strong>üå≥ √áevre</strong>
                                <p>Kƒ±rƒ±k dallar, elektrik telleri, yol buzlanmasƒ±</p>
                            </div>
                        </div>
                        
                        <div class="firstaid-warning" role="alert">
                            <h5><span>üö´</span> DOLUDA ASLA!</h5>
                            <p>‚Ä¢ Dolu tanelerini YEME (kir, bakteri, kimyasal riski)<br>
                            ‚Ä¢ Hasarlƒ± √ßatƒ±ya √áIKMA (uzman √ßaƒüƒ±r)<br>
                            ‚Ä¢ Kƒ±rƒ±k cam elle DOKUNMA (kesilme riski)<br>
                            ‚Ä¢ Elektrik tellerine YAKLA≈ûMA (en az 10m)<br>
                            ‚Ä¢ Dolu suyunu ƒ∞√áME (kontaminasyon riski)</p>
                        </div>
                    </div>
                `
            }
        };

        // ==================== ZORLA≈ûTIRILMI≈û TEST SORULARI ====================
        // Sorular: Senaryo bazlƒ±, √ßoklu fakt√∂r, zaman baskƒ±sƒ± i√ßeren ileri d√ºzey
        const testData = {
            kasirga: [
                {
                    question: "EF-4 ≈üiddetinde bir kasƒ±rga yakla≈üƒ±rken, 2 katlƒ± m√ºstakil evde ya≈üƒ±yorsunuz. Bodrum yok. En g√ºvenli eylem planƒ± nedir?",
                    choices: [
                        "√úst katta i√ß odada, penceresiz banyoda, yastƒ±kla ba≈ü korumasƒ±",
                        "Alt katta dƒ±≈ü duvardan uzak i√ß odada, aƒüƒ±r mobilya yanƒ±nda, ba≈ü korumasƒ±",
                        "Hemen araca binip kasƒ±rga y√∂n√ºn√ºn tersine ka√ßmak",
                        "Pencereleri bantlayƒ±p √ºst katta beklemek"
                    ],
                    correctAnswerIndex: 1, // Doƒüru cevap index'i (karƒ±≈ütƒ±rmadan √∂nce)
                    explanation: "Bodrum yoksa, en alt kat, dƒ±≈ü duvarlardan uzak, penceresiz i√ß oda en g√ºvenlisidir. Aƒüƒ±r mobilya (dolap, kanepe) yanƒ±na yatmak u√ßan par√ßalardan korur. Ara√ßla ka√ßmak √∂l√ºmc√ºl risktir; bant camƒ± kƒ±rƒ±lmaya kar≈üƒ± korumaz."
                },
                {
                    question: "Kasƒ±rga sƒ±rasƒ±nda elektrik kesildi, gaz kokusu alƒ±yorsunuz. Acil eylem sƒ±ralamasƒ± nedir?",
                    choices: [
                        "1) Ana gaz vanasƒ±nƒ± kapat 2) Pencere a√ß 3) Dƒ±≈üarƒ± √ßƒ±k 4) 112'yi ara",
                        "1) Mum yak 2) Vanayƒ± kapat 3) Pencere a√ß 4) Bekle",
                        "1) Elektrik ≈üalterini a√ß 2) Vanayƒ± kontrol et 3) Telefonla ara",
                        "1) Hemen dƒ±≈üarƒ± ko≈ü 2) Kom≈üularƒ± uyar 3) Vanayƒ± sonra kapat"
                    ],
                    correctAnswerIndex: 0,
                    explanation: "Gaz ka√ßaƒüƒ±nda: √ñnce kaynaƒüƒ± kes (vana), sonra havalandƒ±r (pencere), sonra g√ºvenli alana √ßƒ±k, en son 112'yi ara. A√ßƒ±k ate≈ü (mum) veya elektrik anahtarƒ± kƒ±vƒ±lcƒ±m √ßƒ±karƒ±p patlamaya neden olabilir."
                },
                {
                    question: "Kasƒ±rga sonrasƒ± dƒ±≈üarƒ± √ßƒ±ktƒ±nƒ±z. Bir elektrik teli yola d√º≈üm√º≈ü, etrafƒ±nda su birikintisi var. Yakla≈üan bir yayaya ne √∂nerirsiniz?",
                    choices: [
                        "Tel 10 metreden uzaktaysa yava≈ü√ßa ge√ßebilir",
                        "Su iletken olduƒüu i√ßin en az 10 metre uzak durmalƒ±, 112'yi aramalƒ±",
                        "Plastik sopayla teli kenara itip yolu a√ßmalƒ±",
                        "Tel hareket etmiyorsa dokunarak kontrol etmeli"
                    ],
                    correctAnswerIndex: 1,
                    explanation: "D√º≈üm√º≈ü elektrik teli + su = √∂l√ºmc√ºl kombinasyon. Su elektriƒüi iletir, adƒ±m voltajƒ± ile 10 metre √∂tede bile √ßarpƒ±labilir. Asla yakla≈üma, ba≈ükalarƒ±nƒ± da uzak tut, hemen 112'yi ara."
                },
                {
                    question: "Kasƒ±rga uyarƒ±sƒ± aldƒ±nƒ±z, 15 dakikanƒ±z var. √ñncelik sƒ±rasƒ±na g√∂re ilk 3 eyleminiz ne olmalƒ±?",
                    choices: [
                        "1) Deƒüerli e≈üyalarƒ± topla 2) Sosyal medya payla≈ü 3) Pencereyi bantla",
                        "1) Aileyi toplanma noktasƒ±nda bir araya getir 2) Acil √ßantayƒ± al 3) Dƒ±≈ü e≈üyalarƒ± sabitle/i√ßeri al",
                        "1) Arabayƒ± benzinle doldur 2) Kom≈üularƒ± ara 3) Camlarƒ± a√ß",
                        "1) Yemek pi≈üir 2) Du≈ü al 3) Telefonu ≈üarj et"
                    ],
                    correctAnswerIndex: 1,
                    explanation: "Hayat √∂nceliklidir: √ñnce insan g√ºvenliƒüi (toplanma), sonra acil ihtiya√ßlar (√ßanta), sonra hasar √∂nleme (dƒ±≈ü e≈üyalar). Deƒüerli e≈üya, sosyal medya, cam bandƒ± ikincil √∂nceliklerdir."
                },
                {
                    question: "Kasƒ±rga sƒ±rasƒ±nda pencere camƒ± kƒ±rƒ±ldƒ±, i√ßeri r√ºzgar ve yaƒümur giriyor. Ne yapmalƒ±sƒ±nƒ±z?",
                    choices: [
                        "Hemen camƒ±n √∂n√ºne ge√ßip eliyle kapatmaya √ßalƒ±≈ü",
                        "Kƒ±rƒ±k camdan uzakla≈ü, odayƒ± terk et, penceresiz i√ß odaya ge√ß",
                        "Plastik po≈üetle camƒ± ge√ßici olarak kapat",
                        "Temizlik malzemesi getirip suyu sil"
                    ],
                    correctAnswerIndex: 1,
                    explanation: "Kƒ±rƒ±k cam, kasƒ±rga sƒ±rasƒ±nda √∂l√ºmc√ºl projektil kaynaƒüƒ±dƒ±r. Onarmaya √ßalƒ±≈ümak yerine, hemen g√ºvenli b√∂lgeye √ßekilmek hayati √∂nem ta≈üƒ±r. Hasar sonrasƒ± onarƒ±m, tehlike ge√ßtikten sonra yapƒ±lƒ±r."
                }
            ],
            yildirim: [
                {
                    question: "A√ßƒ±k alanda y√ºr√ºrken yƒ±ldƒ±rƒ±m fƒ±rtƒ±nasƒ± bastƒ±rdƒ±. Etrafta: tek bir aƒüa√ß (15m), metal √ßit (20m), k√º√ß√ºk bir kul√ºbe (30m), aracƒ±nƒ±z (50m). En g√ºvenli rota nedir?",
                    choices: [
                        "Aƒüa√ß altƒ±na sƒ±ƒüƒ±n (yaƒümurdan korunursun)",
                        "Metal √ßite yaslan (topraklama saƒülar)",
                        "Kul√ºbeye ko≈ü (k√º√ß√ºk de olsa kapalƒ± alan)",
                        "Araca doƒüru y√ºr√º, yolda yƒ±ldƒ±rƒ±m √ßarparsa doƒüru pozisyonu al"
                    ],
                    correctAnswerIndex: 3,
                    explanation: "Ara√ß en g√ºvenlisidir (Faraday kafesi). 50m mesafede yƒ±ldƒ±rƒ±m √ßarpma riski d√º≈ü√ºk, √ßarparsa bile doƒüru pozisyon (√ß√∂mel, ayaklar biti≈üik) riski minimize eder. Aƒüa√ß (yan √ßarpma), metal √ßit (iletken), kul√ºbe (yetersiz koruma) daha risklidir."
                },
                {
                    question: "≈ûim≈üek ile g√∂k g√ºr√ºlt√ºs√º arasƒ±nda 9 saniye ge√ßti. 3 dakika sonra yeni bir ≈üim≈üek g√∂rd√ºn√ºz, g√ºr√ºlt√ºy√º 6 saniyede duydunuz. Durum deƒüerlendirmesi nedir?",
                    choices: [
                        "Fƒ±rtƒ±na uzakla≈üƒ±yor (3km ‚Üí 2km), risk azaldƒ±, dƒ±≈üarƒ±da kalabilirsin",
                        "Fƒ±rtƒ±na yakla≈üƒ±yor (3km ‚Üí 2km), risk arttƒ±, hemen korunmalƒ±sƒ±n",
                        "Mesafe aynƒ± kaldƒ±, durum deƒüi≈ümedi",
                        "Hesap hatalƒ±, tekrar √∂l√ß√ºm yapmalƒ±"
                    ],
                    correctAnswerIndex: 1,
                    explanation: "9√∑3=3km, 6√∑3=2km. Fƒ±rtƒ±na 1km yakla≈ütƒ±! 30-30 kuralƒ±na g√∂re 30 sn'den az ise Rƒ∞SK Y√úKSEK. Hemen kapalƒ± alana sƒ±ƒüƒ±nmak hayati √∂nem ta≈üƒ±r."
                },
                {
                    question: "Yƒ±ldƒ±rƒ±m √ßarpan bir ki≈üiye ilk m√ºdahalede hangisi YANLI≈ûTIR?",
                    choices: [
                        "Ki≈üinin elektrik y√ºkl√º olduƒüunu d√º≈ü√ºn√ºp dokunmadan beklemek",
                        "Hemen 112'yi arayƒ±p 'yƒ±ldƒ±rƒ±m √ßarpmasƒ±' belirtmek",
                        "Solunum yoksa CPR (30:2) ba≈ülamak",
                        "Yanƒ±k b√∂lgeye soƒüuk su uygulamak (buz deƒüil)"
                    ],
                    correctAnswerIndex: 0,
                    explanation: "Yƒ±ldƒ±rƒ±m √ßarpan ki≈üi elektrik Y√úKL√ú DEƒûƒ∞LDƒ∞R, hemen m√ºdahale edilebilir. Beklemek hayati zaman kaybƒ±dƒ±r. Diƒüer se√ßenekler doƒüru ilk yardƒ±m protokolleridir."
                },
                {
                    question: "Kapalƒ± alanda yƒ±ldƒ±rƒ±m fƒ±rtƒ±nasƒ± sƒ±rasƒ±nda hangi davranƒ±≈ü G√úVENLƒ∞Dƒ∞R?",
                    choices: [
                        "Kablolu telefonla konu≈ümak",
                        "Du≈ü almak (su borularƒ± topraklama saƒülar)",
                        "Cep telefonu ile SMS g√∂ndermek",
                        "Pencere kenarƒ±nda fƒ±rtƒ±nayƒ± izlemek"
                    ],
                    correctAnswerIndex: 2,
                    explanation: "Cep telefonu kablosuz olduƒüu i√ßin g√ºvenlidir. Kablolu telefon, su tesisatƒ±, pencere kenarƒ± yƒ±ldƒ±rƒ±m enerjisinin iletilme riski ta≈üƒ±r. SMS, sesli aramadan daha az risklidir."
                },
                {
                    question: "A√ßƒ±k alanda yƒ±ldƒ±rƒ±m riski var. Doƒüru korunma pozisyonu hangisidir?",
                    choices: [
                        "Ayakta dur, eller havada (dikkat √ßekme)",
                        "Yere yat, eller ba≈ü √ºst√ºnde",
                        "Ayaklar biti≈üik √ß√∂mel, ba≈ü dizlere g√∂m√ºl√º, eller kulakta",
                        "Ko≈üarak en al√ßak noktaya ula≈ümaya √ßalƒ±≈ü"
                    ],
                    correctAnswerIndex: 2,
                    explanation: "√á√∂melme pozisyonu: toprak temasƒ±nƒ± minimize eder, adƒ±m voltajƒ± riskini azaltƒ±r, v√ºcut profilini k√º√ß√ºlt√ºr. Yere yatmak adƒ±m voltajƒ± riskini artƒ±rƒ±r, ko≈ümak d√º≈üme/√ßarpmaya a√ßƒ±k hale getirir."
                }
            ],
            dolu: [
                {                    question: "Dolu fƒ±rtƒ±nasƒ± uyarƒ±sƒ± aldƒ±nƒ±z, aracƒ±nƒ±z a√ßƒ±k otoparkta. 10 dakikanƒ±z var. En etkili koruma stratejisi nedir?",
                    choices: [
                        "Aracƒ±n √ºzerine kalƒ±n battaniye √∂rt, kenarlarƒ±nƒ± lastikle sabitle",
                        "Aracƒ± en yakƒ±n aƒüacƒ±n altƒ±na √ßek (dallar dolu keser)",
                        "Aracƒ± terk edip en yakƒ±n binaya sƒ±ƒüƒ±n, hasarƒ± sigortaya bƒ±rak",
                        "Aracƒ±n camlarƒ±na karton yapƒ±≈ütƒ±r, i√ßine gir bekle"
                    ],
                    correctAnswerIndex: 2,
                    explanation: "ƒ∞nsan hayatƒ± her zaman √∂nceliklidir. B√ºy√ºk dolu (6.5cm+) ara√ß camlarƒ±nƒ± kƒ±rabilir, battaniye yetersiz kalƒ±r. Aƒüa√ß dalƒ± kƒ±rƒ±lƒ±p araca d√º≈üebilir. Sigorta hasarƒ± kar≈üƒ±lar, can kaybƒ± telafi edilemez."
                },
                {
                    question: "Dolu fƒ±rtƒ±nasƒ± sƒ±rasƒ±nda yolda ara√ß kullanƒ±yorsunuz. Camlar √ßatlamaya ba≈üladƒ±. Acil eylem planƒ± nedir?",
                    choices: [
                        "Hemen dur, d√∂rtl√ºleri yak, camlardan uzak i√ß koltuƒüa ge√ß, 112'yi ara",
                        "Hƒ±zƒ± artƒ±rarak fƒ±rtƒ±nadan √ßƒ±kmaya √ßalƒ±≈ü",
                        "Aracƒ± terk et, yol kenarƒ±na yat",
                        "Camlarƒ± a√ßarak basƒ±n√ß e≈üitlemeye √ßalƒ±≈ü"
                    ],
                    correctAnswerIndex: 0,
                    explanation: "G√ºvenli duru≈ü + d√∂rtl√ºler + camlardan uzakla≈ü + yardƒ±m √ßaƒürƒ±sƒ± = doƒüru protokol. Hƒ±z artƒ±rmak kontrol kaybƒ±na, ara√ß terk etmek a√ßƒ±k alanda kalmaya, cam a√ßmak i√ßeri dolu girmesine neden olur."
                },
                {
                    question: "Dolu sonrasƒ± bah√ßenizdeki meyve aƒüa√ßlarƒ± hasar g√∂rd√º. Hangi m√ºdahale YANLI≈ûTIR?",
                    choices: [
                        "Kƒ±rƒ±k dallarƒ± temiz kesimle budamak",
                        "Hasarlƒ± meyveleri toplayƒ±p √ß√ºr√ºme √∂nlemek",
                        "Hemen yoƒüun g√ºbreleme ile aƒüacƒ± toparlamaya √ßalƒ±≈ümak",
                        "Yara yerlerine aƒüa√ß macunu uygulamak"
                    ],
                    correctAnswerIndex: 2,
                    explanation: "Hasarlƒ± aƒüa√ßta yoƒüun g√ºbreleme 'stres g√ºbrelemesi' olur, aƒüacƒ± daha √ßok yorar. √ñnce temizlik, yara bakƒ±mƒ±, hafif sulama yapƒ±lƒ±r. G√ºbreleme aƒüa√ß toparlandƒ±ktan sonra, uygun dozda uygulanƒ±r."
                },
                {
                    question: "Dolu taneleri evinizin √ßatƒ±sƒ±na zarar verdi, i√ßeride su sƒ±zƒ±ntƒ±sƒ± var. Acil √∂ncelik sƒ±ralamasƒ± nedir?",
                    choices: [
                        "1) Su birikintisini sil 2) E≈üyalarƒ± kuru yere ta≈üƒ± 3) √áatƒ±yƒ± ge√ßici √∂rt 4) Sigortayƒ± ara",
                        "1) Elektriƒüi kes (su+elektrik riski) 2) Deƒüerli e≈üyalarƒ± koru 3) √áatƒ±yƒ± ge√ßici √∂rt 4) Profesyonel yardƒ±m √ßaƒüƒ±r",
                        "1) Hemen √ßatƒ±ya √ßƒ±k 2) Delikleri kapat 3) ƒ∞√ßeri suyu temizle",
                        "1) Kom≈üularƒ± uyar 2) Sosyal medya payla≈ü 3) Sonra √∂nlem al"
                    ],
                    correctAnswerIndex: 1,
                    explanation: "G√ºvenlik √∂nceliklidir: Su+elektrik = √∂l√ºmc√ºl risk, √∂nce ≈üalteri indir. Sonra mal koruma, ge√ßici √∂nlem, en son profesyonel onarƒ±m. √áatƒ±ya √ßƒ±kmak d√º≈üme riski ta≈üƒ±r."
                },
                {
                    question: "Dolu fƒ±rtƒ±nasƒ± sƒ±rasƒ±nda a√ßƒ±k alanda y√ºr√ºyen birine ne √∂nerirsiniz? (√áoklu se√ßim mantƒ±ƒüƒ±)",
                    choices: [
                        "En yakƒ±n saƒülam binaya sƒ±ƒüƒ±n",
                        "Ba≈üƒ±nƒ± √ßanta/kitap ile koru",
                        "Aƒüa√ß altƒ±na girme, metal nesneleri bƒ±rak",
                        "Hepsi doƒüru, acil durumda hepsi uygulanmalƒ±"                    ],
                    correctAnswerIndex: 3,
                    explanation: "Bu senaryoda t√ºm se√ßenekler hayati √∂nem ta≈üƒ±r: Kapalƒ± alan √∂ncelikli, ba≈ü korumasƒ± travmayƒ± azaltƒ±r, aƒüa√ß/metal risklerini bilmek yaralanmayƒ± √∂nler. √áoklu fakt√∂rl√º durumlarda b√ºt√ºnc√ºl yakla≈üƒ±m gerekir."
                }
            ]
        };

        // ==================== TEST STATE Y√ñNETƒ∞Mƒ∞ ====================
        let currentTest = null;
        let currentQuestion = 0;
        let score = 0;
        let allAnswers = [];
        let isAnswerSelected = false;
        let autoContinueTimer = null;
        let shuffledQuestions = []; // Karƒ±≈ütƒ±rƒ±lmƒ±≈ü sorular

        const testTitles = {
            kasirga: "üå™Ô∏è Kasƒ±rga: ƒ∞leri D√ºzey Test",
            yildirim: "‚ö° Yƒ±ldƒ±rƒ±m: Uzmanlƒ±k Testi", 
            dolu: "üå®Ô∏è Dolu: Hasar √ñnleme Testi"
        };

        // Test Ba≈ülatma - ≈ûƒ±klarƒ± ve sorularƒ± karƒ±≈ütƒ±r
        function startTest(type) {
            currentTest = type;
            currentQuestion = 0;
            score = 0;
            allAnswers = [];
            isAnswerSelected = false;
            
            // Sorularƒ± ve ≈üƒ±klarƒ± karƒ±≈ütƒ±r
            const originalQuestions = testData[type];
            shuffledQuestions = originalQuestions.map((q, qIndex) => {
                // ≈ûƒ±klarƒ± karƒ±≈ütƒ±r ve doƒüru cevap index'ini g√ºncelle
                const choicesWithIndex = q.choices.map((choice, cIndex) => ({
                    text: choice,
                    originalIndex: cIndex,
                    isCorrect: cIndex === q.correctAnswerIndex
                }));
                const shuffledChoices = shuffleArray(choicesWithIndex);
                
                // Yeni doƒüru cevap index'ini bul
                const newCorrectIndex = shuffledChoices.findIndex(c => c.isCorrect);
                
                return {
                    question: q.question,
                    choices: shuffledChoices.map(c => c.text),
                    correctAnswerIndex: newCorrectIndex,
                    explanation: q.explanation
                };            });
            // Soru sƒ±rasƒ±nƒ± da karƒ±≈ütƒ±r
            shuffledQuestions = shuffleArray(shuffledQuestions);

            document.getElementById('testTitle').textContent = testTitles[type];
            document.getElementById('testOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Eri≈üilebilirlik: Modal a√ßƒ±ldƒ±ƒüƒ±nda odak y√∂netimi
            const firstChoice = document.querySelector('.choice');
            setTimeout(() => firstChoice?.focus(), 100);

            renderQuestion();
        }

        function closeTest() {
            if (autoContinueTimer) clearTimeout(autoContinueTimer);
            document.getElementById('testOverlay').classList.remove('active');
            document.body.style.overflow = '';
            document.body.style.position = '';
            document.body.style.inset = '';
            resetTest();
        }

        function resetTest() {
            currentTest = null;
            currentQuestion = 0;
            score = 0;
            allAnswers = [];
            isAnswerSelected = false;
            shuffledQuestions = [];
            if (autoContinueTimer) {
                clearTimeout(autoContinueTimer);
                autoContinueTimer = null;
            }
        }

        function renderQuestion() {
            if (!currentTest || currentQuestion >= shuffledQuestions.length) {
                showResults();
                return;
            }

            const testContent = document.getElementById('testContent');
            const questionData = shuffledQuestions[currentQuestion];
            const progress = ((currentQuestion + 1) / shuffledQuestions.length) * 100;

            testContent.innerHTML = `
                <div class="progress-container">
                    <div class="progress-label">                        <span>Soru ${currentQuestion + 1} / ${shuffledQuestions.length}</span>
                        <span>Skor: ${score}</span>
                    </div>
                    <div class="progress-bar" role="progressbar" aria-valuenow="${Math.round(progress)}" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                </div>
                
                <div class="question" role="heading" aria-level="3">${questionData.question}</div>
                
                <div class="choices" id="choicesContainer" role="radiogroup" aria-label="Cevap Se√ßenekleri">
                    ${questionData.choices.map((choice, index) => `
                        <button class="choice" 
                                role="radio" 
                                aria-checked="false"
                                onclick="selectAnswer(${index})" 
                                id="choice-${index}"
                                tabindex="0">
                            ${String.fromCharCode(65 + index)}. ${choice}
                        </button>
                    `).join('')}
                </div>
                
                <div id="feedbackContainer" aria-live="polite"></div>
            `;
        }

        function selectAnswer(choiceIndex) {
            if (isAnswerSelected) return;
            isAnswerSelected = true;

            const questionData = shuffledQuestions[currentQuestion];
            const isCorrect = choiceIndex === questionData.correctAnswerIndex;

            // T√ºm se√ßenekleri devre dƒ±≈üƒ± bƒ±rak ve aria g√ºncelle
            const choices = document.querySelectorAll('.choice');
            choices.forEach((choice, idx) => {
                choice.disabled = true;
                choice.setAttribute('aria-checked', idx === choiceIndex ? 'true' : 'false');
            });

            // G√∂rsel feedback
            const selectedChoice = document.getElementById(`choice-${choiceIndex}`);
            selectedChoice.classList.add(isCorrect ? 'correct' : 'wrong');
            
            if (!isCorrect) {
                const correctChoice = document.getElementById(`choice-${questionData.correctAnswerIndex}`);
                correctChoice.classList.add('correct');
            }
            // Cevabƒ± kaydet
            allAnswers.push({
                question: questionData.question,
                userAnswer: questionData.choices[choiceIndex],
                correctAnswer: questionData.choices[questionData.correctAnswerIndex],
                isCorrect: isCorrect,
                explanation: questionData.explanation
            });

            if (isCorrect) score++;

            // Feedback g√∂ster
            const feedbackContainer = document.getElementById('feedbackContainer');
            feedbackContainer.innerHTML = `
                <div class="feedback ${isCorrect ? 'correct' : 'wrong'}" role="alert">
                    <strong>${isCorrect ? '‚úÖ M√ºkemmel!' : '‚ùå Yanlƒ±≈ü!'}</strong><br>
                    ${questionData.explanation}
                </div>
                
                <button class="auto-continue-btn" id="autoContinueBtn" onclick="nextQuestion()" aria-label="${currentQuestion < shuffledQuestions.length - 1 ? 'Sonraki soruya ge√ß' : 'Sonu√ßlarƒ± g√∂r'}">
                    <span aria-hidden="true">${currentQuestion < shuffledQuestions.length - 1 ? '‚è≠Ô∏è' : 'üèÅ'}</span> 
                    ${currentQuestion < shuffledQuestions.length - 1 ? 'Sonraki Soru' : 'Sonu√ßlarƒ± G√∂ster'}
                </button>
                
                <div class="countdown-text" id="countdownText" aria-live="polite">
                    Otomatik ge√ßi≈ü: <span id="countdownNumber">3</span> saniye
                </div>
            `;

            startAutoContinue();
        }

        function startAutoContinue() {
            let countdown = 3;
            const countdownElement = document.getElementById('countdownNumber');
            
            autoContinueTimer = setInterval(() => {
                countdown--;
                if (countdownElement) countdownElement.textContent = countdown;

                if (countdown <= 0) {
                    clearInterval(autoContinueTimer);
                    nextQuestion();
                }
            }, 1000);
        }

        function nextQuestion() {
            if (autoContinueTimer) clearTimeout(autoContinueTimer);
            currentQuestion++;            isAnswerSelected = false;
            renderQuestion();
        }

        function showResults() {
            const testContent = document.getElementById('testContent');
            const totalQuestions = shuffledQuestions.length;
            const percentage = Math.round((score / totalQuestions) * 100);

            // Performans deƒüerlendirme
            let resultIcon, resultMessage, performanceTip;
            if (percentage >= 90) {
                resultIcon = 'üèÜ';
                resultMessage = 'OLAƒûAN√úST√ú! üéØ Afet y√∂netimi konusunda uzman seviyesindesin!';
                performanceTip = 'Bu bilgiyi ba≈ükalarƒ±yla payla≈ü, toplumu g√º√ßlendir!';
            } else if (percentage >= 75) {
                resultIcon = 'üåü';
                resultMessage = '√áok ƒ∞yi! üí™ Hava afetlerine kar≈üƒ± iyi hazƒ±rlƒ±klƒ±sƒ±n.';
                performanceTip = 'Detaylƒ± bilgileri tekrar g√∂zden ge√ßir, m√ºkemmelle≈ütir.';
            } else if (percentage >= 60) {
                resultIcon = 'üëç';
                resultMessage = 'ƒ∞yi Ba≈ülangƒ±√ß! üìö Temel bilgileri √∂ƒürenmi≈üsin, geli≈ütirilmeye a√ßƒ±k.';
                performanceTip = 'Bilgi b√∂l√ºm√ºn√º detaylƒ± incele, testi tekrar dene.';
            } else {
                resultIcon = 'üí°';
                resultMessage = '√ñƒürenme Fƒ±rsatƒ±! üîÑ Afet bilinci hayati √∂nem ta≈üƒ±r, pes etme.';
                performanceTip = 'Her sorunun a√ßƒ±klamasƒ±nƒ± oku, bilgi b√∂l√ºm√ºn√º √ßalƒ±≈ü, tekrar dene.';
            }

            // Detaylƒ± sonu√ßlar
            let detailedResultsHTML = '';
            allAnswers.forEach((answer, index) => {
                detailedResultsHTML += `
                    <div class="result-item ${answer.isCorrect ? 'correct' : 'wrong'}">
                        <div class="result-question">Soru ${index + 1}: ${answer.question}</div>
                        <div class="result-answer ${answer.isCorrect ? 'correct' : 'wrong'}">
                            ${answer.isCorrect ? '‚úÖ' : '‚ùå'} 
                            <strong>Cevabƒ±n:</strong> ${answer.userAnswer}
                        </div>
                        ${!answer.isCorrect ? `
                            <div class="result-answer correct">
                                ‚úÖ <strong>Doƒüru:</strong> ${answer.correctAnswer}
                            </div>
                        ` : ''}
                        <div class="result-explanation">
                            üí° ${answer.explanation}
                        </div>
                    </div>
                `;
            });
            testContent.innerHTML = `
                <div class="result-screen">
                    <div class="result-icon" aria-hidden="true">${resultIcon}</div>
                    <div class="result-score" aria-label="Skor: ${score} doƒüru, ${totalQuestions} sorudan">${score}/${totalQuestions}</div>
                    <div class="result-message">
                        ${resultMessage}
                        <br><strong>Ba≈üarƒ± Oranƒ±: %${percentage}</strong>
                        <br><small style="color: var(--gray-500); display: block; margin-top: 0.5rem;">${performanceTip}</small>
                    </div>
                    
                    <div class="detailed-results">
                        <h3 style="margin-bottom: 1rem; color: var(--primary);">üìä Detaylƒ± Analiz:</h3>
                        ${detailedResultsHTML}
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1.5rem;">
                        <button class="card-btn primary" onclick="startTest('${currentTest}')" aria-label="Testi Tekrar Ba≈ülat">
                            <span aria-hidden="true">üîÑ</span> Tekrar Dene
                        </button>
                        <button class="card-btn secondary" onclick="closeTest()" aria-label="Ana Sayfaya D√∂n">
                            <span aria-hidden="true">üè†</span> Ana Sayfa
                        </button>
                    </div>
                    
                    ${percentage < 75 ? `
                    <div style="margin-top: 1.5rem; padding: 1rem; background: var(--gray-100); border-radius: var(--radius-md);">
                        <strong style="color: var(--primary);">üí° √ñneri:</strong> 
                        <span style="color: var(--gray-600);">Bilgi Al butonuna tƒ±klayarak detaylƒ± rehberi incele, sonra testi tekrar dene.</span>
                    </div>` : ''}
                </div>
            `;
        }

        // ==================== Bƒ∞LGƒ∞ G√ñSTERME Sƒ∞STEMƒ∞ (DOMPurify ile g√ºvenli) ====================
        function showInfo(type) {
            const info = infoData[type];
            document.getElementById('detailTitle').textContent = info.title;
            
            // XSS Korumasƒ±: DOMPurify ile sanitize et
            const sanitizedContent = sanitize(info.content);
            document.getElementById('detailContent').innerHTML = sanitizedContent;
            
            document.getElementById('detailSection').style.display = 'block';
            document.querySelectorAll('.card').forEach(card => card.style.display = 'none');
            document.querySelector('.section-title').style.display = 'none';
            
            // Sayfayƒ± bilgi b√∂l√ºm√ºne kaydƒ±r
            document.getElementById('detailSection').scrollIntoView({ behavior: 'smooth' });
                        // Eri≈üilebilirlik: Odak y√∂netimi
            document.getElementById('detailSection').setAttribute('tabindex', '-1');
            document.getElementById('detailSection').focus();
        }

        function hideInfo() {
            document.getElementById('detailSection').style.display = 'none';
            document.querySelectorAll('.card').forEach(card => card.style.display = 'flex');
            document.querySelector('.section-title').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ==================== EVENT LISTENERS & INIT ====================
        document.addEventListener('DOMContentLoaded', () => {
            // Animasyonlarƒ± tetikle
            const animatedElements = document.querySelectorAll('.animate-fade-in-up');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            
            animatedElements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                el.style.transition = `opacity 0.6s ease ${index * 100}ms, transform 0.6s ease ${index * 100}ms`;
                observer.observe(el);
            });

            // Emergency banner click
            document.getElementById('emergencyBanner')?.addEventListener('click', () => {
                alert('üö® ACƒ∞L DURUM PROTOKOL√ú:\n\n1Ô∏è‚É£ SAKƒ∞N OL - Panik kararlarƒ± k√∂t√ºle≈ütirir\n2Ô∏è‚É£ 112\'yi ARA - Konum, olay, yaralƒ± bilgisi ver\n3Ô∏è‚É£ G√úVENLƒ∞ƒûƒ∞ SAƒûLA - Kendin ve √ßevren i√ßin\n4Ô∏è‚É£ ƒ∞LK YARDIM UYGULA - Temel kurallarƒ± hatƒ±rla\n\nüí° Bu uygulama bilgilendirme ama√ßlƒ±dƒ±r. Ger√ßek acilde 112 esastƒ±r.');
            });

            // Klavye kƒ±sayollarƒ±
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + F: ƒ∞lk Yardƒ±m
                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'f') {
                    e.preventDefault();
                    openFirstAidModal();
                }
                // Escape: Modal/Test kapat
                if (e.key === 'Escape') {
                    if (document.getElementById('testOverlay')?.classList.contains('active')) {
                        closeTest();
                    } else if (firstAidModal?.classList.contains('active')) {                        closeFirstAidModal();
                    } else if (mobileMenu?.classList.contains('active')) {
                        toggleMobileMenu();
                    }
                }
            });

            // Ziyaret sayacƒ± (localStorage)
            try {
                const visits = parseInt(localStorage.getItem('afetHazirlik_hava_visits') || '0') + 1;
                localStorage.setItem('afetHazirlik_hava_visits', visits.toString());
            } catch (e) {
                // localStorage kapalƒ±ysa hata verme
                console.warn('LocalStorage eri≈üilemedi');
            }

            // Service Worker registration (PWA hazƒ±rlƒ±ƒüƒ±)
            if ('serviceWorker' in navigator) {
                // window.addEventListener('load', () => {
                //     navigator.serviceWorker.register('/sw.js').catch(err => {
                //         console.log('SW registration failed:', err);
                //     });
                // });
            }
        });

        // ==================== PERFORMANS OPTƒ∞Mƒ∞ZASYONLARI ====================
        // Resize debounce
        let resizeTimer;
        window.addEventListener('resize', debounce(() => {
            // Mobil/PC ge√ßi≈üinde animasyon s√ºrelerini ayarla
            const isMobile = window.innerWidth <= 768;
            document.documentElement.style.setProperty(
                '--transition-normal', 
                isMobile ? '200ms' : '300ms'
            );
        }, 250));

        // Scroll performans
        let ticking = false;
        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    // Scroll'a baƒülƒ± efektler buraya
                    ticking = false;
                });
                ticking = true;
            }
        }, { passive: true });
        // Touch swipe ile test kapatma (mobil)
        if ('ontouchstart' in window) {
            const testOverlay = document.getElementById('testOverlay');
            let touchStartX = 0;
            
            testOverlay?.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
            }, { passive: true });
            
            testOverlay?.addEventListener('touchend', (e) => {
                const touchEndX = e.changedTouches[0].clientX;
                const diff = touchStartX - touchEndX;
                
                // Saƒüdan sola swipe ile kapat
                if (diff > 100 && testOverlay.classList.contains('active')) {
                    closeTest();
                }
            }, { passive: true });
        }

        // ==================== HATA Y√ñNETƒ∞Mƒ∞ & FALLBACKS ====================
        // Leaflet y√ºklenmezse fallback
        if (typeof L === 'undefined') {
            console.warn('Leaflet y√ºklenemedi, harita √∂zellikleri devre dƒ±≈üƒ±.');
            // Harita gerektiren √∂zellikleri disable et
            document.querySelectorAll('[data-requires-map]').forEach(el => {
                el.style.opacity = '0.5';
                el.style.pointerEvents = 'none';
                el.setAttribute('aria-disabled', 'true');
            });
        }

        // DOMPurify y√ºklenmezse uyarƒ±
        if (typeof DOMPurify === 'undefined') {
            console.warn('‚ö†Ô∏è DOMPurify bulunamadƒ±! XSS korumasƒ± sƒ±nƒ±rlƒ±. Production\'da CDN\'yi kontrol edin.');
        }

        // ==================== ANALYTICS (Opsiyonel - Gizlilik Dostu) ====================
        // Basit, anonim istatistik (GDPR uyumlu)
        const trackEvent = (category, action, label) => {
            // Ger√ßek uygulamada: Google Analytics 4 (konsent ile) veya Matomo
            console.log(`[Analytics] ${category} | ${action} | ${label}`);
            // √ñrnek: trackEvent('Test', 'Start', 'kasirga');
        };

        // Test ba≈ülangƒ±√ß/sonu√ß takibi
        const originalStartTest = startTest;
        startTest = function(type) {
            trackEvent('Test', 'Start', type);
            originalStartTest(type);        };

        // ƒ∞lk yardƒ±m modal a√ßƒ±lƒ±≈ü takibi
        const originalOpenFirstAid = openFirstAidModal;
        openFirstAidModal = function() {
            trackEvent('FirstAid', 'Open', 'modal');
            originalOpenFirstAid();
        };

        // Sayfa g√∂r√ºn√ºr olduƒüunda (g√∂r√ºn√ºrl√ºk API)
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                trackEvent('Page', 'Visible', 'hava.html');
            }
        });
    </script>
</body>
</html>